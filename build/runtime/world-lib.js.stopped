const $__C=stopify.compiler;var $__T=stopify;var $__R=$__T.newRTS("lazy");var $S=stopify.init($__R);var fun0;if($__R.mode)fun0=function funExpr0(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun1,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun1,newTarget]}var restoreNextFrame=()=>{return funExpr0.call(this)};var fun1;if($__R.mode){fun1=function funExpr1(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun23,worldIndex,fun67,currentFocusedNode,fun24,fun68,rawJsworld,forEachK,fun25,fun69,doNothing,fun26,fun48,change_world,img,checkDomSexp,DELAY_BEFORE_RETRY,on_draw,node_to_tree,on_mouse,changingWorld,sexp2tree,camelCase,isMemq,stopClickPropagation,sexp2css_node,detachEvent,worldIndexStack,h1,preventDefault,BigBangRecord,Jsworld,stopPropagation,getNewWorldIndex,input,do_redraw,preorder,update_dom,add_ev_after,throwDomError,text,update_css,worldListeners,checkbox_input,addFocusTracking,StopWhenHandler,nodeEq,InitialWorld,JsworldDomError,add_ev,app0,eventDetachersStack,set_css_attribs,p,div,concat_map,nodes,sexp2attrib,button,world,hasCurrentFocusedSelection,isElementNode,option,maintainingSelection,attachEvent,FocusedSelection,clearCss,fun5,stop_when,relations,fun6,canvas,text_input,getCurrentFocusedSelection,bigBang,isTextNode,fun71,eventDetachers,raw_node,fun72,member,runningBigBangs,textarea,sexp2css,isMatchingCssSelector,refresh_node_values,worldListenersStack,fun63,fun74,select,map,remove_world_listener,fun75,on_world_change,on_tick,fun54,fun65,fun76,fun21,copy_attribs,fun55,fun66,resume_running_state,_worldIndex,add_world_listener,clear_running_state,fun22,on_key,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun23,worldIndex,fun67,currentFocusedNode,fun24,fun68,rawJsworld,forEachK,fun25,fun69,doNothing,fun26,fun48,change_world,img,checkDomSexp,DELAY_BEFORE_RETRY,on_draw,node_to_tree,on_mouse,changingWorld,sexp2tree,camelCase,isMemq,stopClickPropagation,sexp2css_node,detachEvent,worldIndexStack,h1,preventDefault,BigBangRecord,Jsworld,stopPropagation,getNewWorldIndex,input,do_redraw,preorder,update_dom,add_ev_after,throwDomError,text,update_css,worldListeners,checkbox_input,addFocusTracking,StopWhenHandler,nodeEq,InitialWorld,JsworldDomError,add_ev,app0,eventDetachersStack,set_css_attribs,p,div,concat_map,nodes,sexp2attrib,button,world,hasCurrentFocusedSelection,isElementNode,option,maintainingSelection,attachEvent,FocusedSelection,clearCss,fun5,stop_when,relations,fun6,canvas,text_input,getCurrentFocusedSelection,bigBang,isTextNode,fun71,eventDetachers,raw_node,fun72,member,runningBigBangs,textarea,sexp2css,isMatchingCssSelector,refresh_node_values,worldListenersStack,fun63,fun74,select,map,remove_world_listener,fun75,on_world_change,on_tick,fun54,fun65,fun76,fun21,copy_attribs,fun55,fun66,resume_running_state,_worldIndex,add_world_listener,clear_running_state,fun22,on_key,newTarget]}var restoreNextFrame=()=>{return funExpr1.call(this)};var _worldIndex,getNewWorldIndex,Jsworld,currentFocusedNode,doNothing,forEachK,InitialWorld,world,worldListenersStack,eventDetachersStack,worldIndexStack,runningBigBangs,worldIndex,worldListeners,eventDetachers,changingWorld,clear_running_state,resume_running_state,add_world_listener,remove_world_listener,DELAY_BEFORE_RETRY,change_world,map,concat_map,member,node_to_tree,nodes,relations,preorder,nodeEq,isMemq,refresh_node_values,update_dom,camelCase,set_css_attribs,isMatchingCssSelector,clearCss,update_css,sexp2tree,sexp2css,maintainingSelection,do_redraw,FocusedSelection,hasCurrentFocusedSelection,getCurrentFocusedSelection,StopWhenHandler,BigBangRecord,copy_attribs,preventDefault,stopPropagation,attachEvent,detachEvent,on_key,on_mouse,checkDomSexp,on_draw,stop_when,on_world_change,add_ev,add_ev_after,addFocusTracking,sexp2attrib,sexp2css_node,isTextNode,isElementNode,JsworldDomError,throwDomError,p,div,button,stopClickPropagation,text_input,checkbox_input,input,text,option,select,textarea,h1,canvas,img,raw_node,app0,rawJsworld,fun5,fun6,fun21,fun22,fun23,bigBang,fun24,fun25,fun26,on_tick,fun48,fun54,fun55,fun63,fun65,fun66,fun67,fun68,fun69,fun71,fun72,fun74,fun75,fun76;if($__R.mode){_worldIndex={box:undefined};getNewWorldIndex={box:undefined};Jsworld={box:undefined};currentFocusedNode={box:undefined};doNothing={box:undefined};forEachK={box:undefined};InitialWorld={box:undefined};world={box:undefined};worldListenersStack={box:undefined};eventDetachersStack={box:undefined};worldIndexStack={box:undefined};runningBigBangs={box:undefined};worldIndex={box:undefined};worldListeners={box:undefined};eventDetachers={box:undefined};changingWorld={box:undefined};clear_running_state={box:undefined};resume_running_state={box:undefined};add_world_listener={box:undefined};remove_world_listener={box:undefined};DELAY_BEFORE_RETRY={box:undefined};change_world={box:undefined};map={box:undefined};concat_map={box:undefined};member={box:undefined};node_to_tree={box:undefined};nodes={box:undefined};relations={box:undefined};preorder={box:undefined};nodeEq={box:undefined};isMemq={box:undefined};refresh_node_values={box:undefined};update_dom={box:undefined};camelCase={box:undefined};set_css_attribs={box:undefined};isMatchingCssSelector={box:undefined};clearCss={box:undefined};update_css={box:undefined};sexp2tree={box:undefined};sexp2css={box:undefined};maintainingSelection={box:undefined};do_redraw={box:undefined};FocusedSelection={box:undefined};hasCurrentFocusedSelection={box:undefined};getCurrentFocusedSelection={box:undefined};StopWhenHandler={box:undefined};BigBangRecord={box:undefined};copy_attribs={box:undefined};preventDefault={box:undefined};stopPropagation={box:undefined};attachEvent={box:undefined};detachEvent={box:undefined};on_key={box:undefined};on_mouse={box:undefined};checkDomSexp={box:undefined};on_draw={box:undefined};stop_when={box:undefined};on_world_change={box:undefined};add_ev={box:undefined};add_ev_after={box:undefined};addFocusTracking={box:undefined};sexp2attrib={box:undefined};sexp2css_node={box:undefined};isTextNode={box:undefined};isElementNode={box:undefined};JsworldDomError={box:undefined};throwDomError={box:undefined};p={box:undefined};div={box:undefined};button={box:undefined};stopClickPropagation={box:undefined};text_input={box:undefined};checkbox_input={box:undefined};input={box:undefined};text={box:undefined};option={box:undefined};select={box:undefined};textarea={box:undefined};h1={box:undefined};canvas={box:undefined};img={box:undefined};raw_node={box:undefined};InitialWorld.box=function fun89(){};clear_running_state.box=function fun90(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app7,app6,fun3,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app7,app6,fun3,newTarget]}var restoreNextFrame=()=>{return fun90.call(this)};var app6,fun3,app7;try{if($__R.mode){app6=$S.suspend()}else if(target===0)app6=$__R.stack[$__R.stack.length-1].f()}catch(exn0){if(exn0 instanceof $__T.Capture){exn0.stack.push({kind:"rest",f:restoreNextFrame,index:0,this:this});captureLocals(exn0.stack[exn0.stack.length-1])}else{$__R.pushTrace(": in clear_running_state")}throw exn0}if($__R.mode){worldIndexStack.box=[];worldIndex.box=null;world.box=new InitialWorld.box;worldListenersStack.box=[];worldListeners.box=null;fun3=function funExpr7(eventDetachers){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app9,fun4,app8,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app9,fun4,app8,newTarget]}var restoreNextFrame=()=>{return funExpr7.call(this,eventDetachers)};var app8,fun4,app9;try{if($__R.mode){app8=$S.suspend()}else if(target===2)app8=$__R.stack[$__R.stack.length-1].f()}catch(exn1){if(exn1 instanceof $__T.Capture){exn1.stack.push({kind:"rest",f:restoreNextFrame,index:2,this:this});captureLocals(exn1.stack[exn1.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn1}if($__R.mode)fun4=function funExpr8(eventDetacher){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app11,app10,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app11,app10,newTarget]}var restoreNextFrame=()=>{return funExpr8.call(this,eventDetacher)};var app10,app11;try{if($__R.mode){app10=$S.suspend()}else if(target===3)app10=$__R.stack[$__R.stack.length-1].f()}catch(exn2){if(exn2 instanceof $__T.Capture){exn2.stack.push({kind:"rest",f:restoreNextFrame,index:3,this:this});captureLocals(exn2.stack[exn2.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn2}try{if($__R.mode){app11=eventDetacher()}else if(target===4)app11=$__R.stack[$__R.stack.length-1].f()}catch(exn3){if(exn3 instanceof $__T.Capture){exn3.stack.push({kind:"rest",f:restoreNextFrame,index:4,this:this});captureLocals(exn3.stack[exn3.stack.length-1])}else{$__R.pushTrace("Line 86: in (anonymous function)")}throw exn3}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app9=eventDetachers.forEach(fun4)}else if(target===5)app9=$__R.stack[$__R.stack.length-1].f()}catch(exn4){if(exn4 instanceof $__T.Capture){exn4.stack.push({kind:"rest",f:restoreNextFrame,index:5,this:this});captureLocals(exn4.stack[exn4.stack.length-1])}else{$__R.pushTrace("Line 85: in (anonymous function)")}throw exn4}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app7=eventDetachersStack.box.forEach(fun3)}else if(target===6)app7=$__R.stack[$__R.stack.length-1].f()}catch(exn5){if(exn5 instanceof $__T.Capture){exn5.stack.push({kind:"rest",f:restoreNextFrame,index:6,this:this});captureLocals(exn5.stack[exn5.stack.length-1])}else{$__R.pushTrace("Line 84: in clear_running_state")}throw exn5}if($__R.mode){eventDetachersStack.box=[];eventDetachers.box=null;changingWorld.box=[]}$__R.remainingStack++;if(newTarget)return this};resume_running_state.box=function fun91(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app12,app13,app14,app15,app16,app17,app18,arg0,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app12,app13,app14,app15,app16,app17,app18,arg0,newTarget]}var restoreNextFrame=()=>{return fun91.call(this)};var app12,app13,app14,arg0,app15,app16,app17,app18;try{if($__R.mode){app12=$S.suspend()}else if(target===7)app12=$__R.stack[$__R.stack.length-1].f()}catch(exn6){if(exn6 instanceof $__T.Capture){exn6.stack.push({kind:"rest",f:restoreNextFrame,index:7,this:this});captureLocals(exn6.stack[exn6.stack.length-1])}else{$__R.pushTrace(": in resume_running_state")}throw exn6}try{if($__R.mode){app13=worldIndexStack.box.pop()}else if(target===8)app13=$__R.stack[$__R.stack.length-1].f()}catch(exn7){if(exn7 instanceof $__T.Capture){exn7.stack.push({kind:"rest",f:restoreNextFrame,index:8,this:this});captureLocals(exn7.stack[exn7.stack.length-1])}else{$__R.pushTrace("Line 95: in resume_running_state")}throw exn7}if($__R.mode&&worldIndexStack.box.length>0){if($__R.mode)worldIndex.box=worldIndexStack.box[worldIndexStack.box.length-1]}else if($__R.mode){if($__R.mode)worldIndex.box=null}if($__R.mode&&runningBigBangs.box.length>0){if($__R.mode)world.box=runningBigBangs.box[runningBigBangs.box.length-1].world}else if($__R.mode||!$__R.mode&&target===9){if($__R.mode)world.box=new InitialWorld.box}try{if($__R.mode){app14=worldListenersStack.box.pop()}else if(target===10)app14=$__R.stack[$__R.stack.length-1].f()}catch(exn8){if(exn8 instanceof $__T.Capture){exn8.stack.push({kind:"rest",f:restoreNextFrame,index:10,this:this});captureLocals(exn8.stack[exn8.stack.length-1])}else{$__R.pushTrace("Line 106: in resume_running_state")}throw exn8}if($__R.mode&&worldListenersStack.box.length>0){if($__R.mode)worldListeners.box=worldListenersStack.box[worldListenersStack.box.length-1]}else if($__R.mode){if($__R.mode)worldListeners.box=null}if($__R.mode)arg0=function funExpr9(eventDetacher){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app20,app19,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app20,app19,newTarget]}var restoreNextFrame=()=>{return funExpr9.call(this,eventDetacher)};var app19,app20;try{if($__R.mode){app19=$S.suspend()}else if(target===11)app19=$__R.stack[$__R.stack.length-1].f()}catch(exn9){if(exn9 instanceof $__T.Capture){exn9.stack.push({kind:"rest",f:restoreNextFrame,index:11,this:this});captureLocals(exn9.stack[exn9.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn9}try{if($__R.mode){app20=eventDetacher()}else if(target===12)app20=$__R.stack[$__R.stack.length-1].f()}catch(exn10){if(exn10 instanceof $__T.Capture){exn10.stack.push({kind:"rest",f:restoreNextFrame,index:12,this:this});captureLocals(exn10.stack[exn10.stack.length-1])}else{$__R.pushTrace("Line 114: in (anonymous function)")}throw exn10}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app15=eventDetachersStack.box.pop()}else if(target===13)app15=$__R.stack[$__R.stack.length-1].f()}catch(exn11){if(exn11 instanceof $__T.Capture){exn11.stack.push({kind:"rest",f:restoreNextFrame,index:13,this:this});captureLocals(exn11.stack[exn11.stack.length-1])}else{$__R.pushTrace("Line 113: in resume_running_state")}throw exn11}try{if($__R.mode){app16=app15.forEach(arg0)}else if(target===14)app16=$__R.stack[$__R.stack.length-1].f()}catch(exn12){if(exn12 instanceof $__T.Capture){exn12.stack.push({kind:"rest",f:restoreNextFrame,index:14,this:this});captureLocals(exn12.stack[exn12.stack.length-1])}else{$__R.pushTrace("Line 113: in resume_running_state")}throw exn12}if($__R.mode&&eventDetachersStack.box.length>0){if($__R.mode)eventDetachers.box=eventDetachersStack.box[eventDetachersStack.box.length-1]}else if($__R.mode){if($__R.mode)eventDetachers.box=null}try{if($__R.mode){app17=changingWorld.box.pop()}else if(target===15)app17=$__R.stack[$__R.stack.length-1].f()}catch(exn13){if(exn13 instanceof $__T.Capture){exn13.stack.push({kind:"rest",f:restoreNextFrame,index:15,this:this});captureLocals(exn13.stack[exn13.stack.length-1])}else{$__R.pushTrace("Line 121: in resume_running_state")}throw exn13}if($__R.mode&&runningBigBangs.box.length>0||!$__R.mode&&target===16){try{if($__R.mode){app18=runningBigBangs.box[runningBigBangs.box.length-1].restart()}else if(target===16)app18=$__R.stack[$__R.stack.length-1].f()}catch(exn14){if(exn14 instanceof $__T.Capture){exn14.stack.push({kind:"rest",f:restoreNextFrame,index:16,this:this});captureLocals(exn14.stack[exn14.stack.length-1])}else{$__R.pushTrace("Line 124: in resume_running_state")}throw exn14}}$__R.remainingStack++;if(newTarget)return this};add_world_listener.box=function fun92(listener){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app22,app21,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app22,app21,newTarget]}var restoreNextFrame=()=>{return fun92.call(this,listener)};var app21,app22;try{if($__R.mode){app21=$S.suspend()}else if(target===17)app21=$__R.stack[$__R.stack.length-1].f()}catch(exn15){if(exn15 instanceof $__T.Capture){exn15.stack.push({kind:"rest",f:restoreNextFrame,index:17,this:this});captureLocals(exn15.stack[exn15.stack.length-1])}else{$__R.pushTrace(": in add_world_listener")}throw exn15}try{if($__R.mode){app22=worldListeners.box.push(listener)}else if(target===18)app22=$__R.stack[$__R.stack.length-1].f()}catch(exn16){if(exn16 instanceof $__T.Capture){exn16.stack.push({kind:"rest",f:restoreNextFrame,index:18,this:this});captureLocals(exn16.stack[exn16.stack.length-1])}else{$__R.pushTrace("Line 162: in add_world_listener")}throw exn16}$__R.remainingStack++;if(newTarget)return this};remove_world_listener.box=function fun93(listener){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app25,app24,app23,i,index,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app25,app24,app23,i,index,newTarget]}var restoreNextFrame=()=>{return fun93.call(this,listener)};var app23,i,index,app24,app25;try{if($__R.mode){app23=$S.suspend()}else if(target===19)app23=$__R.stack[$__R.stack.length-1].f()}catch(exn17){if(exn17 instanceof $__T.Capture){exn17.stack.push({kind:"rest",f:restoreNextFrame,index:19,this:this});captureLocals(exn17.stack[exn17.stack.length-1])}else{$__R.pushTrace(": in remove_world_listener")}throw exn17}if($__R.mode){index=-1;i=0}if($__R.mode||!$__R.mode&&target===20)loop_break1:while($__R.mode&&i<worldListeners.box.length||!$__R.mode&&target===20){if($__R.mode||!$__R.mode&&target===20)loop_continue1:{try{if($__R.mode){app24=$S.suspend()}else if(target===20)app24=$__R.stack[$__R.stack.length-1].f()}catch(exn18){if(exn18 instanceof $__T.Capture){exn18.stack.push({kind:"rest",f:restoreNextFrame,index:20,this:this});captureLocals(exn18.stack[exn18.stack.length-1])}else{$__R.pushTrace(": in remove_world_listener")}throw exn18}if($__R.mode&&worldListeners.box[i]===listener){if($__R.mode)index=i;break loop_break1}}if($__R.mode)i++}if($__R.mode&&index!==-1||!$__R.mode&&target===21){try{if($__R.mode){app25=worldListeners.box.splice(index,1)}else if(target===21)app25=$__R.stack[$__R.stack.length-1].f()}catch(exn19){if(exn19 instanceof $__T.Capture){exn19.stack.push({kind:"rest",f:restoreNextFrame,index:21,this:this});captureLocals(exn19.stack[exn19.stack.length-1])}else{$__R.pushTrace("Line 175: in remove_world_listener")}throw exn19}}$__R.remainingStack++;if(newTarget)return this};member.box=function fun94(a,x){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app48,i,app47,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app48,i,app47,newTarget]}var restoreNextFrame=()=>{return fun94.call(this,a,x)};var app47,i,app48;try{if($__R.mode){app47=$S.suspend()}else if(target===22)app47=$__R.stack[$__R.stack.length-1].f()}catch(exn20){if(exn20 instanceof $__T.Capture){exn20.stack.push({kind:"rest",f:restoreNextFrame,index:22,this:this});captureLocals(exn20.stack[exn20.stack.length-1])}else{$__R.pushTrace(": in member")}throw exn20}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&target===23)loop_break4:while($__R.mode&&i<a.length||!$__R.mode&&target===23){if($__R.mode||!$__R.mode&&target===23)loop_continue4:{try{if($__R.mode){app48=$S.suspend()}else if(target===23)app48=$__R.stack[$__R.stack.length-1].f()}catch(exn21){if(exn21 instanceof $__T.Capture){exn21.stack.push({kind:"rest",f:restoreNextFrame,index:23,this:this});captureLocals(exn21.stack[exn21.stack.length-1])}else{$__R.pushTrace(": in member")}throw exn21}if($__R.mode&&a[i]===x){{let retval0=true;$__R.remainingStack++;return newTarget&&!(retval0 instanceof Object)?this:retval0}}}if($__R.mode)i++}{let retval1=false;$__R.remainingStack++;return newTarget&&!(retval1 instanceof Object)?this:retval1}$__R.remainingStack++;if(newTarget)return this};node_to_tree.box=function fun95(domNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app51,arg2,app49,result,c,app50,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app51,arg2,app49,result,c,app50,newTarget]}var restoreNextFrame=()=>{return fun95.call(this,domNode)};var app49,result,c,app50,arg2,app51;try{if($__R.mode){app49=$S.suspend()}else if(target===24)app49=$__R.stack[$__R.stack.length-1].f()}catch(exn22){if(exn22 instanceof $__T.Capture){exn22.stack.push({kind:"rest",f:restoreNextFrame,index:24,this:this});captureLocals(exn22.stack[exn22.stack.length-1])}else{$__R.pushTrace(": in node_to_tree")}throw exn22}if($__R.mode){result=[domNode];c=domNode.firstChild}if($__R.mode&&c===$S.g.undefined){{let retval2=result;$__R.remainingStack++;return newTarget&&!(retval2 instanceof Object)?this:retval2}}else if($__R.mode||!$__R.mode&&(target===27||target===26||target===25)){if($__R.mode)c=domNode.firstChild;if($__R.mode||!$__R.mode&&(target===27||target===26||target===25))loop_break5:while($__R.mode&&c!==null||!$__R.mode&&(target===27||target===26||target===25)){if($__R.mode||!$__R.mode&&(target===27||target===26||target===25))loop_continue5:{try{if($__R.mode){app50=$S.suspend()}else if(target===25)app50=$__R.stack[$__R.stack.length-1].f()}catch(exn23){if(exn23 instanceof $__T.Capture){exn23.stack.push({kind:"rest",f:restoreNextFrame,index:25,this:this});captureLocals(exn23.stack[exn23.stack.length-1])}else{$__R.pushTrace(": in node_to_tree")}throw exn23}try{if($__R.mode){arg2=node_to_tree.box(c)}else if(target===26)arg2=$__R.stack[$__R.stack.length-1].f()}catch(exn24){if(exn24 instanceof $__T.Capture){exn24.stack.push({kind:"rest",f:restoreNextFrame,index:26,this:this});captureLocals(exn24.stack[exn24.stack.length-1])}else{$__R.pushTrace("Line 330: in node_to_tree")}throw exn24}try{if($__R.mode){app51=result.push(arg2)}else if(target===27)app51=$__R.stack[$__R.stack.length-1].f()}catch(exn25){if(exn25 instanceof $__T.Capture){exn25.stack.push({kind:"rest",f:restoreNextFrame,index:27,this:this});captureLocals(exn25.stack[exn25.stack.length-1])}else{$__R.pushTrace("Line 330: in node_to_tree")}throw exn25}}if($__R.mode)c=c.nextSibling}{let retval3=result;$__R.remainingStack++;return newTarget&&!(retval3 instanceof Object)?this:retval3}}$__R.remainingStack++;if(newTarget)return this};nodes.box=function fun96(tree){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app54,arg3,app52,ret,i,app53,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app54,arg3,app52,ret,i,app53,newTarget]}var restoreNextFrame=()=>{return fun96.call(this,tree)};var app52,ret,i,app53,arg3,app54;try{if($__R.mode){app52=$S.suspend()}else if(target===28)app52=$__R.stack[$__R.stack.length-1].f()}catch(exn26){if(exn26 instanceof $__T.Capture){exn26.stack.push({kind:"rest",f:restoreNextFrame,index:28,this:this});captureLocals(exn26.stack[exn26.stack.length-1])}else{$__R.pushTrace(": in nodes")}throw exn26}if($__R.mode&&tree.node.jsworldOpaque===true){{let retval4=[tree.node];$__R.remainingStack++;return newTarget&&!(retval4 instanceof Object)?this:retval4}}if($__R.mode){ret=[tree.node];i=0}if($__R.mode||!$__R.mode&&(target===31||target===30||target===29))loop_break6:while($__R.mode&&i<tree.children.length||!$__R.mode&&(target===31||target===30||target===29)){if($__R.mode||!$__R.mode&&(target===31||target===30||target===29))loop_continue6:{try{if($__R.mode){app53=$S.suspend()}else if(target===29)app53=$__R.stack[$__R.stack.length-1].f()}catch(exn27){if(exn27 instanceof $__T.Capture){exn27.stack.push({kind:"rest",f:restoreNextFrame,index:29,this:this});captureLocals(exn27.stack[exn27.stack.length-1])}else{$__R.pushTrace(": in nodes")}throw exn27}try{if($__R.mode){arg3=nodes.box(tree.children[i])}else if(target===30)arg3=$__R.stack[$__R.stack.length-1].f()}catch(exn28){if(exn28 instanceof $__T.Capture){exn28.stack.push({kind:"rest",f:restoreNextFrame,index:30,this:this});captureLocals(exn28.stack[exn28.stack.length-1])}else{$__R.pushTrace("Line 348: in nodes")}throw exn28}try{if($__R.mode){app54=ret.concat(arg3)}else if(target===31)app54=$__R.stack[$__R.stack.length-1].f()}catch(exn29){if(exn29 instanceof $__T.Capture){exn29.stack.push({kind:"rest",f:restoreNextFrame,index:31,this:this});captureLocals(exn29.stack[exn29.stack.length-1])}else{$__R.pushTrace("Line 348: in nodes")}throw exn29}if($__R.mode)ret=app54}if($__R.mode)i++}{let retval5=ret;$__R.remainingStack++;return newTarget&&!(retval5 instanceof Object)?this:retval5}$__R.remainingStack++;if(newTarget)return this};relations.box=function fun97(tree){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app55,ret,app56,app57,app58,app59,i,app60,app61,arg4,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app55,ret,app56,app57,app58,app59,i,app60,app61,arg4,newTarget]}var restoreNextFrame=()=>{return fun97.call(this,tree)};var app55,ret,i,app56,app57,app58,app59,app60,arg4,app61;try{if($__R.mode){app55=$S.suspend()}else if(target===32)app55=$__R.stack[$__R.stack.length-1].f()}catch(exn30){if(exn30 instanceof $__T.Capture){exn30.stack.push({kind:"rest",f:restoreNextFrame,index:32,this:this});captureLocals(exn30.stack[exn30.stack.length-1])}else{$__R.pushTrace(": in relations")}throw exn30}if($__R.mode){ret=[];i=0}if($__R.mode||!$__R.mode&&(target===34||target===33))loop_break8:while($__R.mode&&i<tree.children.length||!$__R.mode&&(target===34||target===33)){if($__R.mode||!$__R.mode&&(target===34||target===33))loop_continue7:{try{if($__R.mode){app56=$S.suspend()}else if(target===33)app56=$__R.stack[$__R.stack.length-1].f()}catch(exn31){if(exn31 instanceof $__T.Capture){exn31.stack.push({kind:"rest",f:restoreNextFrame,index:33,this:this});captureLocals(exn31.stack[exn31.stack.length-1])}else{$__R.pushTrace(": in relations")}throw exn31}try{if($__R.mode){app57=ret.push({relation:"parent",parent:tree.node,child:tree.children[i].node})}else if(target===34)app57=$__R.stack[$__R.stack.length-1].f()}catch(exn32){if(exn32 instanceof $__T.Capture){exn32.stack.push({kind:"rest",f:restoreNextFrame,index:34,this:this});captureLocals(exn32.stack[exn32.stack.length-1])}else{$__R.pushTrace("Line 359: in relations")}throw exn32}}if($__R.mode)i++}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===36||target===35))loop_break9:while($__R.mode&&i<tree.children.length-1||!$__R.mode&&(target===36||target===35)){if($__R.mode||!$__R.mode&&(target===36||target===35))loop_continue8:{try{if($__R.mode){app58=$S.suspend()}else if(target===35)app58=$__R.stack[$__R.stack.length-1].f()}catch(exn33){if(exn33 instanceof $__T.Capture){exn33.stack.push({kind:"rest",f:restoreNextFrame,index:35,this:this});captureLocals(exn33.stack[exn33.stack.length-1])}else{$__R.pushTrace(": in relations")}throw exn33}try{if($__R.mode){app59=ret.push({relation:"neighbor",left:tree.children[i].node,right:tree.children[i+1].node})}else if(target===36)app59=$__R.stack[$__R.stack.length-1].f()}catch(exn34){if(exn34 instanceof $__T.Capture){exn34.stack.push({kind:"rest",f:restoreNextFrame,index:36,this:this});captureLocals(exn34.stack[exn34.stack.length-1])}else{$__R.pushTrace("Line 365: in relations")}throw exn34}}if($__R.mode)i++}if($__R.mode&&!tree.node.jsworldOpaque||!$__R.mode&&(target===39||target===38||target===37)){if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===39||target===38||target===37))loop_break7:while($__R.mode&&i<tree.children.length||!$__R.mode&&(target===39||target===38||target===37)){if($__R.mode||!$__R.mode&&(target===39||target===38||target===37))loop_continue9:{try{if($__R.mode){app60=$S.suspend()}else if(target===37)app60=$__R.stack[$__R.stack.length-1].f()}catch(exn35){if(exn35 instanceof $__T.Capture){exn35.stack.push({kind:"rest",f:restoreNextFrame,index:37,this:this});captureLocals(exn35.stack[exn35.stack.length-1])}else{$__R.pushTrace(": in relations")}throw exn35}try{if($__R.mode){arg4=relations.box(tree.children[i])}else if(target===38)arg4=$__R.stack[$__R.stack.length-1].f()}catch(exn36){if(exn36 instanceof $__T.Capture){exn36.stack.push({kind:"rest",f:restoreNextFrame,index:38,this:this});captureLocals(exn36.stack[exn36.stack.length-1])}else{$__R.pushTrace("Line 372: in relations")}throw exn36}try{if($__R.mode){app61=ret.concat(arg4)}else if(target===39)app61=$__R.stack[$__R.stack.length-1].f()}catch(exn37){if(exn37 instanceof $__T.Capture){exn37.stack.push({kind:"rest",f:restoreNextFrame,index:39,this:this});captureLocals(exn37.stack[exn37.stack.length-1])}else{$__R.pushTrace("Line 372: in relations")}throw exn37}if($__R.mode)ret=app61}if($__R.mode)i++}}{let retval6=ret;$__R.remainingStack++;return newTarget&&!(retval6 instanceof Object)?this:retval6}$__R.remainingStack++;if(newTarget)return this};refresh_node_values.box=function fun98(nodes){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app72,app71,app70,i,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app72,app71,app70,i,newTarget]}var restoreNextFrame=()=>{return fun98.call(this,nodes)};var app70,i,app71,app72;try{if($__R.mode){app70=$S.suspend()}else if(target===40)app70=$__R.stack[$__R.stack.length-1].f()}catch(exn38){if(exn38 instanceof $__T.Capture){exn38.stack.push({kind:"rest",f:restoreNextFrame,index:40,this:this});captureLocals(exn38.stack[exn38.stack.length-1])}else{$__R.pushTrace(": in refresh_node_values")}throw exn38}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===42||target===41))loop_break12:while($__R.mode&&i<nodes.length||!$__R.mode&&(target===42||target===41)){if($__R.mode||!$__R.mode&&(target===42||target===41))loop_continue12:{try{if($__R.mode){app71=$S.suspend()}else if(target===41)app71=$__R.stack[$__R.stack.length-1].f()}catch(exn39){if(exn39 instanceof $__T.Capture){exn39.stack.push({kind:"rest",f:restoreNextFrame,index:41,this:this});captureLocals(exn39.stack[exn39.stack.length-1])}else{$__R.pushTrace(": in refresh_node_values")}throw exn39}if($__R.mode&&nodes[i].onWorldChange||!$__R.mode&&target===42){try{if($__R.mode){app72=nodes[i].onWorldChange(world.box)}else if(target===42)app72=$__R.stack[$__R.stack.length-1].f()}catch(exn40){if(exn40 instanceof $__T.Capture){exn40.stack.push({kind:"rest",f:restoreNextFrame,index:42,this:this});captureLocals(exn40.stack[exn40.stack.length-1])}else{$__R.pushTrace("Line 423: in refresh_node_values")}throw exn40}}}if($__R.mode)i++}$__R.remainingStack++;if(newTarget)return this};update_dom.box=function fun99(toplevelNode,nodes,relations){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app76,app77,app78,fun14,app79,left,i,parent,nodesPlus,unsorted,app80,app81,child,right,app73,app74,app75,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app76,app77,app78,fun14,app79,left,i,parent,nodesPlus,unsorted,app80,app81,child,right,app73,app74,app75,newTarget]}var restoreNextFrame=()=>{return fun99.call(this,toplevelNode,nodes,relations)};var nodesPlus,app73,i,parent,child,app74,app75,unsorted,app76,app77,left,right,app78,app79,fun14,app80,app81;if($__R.mode)nodesPlus={box:undefined};try{if($__R.mode){app73=$S.suspend()}else if(target===43)app73=$__R.stack[$__R.stack.length-1].f()}catch(exn41){if(exn41 instanceof $__T.Capture){exn41.stack.push({kind:"rest",f:restoreNextFrame,index:43,this:this});captureLocals(exn41.stack[exn41.stack.length-1])}else{$__R.pushTrace(": in update_dom")}throw exn41}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===45||target===44))loop_break15:while($__R.mode&&i<relations.length||!$__R.mode&&(target===45||target===44)){if($__R.mode||!$__R.mode&&(target===45||target===44))loop_continue13:{try{if($__R.mode){app74=$S.suspend()}else if(target===44)app74=$__R.stack[$__R.stack.length-1].f()}catch(exn42){if(exn42 instanceof $__T.Capture){exn42.stack.push({kind:"rest",f:restoreNextFrame,index:44,this:this});captureLocals(exn42.stack[exn42.stack.length-1])}else{$__R.pushTrace(": in update_dom")}throw exn42}if($__R.mode&&relations[i].relation==="parent"||!$__R.mode&&target===45){if($__R.mode){parent=relations[i].parent;child=relations[i].child}if($__R.mode&&child.parentNode!==parent||!$__R.mode&&target===45){try{if($__R.mode){app75=parent.appendChild(child)}else if(target===45)app75=$__R.stack[$__R.stack.length-1].f()}catch(exn43){if(exn43 instanceof $__T.Capture){exn43.stack.push({kind:"rest",f:restoreNextFrame,index:45,this:this});captureLocals(exn43.stack[exn43.stack.length-1])}else{$__R.pushTrace("Line 441: in update_dom")}throw exn43}}}}if($__R.mode)i++}if($__R.mode)unsorted=true;if($__R.mode||!$__R.mode&&(target===49||target===48||target===47||target===46))loop_break13:while($__R.mode&&unsorted||!$__R.mode&&(target===49||target===48||target===47||target===46)){if($__R.mode||!$__R.mode&&(target===49||target===48||target===47||target===46))loop_continue14:{try{if($__R.mode){app76=$S.suspend()}else if(target===46)app76=$__R.stack[$__R.stack.length-1].f()}catch(exn44){if(exn44 instanceof $__T.Capture){exn44.stack.push({kind:"rest",f:restoreNextFrame,index:46,this:this});captureLocals(exn44.stack[exn44.stack.length-1])}else{$__R.pushTrace(": in update_dom")}throw exn44}if($__R.mode){unsorted=false;i=0}if($__R.mode||!$__R.mode&&(target===49||target===48||target===47))loop_break14:while($__R.mode&&i<relations.length||!$__R.mode&&(target===49||target===48||target===47)){if($__R.mode||!$__R.mode&&(target===49||target===48||target===47))loop_continue15:{try{if($__R.mode){app77=$S.suspend()}else if(target===47)app77=$__R.stack[$__R.stack.length-1].f()}catch(exn45){if(exn45 instanceof $__T.Capture){exn45.stack.push({kind:"rest",f:restoreNextFrame,index:47,this:this});captureLocals(exn45.stack[exn45.stack.length-1])}else{$__R.pushTrace(": in update_dom")}throw exn45}if($__R.mode&&relations[i].relation==="neighbor"||!$__R.mode&&(target===49||target===48)){if($__R.mode){left=relations[i].left;right=relations[i].right}try{if($__R.mode){app78=nodeEq.box(left.nextSibling,right)}else if(target===48)app78=$__R.stack[$__R.stack.length-1].f()}catch(exn46){if(exn46 instanceof $__T.Capture){exn46.stack.push({kind:"rest",f:restoreNextFrame,index:48,this:this});captureLocals(exn46.stack[exn46.stack.length-1])}else{$__R.pushTrace("Line 455: in update_dom")}throw exn46}if($__R.mode&&!app78||!$__R.mode&&target===49){try{if($__R.mode){app79=left.parentNode.insertBefore(left,right)}else if(target===49)app79=$__R.stack[$__R.stack.length-1].f()}catch(exn47){if(exn47 instanceof $__T.Capture){exn47.stack.push({kind:"rest",f:restoreNextFrame,index:49,this:this});captureLocals(exn47.stack[exn47.stack.length-1])}else{$__R.pushTrace("Line 456: in update_dom")}throw exn47}if($__R.mode)unsorted=true}}}if($__R.mode)i++}}}try{if($__R.mode){nodesPlus.box=nodes.concat([toplevelNode])}else if(target===50)nodesPlus.box=$__R.stack[$__R.stack.length-1].f()}catch(exn48){if(exn48 instanceof $__T.Capture){exn48.stack.push({kind:"rest",f:restoreNextFrame,index:50,this:this});captureLocals(exn48.stack[exn48.stack.length-1])}else{$__R.pushTrace("Line 464: in update_dom")}throw exn48}if($__R.mode)fun14=function funExpr25(aNode,continueTraversalDown){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app87,app82,app83,app84,app85,app86,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app87,app82,app83,app84,app85,app86,newTarget]}var restoreNextFrame=()=>{return funExpr25.call(this,aNode,continueTraversalDown)};var app82,app83,app84,app85,app86,app87;try{if($__R.mode){app82=$S.suspend()}else if(target===51)app82=$__R.stack[$__R.stack.length-1].f()}catch(exn49){if(exn49 instanceof $__T.Capture){exn49.stack.push({kind:"rest",f:restoreNextFrame,index:51,this:this});captureLocals(exn49.stack[exn49.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn49}if($__R.mode&&aNode.jsworldOpaque||!$__R.mode&&(target===53||target===52)){try{if($__R.mode){app83=isMemq.box(aNode,nodesPlus.box)}else if(target===52)app83=$__R.stack[$__R.stack.length-1].f()}catch(exn50){if(exn50 instanceof $__T.Capture){exn50.stack.push({kind:"rest",f:restoreNextFrame,index:52,this:this});captureLocals(exn50.stack[exn50.stack.length-1])}else{$__R.pushTrace("Line 467: in (anonymous function)")}throw exn50}if($__R.mode&&!app83||!$__R.mode&&target===53){try{if($__R.mode){app84=aNode.parentNode.removeChild(aNode)}else if(target===53)app84=$__R.stack[$__R.stack.length-1].f()}catch(exn51){if(exn51 instanceof $__T.Capture){exn51.stack.push({kind:"rest",f:restoreNextFrame,index:53,this:this});captureLocals(exn51.stack[exn51.stack.length-1])}else{$__R.pushTrace("Line 468: in (anonymous function)")}throw exn51}}}else if($__R.mode||!$__R.mode&&(target===56||target===55||target===54)){try{if($__R.mode){app85=isMemq.box(aNode,nodesPlus.box)}else if(target===54)app85=$__R.stack[$__R.stack.length-1].f()}catch(exn52){if(exn52 instanceof $__T.Capture){exn52.stack.push({kind:"rest",f:restoreNextFrame,index:54,this:this});captureLocals(exn52.stack[exn52.stack.length-1])}else{$__R.pushTrace("Line 471: in (anonymous function)")}throw exn52}if($__R.mode&&!app85||!$__R.mode&&target===55){try{if($__R.mode){app86=aNode.parentNode.removeChild(aNode)}else if(target===55)app86=$__R.stack[$__R.stack.length-1].f()}catch(exn53){if(exn53 instanceof $__T.Capture){exn53.stack.push({kind:"rest",f:restoreNextFrame,index:55,this:this});captureLocals(exn53.stack[exn53.stack.length-1])}else{$__R.pushTrace("Line 472: in (anonymous function)")}throw exn53}}else if($__R.mode||!$__R.mode&&target===56){try{if($__R.mode){app87=continueTraversalDown()}else if(target===56)app87=$__R.stack[$__R.stack.length-1].f()}catch(exn54){if(exn54 instanceof $__T.Capture){exn54.stack.push({kind:"rest",f:restoreNextFrame,index:56,this:this});captureLocals(exn54.stack[exn54.stack.length-1])}else{$__R.pushTrace("Line 474: in (anonymous function)")}throw exn54}}}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app80=preorder.box(toplevelNode,fun14)}else if(target===57)app80=$__R.stack[$__R.stack.length-1].f()}catch(exn55){if(exn55 instanceof $__T.Capture){exn55.stack.push({kind:"rest",f:restoreNextFrame,index:57,this:this});captureLocals(exn55.stack[exn55.stack.length-1])}else{$__R.pushTrace("Line 465: in update_dom")}throw exn55}try{if($__R.mode){app81=refresh_node_values.box(nodes)}else if(target===58)app81=$__R.stack[$__R.stack.length-1].f()}catch(exn56){if(exn56 instanceof $__T.Capture){exn56.stack.push({kind:"rest",f:restoreNextFrame,index:58,this:this});captureLocals(exn56.stack[exn56.stack.length-1])}else{$__R.pushTrace("Line 479: in update_dom")}throw exn56}$__R.remainingStack++;if(newTarget)return this};camelCase.box=function fun100(name00){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun15,app88,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun15,app88,newTarget]}var restoreNextFrame=()=>{return fun100.call(this,name00)};var app88,fun15;try{if($__R.mode){app88=$S.suspend()}else if(target===59)app88=$__R.stack[$__R.stack.length-1].f()}catch(exn57){if(exn57 instanceof $__T.Capture){exn57.stack.push({kind:"rest",f:restoreNextFrame,index:59,this:this});captureLocals(exn57.stack[exn57.stack.length-1])}else{$__R.pushTrace(": in camelCase")}throw exn57}if($__R.mode){fun15=function funExpr26(m,l){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app89,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app89,newTarget]}var restoreNextFrame=()=>{return funExpr26.call(this,m,l)};var app89;try{if($__R.mode){app89=$S.suspend()}else if(target===60)app89=$__R.stack[$__R.stack.length-1].f()}catch(exn58){if(exn58 instanceof $__T.Capture){exn58.stack.push({kind:"rest",f:restoreNextFrame,index:60,this:this});captureLocals(exn58.stack[exn58.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn58}if($__R.mode)$__R.remainingStack++;if($__R.mode)return l.toUpperCase();else;$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return name00.replace(/\-(.)/g,fun15);else;$__R.remainingStack++;if(newTarget)return this};set_css_attribs.box=function fun101(node,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app93,app92,app91,app90,j,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app93,app92,app91,app90,j,newTarget]}var restoreNextFrame=()=>{return fun101.call(this,node,attribs)};var app90,j,app91,app92,app93;try{if($__R.mode){app90=$S.suspend()}else if(target===63)app90=$__R.stack[$__R.stack.length-1].f()}catch(exn59){if(exn59 instanceof $__T.Capture){exn59.stack.push({kind:"rest",f:restoreNextFrame,index:63,this:this});captureLocals(exn59.stack[exn59.stack.length-1])}else{$__R.pushTrace(": in set_css_attribs")}throw exn59}if($__R.mode)j=0;if($__R.mode||!$__R.mode&&(target===66||target===65||target===64))loop_break16:while($__R.mode&&j<attribs.length||!$__R.mode&&(target===66||target===65||target===64)){if($__R.mode||!$__R.mode&&(target===66||target===65||target===64))loop_continue16:{try{if($__R.mode){app91=$S.suspend()}else if(target===64)app91=$__R.stack[$__R.stack.length-1].f()}catch(exn60){if(exn60 instanceof $__T.Capture){exn60.stack.push({kind:"rest",f:restoreNextFrame,index:64,this:this});captureLocals(exn60.stack[exn60.stack.length-1])}else{$__R.pushTrace(": in set_css_attribs")}throw exn60}try{if($__R.mode){app92=camelCase.box(attribs[j].attrib)}else if(target===65)app92=$__R.stack[$__R.stack.length-1].f()}catch(exn61){if(exn61 instanceof $__T.Capture){exn61.stack.push({kind:"rest",f:restoreNextFrame,index:65,this:this});captureLocals(exn61.stack[exn61.stack.length-1])}else{$__R.pushTrace("Line 493: in set_css_attribs")}throw exn61}try{if($__R.mode){app93=attribs[j].values.join(" ")}else if(target===66)app93=$__R.stack[$__R.stack.length-1].f()}catch(exn62){if(exn62 instanceof $__T.Capture){exn62.stack.push({kind:"rest",f:restoreNextFrame,index:66,this:this});captureLocals(exn62.stack[exn62.stack.length-1])}else{$__R.pushTrace("Line 493: in set_css_attribs")}throw exn62}if($__R.mode)node.style[app92]=app93}if($__R.mode)j++}$__R.remainingStack++;if(newTarget)return this};isMatchingCssSelector.box=function fun102(node,css){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg6,x00,and0,app94,app95,app96,arg5,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg6,x00,and0,app94,app95,app96,arg5,newTarget]}var restoreNextFrame=()=>{return fun102.call(this,node,css)};var app94,app95,x00,and0,arg5,arg6,app96;try{if($__R.mode){app94=$S.suspend()}else if(target===67)app94=$__R.stack[$__R.stack.length-1].f()}catch(exn63){if(exn63 instanceof $__T.Capture){exn63.stack.push({kind:"rest",f:restoreNextFrame,index:67,this:this});captureLocals(exn63.stack[exn63.stack.length-1])}else{$__R.pushTrace(": in isMatchingCssSelector")}throw exn63}try{if($__R.mode){app95=css.id.match(/^\./)}else if(target===68)app95=$__R.stack[$__R.stack.length-1].f()}catch(exn64){if(exn64 instanceof $__T.Capture){exn64.stack.push({kind:"rest",f:restoreNextFrame,index:68,this:this});captureLocals(exn64.stack[exn64.stack.length-1])}else{$__R.pushTrace("Line 501: in isMatchingCssSelector")}throw exn64}if($__R.mode&&app95||!$__R.mode&&(target===71||target===70||target===69)){if($__R.mode)x00=node.className;if($__R.mode&&x00||!$__R.mode&&(target===71||target===70||target===69)){try{if($__R.mode){arg5=node.className.split(/\s+/)}else if(target===69)arg5=$__R.stack[$__R.stack.length-1].f()}catch(exn65){if(exn65 instanceof $__T.Capture){exn65.stack.push({kind:"rest",f:restoreNextFrame,index:69,this:this});captureLocals(exn65.stack[exn65.stack.length-1])}else{$__R.pushTrace("Line 503: in isMatchingCssSelector")}throw exn65}try{if($__R.mode){arg6=css.id.substring(1)}else if(target===70)arg6=$__R.stack[$__R.stack.length-1].f()}catch(exn66){if(exn66 instanceof $__T.Capture){exn66.stack.push({kind:"rest",f:restoreNextFrame,index:70,this:this});captureLocals(exn66.stack[exn66.stack.length-1])}else{$__R.pushTrace("Line 504: in isMatchingCssSelector")}throw exn66}try{if($__R.mode){app96=member.box(arg5,arg6)}else if(target===71)app96=$__R.stack[$__R.stack.length-1].f()}catch(exn67){if(exn67 instanceof $__T.Capture){exn67.stack.push({kind:"rest",f:restoreNextFrame,index:71,this:this});captureLocals(exn67.stack[exn67.stack.length-1])}else{$__R.pushTrace("Line 503: in isMatchingCssSelector")}throw exn67}if($__R.mode)and0=app96}else if($__R.mode){if($__R.mode)and0=x00}{let retval7=and0;$__R.remainingStack++;return newTarget&&!(retval7 instanceof Object)?this:retval7}}else if($__R.mode){{let retval8=node.id&&node.id===css.id;$__R.remainingStack++;return newTarget&&!(retval8 instanceof Object)?this:retval8}}$__R.remainingStack++;if(newTarget)return this};update_css.box=function fun103(nodes,css){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app98,app99,i,j,app100,app101,app102,app103,app104,app97,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app98,app99,i,j,app100,app101,app102,app103,app104,app97,newTarget]}var restoreNextFrame=()=>{return fun103.call(this,nodes,css)};var app97,i,j,app98,app99,app100,app101,app102,app103,app104;try{if($__R.mode){app97=$S.suspend()}else if(target===72)app97=$__R.stack[$__R.stack.length-1].f()}catch(exn68){if(exn68 instanceof $__T.Capture){exn68.stack.push({kind:"rest",f:restoreNextFrame,index:72,this:this});captureLocals(exn68.stack[exn68.stack.length-1])}else{$__R.pushTrace(": in update_css")}throw exn68}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===74||target===73))loop_break17:while($__R.mode&&i<nodes.length||!$__R.mode&&(target===74||target===73)){if($__R.mode||!$__R.mode&&(target===74||target===73))loop_continue17:{try{if($__R.mode){app98=$S.suspend()}else if(target===73)app98=$__R.stack[$__R.stack.length-1].f()}catch(exn69){if(exn69 instanceof $__T.Capture){exn69.stack.push({kind:"rest",f:restoreNextFrame,index:73,this:this});captureLocals(exn69.stack[exn69.stack.length-1])}else{$__R.pushTrace(": in update_css")}throw exn69}if($__R.mode&&!nodes[i].jsworldOpaque||!$__R.mode&&target===74){try{if($__R.mode){app99=clearCss.box(nodes[i])}else if(target===74)app99=$__R.stack[$__R.stack.length-1].f()}catch(exn70){if(exn70 instanceof $__T.Capture){exn70.stack.push({kind:"rest",f:restoreNextFrame,index:74,this:this});captureLocals(exn70.stack[exn70.stack.length-1])}else{$__R.pushTrace("Line 524: in update_css")}throw exn70}}}if($__R.mode)i++}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===79||target===78||target===77||target===76||target===75))loop_break18:while($__R.mode&&i<css.length||!$__R.mode&&(target===79||target===78||target===77||target===76||target===75)){if($__R.mode||!$__R.mode&&(target===79||target===78||target===77||target===76||target===75))loop_continue18:{try{if($__R.mode){app100=$S.suspend()}else if(target===75)app100=$__R.stack[$__R.stack.length-1].f()}catch(exn71){if(exn71 instanceof $__T.Capture){exn71.stack.push({kind:"rest",f:restoreNextFrame,index:75,this:this});captureLocals(exn71.stack[exn71.stack.length-1])}else{$__R.pushTrace(": in update_css")}throw exn71}if($__R.mode&&css[i].id||!$__R.mode&&(target===78||target===77||target===76)){if($__R.mode)j=0;if($__R.mode||!$__R.mode&&(target===78||target===77||target===76))loop_break19:while($__R.mode&&j<nodes.length||!$__R.mode&&(target===78||target===77||target===76)){if($__R.mode||!$__R.mode&&(target===78||target===77||target===76))loop_continue19:{try{if($__R.mode){app101=$S.suspend()}else if(target===76)app101=$__R.stack[$__R.stack.length-1].f()}catch(exn72){if(exn72 instanceof $__T.Capture){exn72.stack.push({kind:"rest",f:restoreNextFrame,index:76,this:this});captureLocals(exn72.stack[exn72.stack.length-1])}else{$__R.pushTrace(": in update_css")}throw exn72}try{if($__R.mode){app102=isMatchingCssSelector.box(nodes[j],css[i])}else if(target===77)app102=$__R.stack[$__R.stack.length-1].f()}catch(exn73){if(exn73 instanceof $__T.Capture){exn73.stack.push({kind:"rest",f:restoreNextFrame,index:77,this:this});captureLocals(exn73.stack[exn73.stack.length-1])}else{$__R.pushTrace("Line 532: in update_css")}throw exn73}if($__R.mode&&app102||!$__R.mode&&target===78){try{if($__R.mode){app103=set_css_attribs.box(nodes[j],css[i].attribs)}else if(target===78)app103=$__R.stack[$__R.stack.length-1].f()}catch(exn74){if(exn74 instanceof $__T.Capture){exn74.stack.push({kind:"rest",f:restoreNextFrame,index:78,this:this});captureLocals(exn74.stack[exn74.stack.length-1])}else{$__R.pushTrace("Line 533: in update_css")}throw exn74}}}if($__R.mode)j++}}else if($__R.mode||!$__R.mode&&target===79){try{if($__R.mode){app104=set_css_attribs.box(css[i].node,css[i].attribs)}else if(target===79)app104=$__R.stack[$__R.stack.length-1].f()}catch(exn75){if(exn75 instanceof $__T.Capture){exn75.stack.push({kind:"rest",f:restoreNextFrame,index:79,this:this});captureLocals(exn75.stack[exn75.stack.length-1])}else{$__R.pushTrace("Line 537: in update_css")}throw exn75}}}if($__R.mode)i++}$__R.remainingStack++;if(newTarget)return this};do_redraw.box=function fun104(world,oldWorld,toplevelNode,redraw_func,redraw_css_func,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun16,fun18,app113,app105,app106,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun16,fun18,app113,app105,app106,newTarget]}var restoreNextFrame=()=>{return fun104.call(this,world,oldWorld,toplevelNode,redraw_func,redraw_css_func,k)};var app105,fun16,app106,fun18,app113;if($__R.mode){k={box:k};redraw_css_func={box:redraw_css_func};redraw_func={box:redraw_func};toplevelNode={box:toplevelNode};world={box:world}}try{if($__R.mode){app105=$S.suspend()}else if(target===80)app105=$__R.stack[$__R.stack.length-1].f()}catch(exn76){if(exn76 instanceof $__T.Capture){exn76.stack.push({kind:"rest",f:restoreNextFrame,index:80,this:this});captureLocals(exn76.stack[exn76.stack.length-1])}else{$__R.pushTrace(": in do_redraw")}throw exn76}if($__R.mode&&oldWorld instanceof InitialWorld.box||!$__R.mode&&target===91){if($__R.mode)fun16=function funExpr28(drawn){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app108,fun17,t,ns,app107,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app108,fun17,t,ns,app107,newTarget]}var restoreNextFrame=()=>{return funExpr28.call(this,drawn)};var t,ns,app107,fun17,app108;if($__R.mode){t={box:undefined};ns={box:undefined}}try{if($__R.mode){app107=$S.suspend()}else if(target===81)app107=$__R.stack[$__R.stack.length-1].f()}catch(exn77){if(exn77 instanceof $__T.Capture){exn77.stack.push({kind:"rest",f:restoreNextFrame,index:81,this:this});captureLocals(exn77.stack[exn77.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn77}try{if($__R.mode){t.box=sexp2tree.box(drawn)}else if(target===82)t.box=$__R.stack[$__R.stack.length-1].f()}catch(exn78){if(exn78 instanceof $__T.Capture){exn78.stack.push({kind:"rest",f:restoreNextFrame,index:82,this:this});captureLocals(exn78.stack[exn78.stack.length-1])}else{$__R.pushTrace("Line 555: in (anonymous function)")}throw exn78}try{if($__R.mode){ns.box=nodes.box(t.box)}else if(target===83)ns.box=$__R.stack[$__R.stack.length-1].f()}catch(exn79){if(exn79 instanceof $__T.Capture){exn79.stack.push({kind:"rest",f:restoreNextFrame,index:83,this:this});captureLocals(exn79.stack[exn79.stack.length-1])}else{$__R.pushTrace("Line 556: in (anonymous function)")}throw exn79}if($__R.mode)fun17=function funExpr29(css){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg7,arg8,arg9,app110,app111,app112,arg10,arg11,app109,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg7,arg8,arg9,app110,app111,app112,arg10,arg11,app109,newTarget]}var restoreNextFrame=()=>{return funExpr29.call(this,css)};var app109,arg7,arg8,app110,arg9,arg10,arg11,app111,app112;try{if($__R.mode){app109=$S.suspend()}else if(target===84)app109=$__R.stack[$__R.stack.length-1].f()}catch(exn80){if(exn80 instanceof $__T.Capture){exn80.stack.push({kind:"rest",f:restoreNextFrame,index:84,this:this});captureLocals(exn80.stack[exn80.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn80}if($__R.mode)arg7=ns.box;try{if($__R.mode){arg8=sexp2css.box(css)}else if(target===85)arg8=$__R.stack[$__R.stack.length-1].f()}catch(exn81){if(exn81 instanceof $__T.Capture){exn81.stack.push({kind:"rest",f:restoreNextFrame,index:85,this:this});captureLocals(exn81.stack[exn81.stack.length-1])}else{$__R.pushTrace("Line 560: in (anonymous function)")}throw exn81}try{if($__R.mode){app110=update_css.box(arg7,arg8)}else if(target===86)app110=$__R.stack[$__R.stack.length-1].f()}catch(exn82){if(exn82 instanceof $__T.Capture){exn82.stack.push({kind:"rest",f:restoreNextFrame,index:86,this:this});captureLocals(exn82.stack[exn82.stack.length-1])}else{$__R.pushTrace("Line 560: in (anonymous function)")}throw exn82}if($__R.mode){arg9=toplevelNode.box;arg10=ns.box}try{if($__R.mode){arg11=relations.box(t.box)}else if(target===87)arg11=$__R.stack[$__R.stack.length-1].f()}catch(exn83){if(exn83 instanceof $__T.Capture){exn83.stack.push({kind:"rest",f:restoreNextFrame,index:87,this:this});captureLocals(exn83.stack[exn83.stack.length-1])}else{$__R.pushTrace("Line 561: in (anonymous function)")}throw exn83}try{if($__R.mode){app111=update_dom.box(arg9,arg10,arg11)}else if(target===88)app111=$__R.stack[$__R.stack.length-1].f()}catch(exn84){if(exn84 instanceof $__T.Capture){exn84.stack.push({kind:"rest",f:restoreNextFrame,index:88,this:this});captureLocals(exn84.stack[exn84.stack.length-1])}else{$__R.pushTrace("Line 561: in (anonymous function)")}throw exn84}try{if($__R.mode){app112=k.box()}else if(target===89)app112=$__R.stack[$__R.stack.length-1].f()}catch(exn85){if(exn85 instanceof $__T.Capture){exn85.stack.push({kind:"rest",f:restoreNextFrame,index:89,this:this});captureLocals(exn85.stack[exn85.stack.length-1])}else{$__R.pushTrace("Line 562: in (anonymous function)")}throw exn85}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app108=redraw_css_func.box(world.box,fun17)}else if(target===90)app108=$__R.stack[$__R.stack.length-1].f()}catch(exn86){if(exn86 instanceof $__T.Capture){exn86.stack.push({kind:"rest",f:restoreNextFrame,index:90,this:this});captureLocals(exn86.stack[exn86.stack.length-1])}else{$__R.pushTrace("Line 558: in (anonymous function)")}throw exn86}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app106=redraw_func.box(world.box,fun16)}else if(target===91)app106=$__R.stack[$__R.stack.length-1].f()}catch(exn87){if(exn87 instanceof $__T.Capture){exn87.stack.push({kind:"rest",f:restoreNextFrame,index:91,this:this});captureLocals(exn87.stack[exn87.stack.length-1])}else{$__R.pushTrace("Line 553: in do_redraw")}throw exn87}}else if($__R.mode||!$__R.mode&&target===104){if($__R.mode)fun18=function funExpr30(k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app115,fun19,app114,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app115,fun19,app114,newTarget]}var restoreNextFrame=()=>{return funExpr30.call(this,k2)};var app114,fun19,app115;if($__R.mode)k2={box:k2};try{if($__R.mode){app114=$S.suspend()}else if(target===92)app114=$__R.stack[$__R.stack.length-1].f()}catch(exn88){if(exn88 instanceof $__T.Capture){exn88.stack.push({kind:"rest",f:restoreNextFrame,index:92,this:this});captureLocals(exn88.stack[exn88.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn88}if($__R.mode)fun19=function funExpr31(newRedraw){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app117,fun20,app116,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app117,fun20,app116,newTarget]}var restoreNextFrame=()=>{return funExpr31.call(this,newRedraw)};var app116,fun20,app117;if($__R.mode)newRedraw={box:newRedraw};try{if($__R.mode){app116=$S.suspend()}else if(target===93)app116=$__R.stack[$__R.stack.length-1].f()}catch(exn89){if(exn89 instanceof $__T.Capture){exn89.stack.push({kind:"rest",f:restoreNextFrame,index:93,this:this});captureLocals(exn89.stack[exn89.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn89}if($__R.mode)fun20=function funExpr32(newRedrawCss){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[ns,app120,app121,t,app118,arg12,app119,arg13,arg14,arg15,arg16,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[ns,app120,app121,t,app118,arg12,app119,arg13,arg14,arg15,arg16,newTarget]}var restoreNextFrame=()=>{return funExpr32.call(this,newRedrawCss)};var app118,t,ns,arg12,arg13,app119,arg14,arg15,arg16,app120,app121;try{if($__R.mode){app118=$S.suspend()}else if(target===94)app118=$__R.stack[$__R.stack.length-1].f()}catch(exn90){if(exn90 instanceof $__T.Capture){exn90.stack.push({kind:"rest",f:restoreNextFrame,index:94,this:this});captureLocals(exn90.stack[exn90.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn90}try{if($__R.mode){t=sexp2tree.box(newRedraw.box)}else if(target===95)t=$__R.stack[$__R.stack.length-1].f()}catch(exn91){if(exn91 instanceof $__T.Capture){exn91.stack.push({kind:"rest",f:restoreNextFrame,index:95,this:this});captureLocals(exn91.stack[exn91.stack.length-1])}else{$__R.pushTrace("Line 575: in (anonymous function)")}throw exn91}try{if($__R.mode){ns=nodes.box(t)}else if(target===96)ns=$__R.stack[$__R.stack.length-1].f()}catch(exn92){if(exn92 instanceof $__T.Capture){exn92.stack.push({kind:"rest",f:restoreNextFrame,index:96,this:this});captureLocals(exn92.stack[exn92.stack.length-1])}else{$__R.pushTrace("Line 576: in (anonymous function)")}throw exn92}if($__R.mode)arg12=ns;try{if($__R.mode){arg13=sexp2css.box(newRedrawCss)}else if(target===97)arg13=$__R.stack[$__R.stack.length-1].f()}catch(exn93){if(exn93 instanceof $__T.Capture){exn93.stack.push({kind:"rest",f:restoreNextFrame,index:97,this:this});captureLocals(exn93.stack[exn93.stack.length-1])}else{$__R.pushTrace("Line 584: in (anonymous function)")}throw exn93}try{if($__R.mode){app119=update_css.box(arg12,arg13)}else if(target===98)app119=$__R.stack[$__R.stack.length-1].f()}catch(exn94){if(exn94 instanceof $__T.Capture){exn94.stack.push({kind:"rest",f:restoreNextFrame,index:98,this:this});captureLocals(exn94.stack[exn94.stack.length-1])}else{$__R.pushTrace("Line 584: in (anonymous function)")}throw exn94}if($__R.mode){arg14=toplevelNode.box;arg15=ns}try{if($__R.mode){arg16=relations.box(t)}else if(target===99)arg16=$__R.stack[$__R.stack.length-1].f()}catch(exn95){if(exn95 instanceof $__T.Capture){exn95.stack.push({kind:"rest",f:restoreNextFrame,index:99,this:this});captureLocals(exn95.stack[exn95.stack.length-1])}else{$__R.pushTrace("Line 585: in (anonymous function)")}throw exn95}try{if($__R.mode){app120=update_dom.box(arg14,arg15,arg16)}else if(target===100)app120=$__R.stack[$__R.stack.length-1].f()}catch(exn96){if(exn96 instanceof $__T.Capture){exn96.stack.push({kind:"rest",f:restoreNextFrame,index:100,this:this});captureLocals(exn96.stack[exn96.stack.length-1])}else{$__R.pushTrace("Line 585: in (anonymous function)")}throw exn96}try{if($__R.mode){app121=k2.box()}else if(target===101)app121=$__R.stack[$__R.stack.length-1].f()}catch(exn97){if(exn97 instanceof $__T.Capture){exn97.stack.push({kind:"rest",f:restoreNextFrame,index:101,this:this});captureLocals(exn97.stack[exn97.stack.length-1])}else{$__R.pushTrace("Line 587: in (anonymous function)")}throw exn97}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app117=redraw_css_func.box(world.box,fun20)}else if(target===102)app117=$__R.stack[$__R.stack.length-1].f()}catch(exn98){if(exn98 instanceof $__T.Capture){exn98.stack.push({kind:"rest",f:restoreNextFrame,index:102,this:this});captureLocals(exn98.stack[exn98.stack.length-1])}else{$__R.pushTrace("Line 572: in (anonymous function)")}throw exn98}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app115=redraw_func.box(world.box,fun19)}else if(target===103)app115=$__R.stack[$__R.stack.length-1].f()}catch(exn99){if(exn99 instanceof $__T.Capture){exn99.stack.push({kind:"rest",f:restoreNextFrame,index:103,this:this});captureLocals(exn99.stack[exn99.stack.length-1])}else{$__R.pushTrace("Line 568: in (anonymous function)")}throw exn99}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app113=maintainingSelection.box(fun18,k.box)}else if(target===104)app113=$__R.stack[$__R.stack.length-1].f()}catch(exn100){if(exn100 instanceof $__T.Capture){exn100.stack.push({kind:"rest",f:restoreNextFrame,index:104,this:this});captureLocals(exn100.stack[exn100.stack.length-1])}else{$__R.pushTrace("Line 566: in do_redraw")}throw exn100}}$__R.remainingStack++;if(newTarget)return this};hasCurrentFocusedSelection.box=function fun105(){return currentFocusedNode.box!==$S.g.undefined};getCurrentFocusedSelection.box=function fun106(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app123,app122,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app123,app122,newTarget]}var restoreNextFrame=()=>{return fun106.call(this)};var app122,app123;try{if($__R.mode){app122=$S.suspend()}else if(target===105)app122=$__R.stack[$__R.stack.length-1].f()}catch(exn101){if(exn101 instanceof $__T.Capture){exn101.stack.push({kind:"rest",f:restoreNextFrame,index:105,this:this});captureLocals(exn101.stack[exn101.stack.length-1])}else{$__R.pushTrace(": in getCurrentFocusedSelection")}throw exn101}try{if($__R.mode){app123=new FocusedSelection.box}else if(target===106)app123=$__R.stack[$__R.stack.length-1].f()}catch(exn102){if(exn102 instanceof $__T.Capture){exn102.stack.push({kind:"rest",f:restoreNextFrame,index:106,this:this});captureLocals(exn102.stack[exn102.stack.length-1])}else{$__R.pushTrace("Line 603: in getCurrentFocusedSelection")}throw exn102}{let retval9=app123;$__R.remainingStack++;return newTarget&&!(retval9 instanceof Object)?this:retval9}$__R.remainingStack++;if(newTarget)return this};BigBangRecord.box=function fun107(top,world,handlerCreators,handlers,attribs,success,fail){this.top=top;this.world=world;this.handlers=handlers;this.handlerCreators=handlerCreators;this.attribs=attribs;this.success=success;this.fail=fail};on_key.box=function fun109(press){var fun33;press={box:press};fun33=function funExpr54(thisWorldIndex){var wrappedPress,fun35,fun36;thisWorldIndex={box:thisWorldIndex};wrappedPress={box:undefined};wrappedPress.box=function funExpr55(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app139,fun34,app136,app137,app138,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app139,fun34,app136,app137,app138,newTarget]}var restoreNextFrame=()=>{return funExpr55.call(this,e)};var app136,app137,app138,fun34,app139;if($__R.mode)e={box:e};try{if($__R.mode){app136=$S.suspend()}else if(target===107)app136=$__R.stack[$__R.stack.length-1].f()}catch(exn103){if(exn103 instanceof $__T.Capture){exn103.stack.push({kind:"rest",f:restoreNextFrame,index:107,this:this});captureLocals(exn103.stack[exn103.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn103}if($__R.mode&&thisWorldIndex.box!=worldIndex.box){{let retval10;$__R.remainingStack++;return newTarget&&!(retval10 instanceof Object)?this:retval10}}if($__R.mode&&e.box.keyCode===27){{let retval11;$__R.remainingStack++;return newTarget&&!(retval11 instanceof Object)?this:retval11}}try{if($__R.mode){app137=stopPropagation.box(e.box)}else if(target===108)app137=$__R.stack[$__R.stack.length-1].f()}catch(exn104){if(exn104 instanceof $__T.Capture){exn104.stack.push({kind:"rest",f:restoreNextFrame,index:108,this:this});captureLocals(exn104.stack[exn104.stack.length-1])}else{$__R.pushTrace("Line 816: in (anonymous function)")}throw exn104}try{if($__R.mode){app138=preventDefault.box(e.box)}else if(target===109)app138=$__R.stack[$__R.stack.length-1].f()}catch(exn105){if(exn105 instanceof $__T.Capture){exn105.stack.push({kind:"rest",f:restoreNextFrame,index:109,this:this});captureLocals(exn105.stack[exn105.stack.length-1])}else{$__R.pushTrace("Line 817: in (anonymous function)")}throw exn105}if($__R.mode)fun34=function funExpr56(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app141,app140,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app141,app140,newTarget]}var restoreNextFrame=()=>{return funExpr56.call(this,w,k)};var app140,app141;try{if($__R.mode){app140=$S.suspend()}else if(target===110)app140=$__R.stack[$__R.stack.length-1].f()}catch(exn106){if(exn106 instanceof $__T.Capture){exn106.stack.push({kind:"rest",f:restoreNextFrame,index:110,this:this});captureLocals(exn106.stack[exn106.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn106}try{if($__R.mode){app141=press.box(w,e.box,k)}else if(target===111)app141=$__R.stack[$__R.stack.length-1].f()}catch(exn107){if(exn107 instanceof $__T.Capture){exn107.stack.push({kind:"rest",f:restoreNextFrame,index:111,this:this});captureLocals(exn107.stack[exn107.stack.length-1])}else{$__R.pushTrace("Line 818: in (anonymous function)")}throw exn107}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app139=change_world.box(fun34,doNothing.box)}else if(target===112)app139=$__R.stack[$__R.stack.length-1].f()}catch(exn108){if(exn108 instanceof $__T.Capture){exn108.stack.push({kind:"rest",f:restoreNextFrame,index:112,this:this});captureLocals(exn108.stack[exn108.stack.length-1])}else{$__R.pushTrace("Line 818: in (anonymous function)")}throw exn108}$__R.remainingStack++;if(newTarget)return this};fun35=function funExpr57(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app144,app143,app142,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app144,app143,app142,newTarget]}var restoreNextFrame=()=>{return funExpr57.call(this,top)};var app142,app143,app144;try{if($__R.mode){app142=$S.suspend()}else if(target===113)app142=$__R.stack[$__R.stack.length-1].f()}catch(exn109){if(exn109 instanceof $__T.Capture){exn109.stack.push({kind:"rest",f:restoreNextFrame,index:113,this:this});captureLocals(exn109.stack[exn109.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn109}if($__R.mode)top.tabindex=1;try{if($__R.mode){app143=top.focus()}else if(target===114)app143=$__R.stack[$__R.stack.length-1].f()}catch(exn110){if(exn110 instanceof $__T.Capture){exn110.stack.push({kind:"rest",f:restoreNextFrame,index:114,this:this});captureLocals(exn110.stack[exn110.stack.length-1])}else{$__R.pushTrace("Line 824: in (anonymous function)")}throw exn110}try{if($__R.mode){app144=attachEvent.box(top,"keydown",wrappedPress.box)}else if(target===115)app144=$__R.stack[$__R.stack.length-1].f()}catch(exn111){if(exn111 instanceof $__T.Capture){exn111.stack.push({kind:"rest",f:restoreNextFrame,index:115,this:this});captureLocals(exn111.stack[exn111.stack.length-1])}else{$__R.pushTrace("Line 825: in (anonymous function)")}throw exn111}$__R.remainingStack++;if(newTarget)return this};fun36=function funExpr58(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app146,app145,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app146,app145,newTarget]}var restoreNextFrame=()=>{return funExpr58.call(this,top)};var app145,app146;try{if($__R.mode){app145=$S.suspend()}else if(target===116)app145=$__R.stack[$__R.stack.length-1].f()}catch(exn112){if(exn112 instanceof $__T.Capture){exn112.stack.push({kind:"rest",f:restoreNextFrame,index:116,this:this});captureLocals(exn112.stack[exn112.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn112}try{if($__R.mode){app146=detachEvent.box(top,"keydown",wrappedPress.box)}else if(target===117)app146=$__R.stack[$__R.stack.length-1].f()}catch(exn113){if(exn113 instanceof $__T.Capture){exn113.stack.push({kind:"rest",f:restoreNextFrame,index:117,this:this});captureLocals(exn113.stack[exn113.stack.length-1])}else{$__R.pushTrace("Line 828: in (anonymous function)")}throw exn113}$__R.remainingStack++;if(newTarget)return this};return{onRegister:fun35,onUnregister:fun36}};return fun33};on_mouse.box=function fun110(mouse){var fun37;mouse={box:mouse};fun37=function funExpr59(thisWorldIndex){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[wrappedUp,wrappedDown,wrappedLeave,app147,wrappedEnter,wrappedMove,makeWrapped,fun41,fun42,isButtonDown,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[wrappedUp,wrappedDown,wrappedLeave,app147,wrappedEnter,wrappedMove,makeWrapped,fun41,fun42,isButtonDown,newTarget]}var restoreNextFrame=()=>{return funExpr59.call(this,thisWorldIndex)};var isButtonDown,wrappedDown,wrappedUp,wrappedMove,wrappedEnter,wrappedLeave,app147,makeWrapped,fun41,fun42;if($__R.mode){thisWorldIndex={box:thisWorldIndex};isButtonDown={box:undefined};wrappedDown={box:undefined};wrappedUp={box:undefined};wrappedMove={box:undefined};wrappedEnter={box:undefined};wrappedLeave={box:undefined}}try{if($__R.mode){app147=$S.suspend()}else if(target===118)app147=$__R.stack[$__R.stack.length-1].f()}catch(exn114){if(exn114 instanceof $__T.Capture){exn114.stack.push({kind:"rest",f:restoreNextFrame,index:118,this:this});captureLocals(exn114.stack[exn114.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn114}if($__R.mode){isButtonDown.box=false;makeWrapped=function funExpr60(type){var fun38;type={box:type};fun38=function funExpr61(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[currentElement,runOnce0,fun39,app150,app151,app152,app155,app148,app149,x,y,fun40,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[currentElement,runOnce0,fun39,app150,app151,app152,app155,app148,app149,x,y,fun40,newTarget]}var restoreNextFrame=()=>{return funExpr61.call(this,e)};var x,y,app148,app149,app150,currentElement,runOnce0,app151,fun39,app152,fun40,app155;if($__R.mode){x={box:undefined};y={box:undefined}}try{if($__R.mode){app148=$S.suspend()}else if(target===119)app148=$__R.stack[$__R.stack.length-1].f()}catch(exn115){if(exn115 instanceof $__T.Capture){exn115.stack.push({kind:"rest",f:restoreNextFrame,index:119,this:this});captureLocals(exn115.stack[exn115.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn115}if($__R.mode&&thisWorldIndex.box!=worldIndex.box){{let retval12;$__R.remainingStack++;return newTarget&&!(retval12 instanceof Object)?this:retval12}}try{if($__R.mode){app149=preventDefault.box(e)}else if(target===120)app149=$__R.stack[$__R.stack.length-1].f()}catch(exn116){if(exn116 instanceof $__T.Capture){exn116.stack.push({kind:"rest",f:restoreNextFrame,index:120,this:this});captureLocals(exn116.stack[exn116.stack.length-1])}else{$__R.pushTrace("Line 846: in (anonymous function)")}throw exn116}try{if($__R.mode){app150=stopPropagation.box(e)}else if(target===121)app150=$__R.stack[$__R.stack.length-1].f()}catch(exn117){if(exn117 instanceof $__T.Capture){exn117.stack.push({kind:"rest",f:restoreNextFrame,index:121,this:this});captureLocals(exn117.stack[exn117.stack.length-1])}else{$__R.pushTrace("Line 847: in (anonymous function)")}throw exn117}if($__R.mode){x.box=e.pageX;y.box=e.pageY;currentElement=e.target;runOnce0=true}if($__R.mode||!$__R.mode&&target===122)loop_break23:while($__R.mode&&(runOnce0||currentElement)||!$__R.mode&&target===122){if($__R.mode||!$__R.mode&&target===122)loop_continue23:{if($__R.mode)runOnce0=false;try{if($__R.mode){app151=$S.suspend()}else if(target===122)app151=$__R.stack[$__R.stack.length-1].f()}catch(exn118){if(exn118 instanceof $__T.Capture){exn118.stack.push({kind:"rest",f:restoreNextFrame,index:122,this:this});captureLocals(exn118.stack[exn118.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn118}if($__R.mode){x.box-=currentElement.offsetLeft;y.box-=currentElement.offsetTop;currentElement=currentElement.offsetParent}}}if($__R.mode&&type.box==="button-down"){if($__R.mode)isButtonDown.box=true}else if($__R.mode){if($__R.mode&&type.box==="button-up"){if($__R.mode)isButtonDown.box=false}}if($__R.mode&&type.box==="move"&&isButtonDown.box||!$__R.mode&&target===125){if($__R.mode)fun39=function funExpr62(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app154,app153,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app154,app153,newTarget]}var restoreNextFrame=()=>{return funExpr62.call(this,w,k)};var app153,app154;try{if($__R.mode){app153=$S.suspend()}else if(target===123)app153=$__R.stack[$__R.stack.length-1].f()}catch(exn119){if(exn119 instanceof $__T.Capture){exn119.stack.push({kind:"rest",f:restoreNextFrame,index:123,this:this});captureLocals(exn119.stack[exn119.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn119}try{if($__R.mode){app154=mouse.box(w,x.box,y.box,"drag",k)}else if(target===124)app154=$__R.stack[$__R.stack.length-1].f()}catch(exn120){if(exn120 instanceof $__T.Capture){exn120.stack.push({kind:"rest",f:restoreNextFrame,index:124,this:this});captureLocals(exn120.stack[exn120.stack.length-1])}else{$__R.pushTrace("Line 863: in (anonymous function)")}throw exn120}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app152=change_world.box(fun39,doNothing.box)}else if(target===125)app152=$__R.stack[$__R.stack.length-1].f()}catch(exn121){if(exn121 instanceof $__T.Capture){exn121.stack.push({kind:"rest",f:restoreNextFrame,index:125,this:this});captureLocals(exn121.stack[exn121.stack.length-1])}else{$__R.pushTrace("Line 862: in (anonymous function)")}throw exn121}}else if($__R.mode||!$__R.mode&&target===128){if($__R.mode)fun40=function funExpr63(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app157,app156,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app157,app156,newTarget]}var restoreNextFrame=()=>{return funExpr63.call(this,w,k)};var app156,app157;try{if($__R.mode){app156=$S.suspend()}else if(target===126)app156=$__R.stack[$__R.stack.length-1].f()}catch(exn122){if(exn122 instanceof $__T.Capture){exn122.stack.push({kind:"rest",f:restoreNextFrame,index:126,this:this});captureLocals(exn122.stack[exn122.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn122}try{if($__R.mode){app157=mouse.box(w,x.box,y.box,type.box,k)}else if(target===127)app157=$__R.stack[$__R.stack.length-1].f()}catch(exn123){if(exn123 instanceof $__T.Capture){exn123.stack.push({kind:"rest",f:restoreNextFrame,index:127,this:this});captureLocals(exn123.stack[exn123.stack.length-1])}else{$__R.pushTrace("Line 867: in (anonymous function)")}throw exn123}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app155=change_world.box(fun40,doNothing.box)}else if(target===128)app155=$__R.stack[$__R.stack.length-1].f()}catch(exn124){if(exn124 instanceof $__T.Capture){exn124.stack.push({kind:"rest",f:restoreNextFrame,index:128,this:this});captureLocals(exn124.stack[exn124.stack.length-1])}else{$__R.pushTrace("Line 866: in (anonymous function)")}throw exn124}}$__R.remainingStack++;if(newTarget)return this};return fun38}}try{if($__R.mode){wrappedDown.box=makeWrapped("button-down")}else if(target===129)wrappedDown.box=$__R.stack[$__R.stack.length-1].f()}catch(exn125){if(exn125 instanceof $__T.Capture){exn125.stack.push({kind:"rest",f:restoreNextFrame,index:129,this:this});captureLocals(exn125.stack[exn125.stack.length-1])}else{$__R.pushTrace("Line 872: in (anonymous function)")}throw exn125}try{if($__R.mode){wrappedUp.box=makeWrapped("button-up")}else if(target===130)wrappedUp.box=$__R.stack[$__R.stack.length-1].f()}catch(exn126){if(exn126 instanceof $__T.Capture){exn126.stack.push({kind:"rest",f:restoreNextFrame,index:130,this:this});captureLocals(exn126.stack[exn126.stack.length-1])}else{$__R.pushTrace("Line 873: in (anonymous function)")}throw exn126}try{if($__R.mode){wrappedMove.box=makeWrapped("move")}else if(target===131)wrappedMove.box=$__R.stack[$__R.stack.length-1].f()}catch(exn127){if(exn127 instanceof $__T.Capture){exn127.stack.push({kind:"rest",f:restoreNextFrame,index:131,this:this});captureLocals(exn127.stack[exn127.stack.length-1])}else{$__R.pushTrace("Line 875: in (anonymous function)")}throw exn127}try{if($__R.mode){wrappedEnter.box=makeWrapped("enter")}else if(target===132)wrappedEnter.box=$__R.stack[$__R.stack.length-1].f()}catch(exn128){if(exn128 instanceof $__T.Capture){exn128.stack.push({kind:"rest",f:restoreNextFrame,index:132,this:this});captureLocals(exn128.stack[exn128.stack.length-1])}else{$__R.pushTrace("Line 876: in (anonymous function)")}throw exn128}try{if($__R.mode){wrappedLeave.box=makeWrapped("leave")}else if(target===133)wrappedLeave.box=$__R.stack[$__R.stack.length-1].f()}catch(exn129){if(exn129 instanceof $__T.Capture){exn129.stack.push({kind:"rest",f:restoreNextFrame,index:133,this:this});captureLocals(exn129.stack[exn129.stack.length-1])}else{$__R.pushTrace("Line 877: in (anonymous function)")}throw exn129}if($__R.mode){fun41=function funExpr64(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app163,app162,app158,app159,app160,app161,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app163,app162,app158,app159,app160,app161,newTarget]}var restoreNextFrame=()=>{return funExpr64.call(this,top)};var app158,app159,app160,app161,app162,app163;try{if($__R.mode){app158=$S.suspend()}else if(target===134)app158=$__R.stack[$__R.stack.length-1].f()}catch(exn130){if(exn130 instanceof $__T.Capture){exn130.stack.push({kind:"rest",f:restoreNextFrame,index:134,this:this});captureLocals(exn130.stack[exn130.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn130}try{if($__R.mode){app159=attachEvent.box(top,"mousedown",wrappedDown.box)}else if(target===135)app159=$__R.stack[$__R.stack.length-1].f()}catch(exn131){if(exn131 instanceof $__T.Capture){exn131.stack.push({kind:"rest",f:restoreNextFrame,index:135,this:this});captureLocals(exn131.stack[exn131.stack.length-1])}else{$__R.pushTrace("Line 880: in (anonymous function)")}throw exn131}try{if($__R.mode){app160=attachEvent.box(top,"mouseup",wrappedUp.box)}else if(target===136)app160=$__R.stack[$__R.stack.length-1].f()}catch(exn132){if(exn132 instanceof $__T.Capture){exn132.stack.push({kind:"rest",f:restoreNextFrame,index:136,this:this});captureLocals(exn132.stack[exn132.stack.length-1])}else{$__R.pushTrace("Line 881: in (anonymous function)")}throw exn132}try{if($__R.mode){app161=attachEvent.box(top,"mousemove",wrappedMove.box)}else if(target===137)app161=$__R.stack[$__R.stack.length-1].f()}catch(exn133){if(exn133 instanceof $__T.Capture){exn133.stack.push({kind:"rest",f:restoreNextFrame,index:137,this:this});captureLocals(exn133.stack[exn133.stack.length-1])}else{$__R.pushTrace("Line 882: in (anonymous function)")}throw exn133}try{if($__R.mode){app162=attachEvent.box(top,"mouseenter",wrappedEnter.box)}else if(target===138)app162=$__R.stack[$__R.stack.length-1].f()}catch(exn134){if(exn134 instanceof $__T.Capture){exn134.stack.push({kind:"rest",f:restoreNextFrame,index:138,this:this});captureLocals(exn134.stack[exn134.stack.length-1])}else{$__R.pushTrace("Line 883: in (anonymous function)")}throw exn134}try{if($__R.mode){app163=attachEvent.box(top,"mouseleave",wrappedLeave.box)}else if(target===139)app163=$__R.stack[$__R.stack.length-1].f()}catch(exn135){if(exn135 instanceof $__T.Capture){exn135.stack.push({kind:"rest",f:restoreNextFrame,index:139,this:this});captureLocals(exn135.stack[exn135.stack.length-1])}else{$__R.pushTrace("Line 884: in (anonymous function)")}throw exn135}$__R.remainingStack++;if(newTarget)return this};fun42=function funExpr65(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app169,app168,app164,app165,app166,app167,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app169,app168,app164,app165,app166,app167,newTarget]}var restoreNextFrame=()=>{return funExpr65.call(this,top)};var app164,app165,app166,app167,app168,app169;try{if($__R.mode){app164=$S.suspend()}else if(target===140)app164=$__R.stack[$__R.stack.length-1].f()}catch(exn136){if(exn136 instanceof $__T.Capture){exn136.stack.push({kind:"rest",f:restoreNextFrame,index:140,this:this});captureLocals(exn136.stack[exn136.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn136}try{if($__R.mode){app165=detachEvent.box(top,"mousedown",wrappedDown.box)}else if(target===141)app165=$__R.stack[$__R.stack.length-1].f()}catch(exn137){if(exn137 instanceof $__T.Capture){exn137.stack.push({kind:"rest",f:restoreNextFrame,index:141,this:this});captureLocals(exn137.stack[exn137.stack.length-1])}else{$__R.pushTrace("Line 887: in (anonymous function)")}throw exn137}try{if($__R.mode){app166=detachEvent.box(top,"mouseup",wrappedUp.box)}else if(target===142)app166=$__R.stack[$__R.stack.length-1].f()}catch(exn138){if(exn138 instanceof $__T.Capture){exn138.stack.push({kind:"rest",f:restoreNextFrame,index:142,this:this});captureLocals(exn138.stack[exn138.stack.length-1])}else{$__R.pushTrace("Line 888: in (anonymous function)")}throw exn138}try{if($__R.mode){app167=detachEvent.box(top,"mousemove",wrappedMove.box)}else if(target===143)app167=$__R.stack[$__R.stack.length-1].f()}catch(exn139){if(exn139 instanceof $__T.Capture){exn139.stack.push({kind:"rest",f:restoreNextFrame,index:143,this:this});captureLocals(exn139.stack[exn139.stack.length-1])}else{$__R.pushTrace("Line 889: in (anonymous function)")}throw exn139}try{if($__R.mode){app168=detachEvent.box(top,"mouseenter",wrappedEnter.box)}else if(target===144)app168=$__R.stack[$__R.stack.length-1].f()}catch(exn140){if(exn140 instanceof $__T.Capture){exn140.stack.push({kind:"rest",f:restoreNextFrame,index:144,this:this});captureLocals(exn140.stack[exn140.stack.length-1])}else{$__R.pushTrace("Line 890: in (anonymous function)")}throw exn140}try{if($__R.mode){app169=detachEvent.box(top,"mouseleave",wrappedLeave.box)}else if(target===145)app169=$__R.stack[$__R.stack.length-1].f()}catch(exn141){if(exn141 instanceof $__T.Capture){exn141.stack.push({kind:"rest",f:restoreNextFrame,index:145,this:this});captureLocals(exn141.stack[exn141.stack.length-1])}else{$__R.pushTrace("Line 891: in (anonymous function)")}throw exn141}$__R.remainingStack++;if(newTarget)return this}}{let retval13={onRegister:fun41,onUnregister:fun42};$__R.remainingStack++;return newTarget&&!(retval13 instanceof Object)?this:retval13}$__R.remainingStack++;if(newTarget)return this};return fun37};on_draw.box=function fun111(redraw,redraw_css){var wrappedRedraw,fun44;redraw_css={box:redraw_css};redraw={box:redraw};wrappedRedraw={box:undefined};wrappedRedraw.box=function funExpr66(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app171,fun43,app170,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app171,fun43,app170,newTarget]}var restoreNextFrame=()=>{return funExpr66.call(this,w,k)};var app170,fun43,app171;if($__R.mode)k={box:k};try{if($__R.mode){app170=$S.suspend()}else if(target===146)app170=$__R.stack[$__R.stack.length-1].f()}catch(exn142){if(exn142 instanceof $__T.Capture){exn142.stack.push({kind:"rest",f:restoreNextFrame,index:146,this:this});captureLocals(exn142.stack[exn142.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn142}if($__R.mode)fun43=function funExpr67(newDomTree){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app174,app173,app172,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app174,app173,app172,newTarget]}var restoreNextFrame=()=>{return funExpr67.call(this,newDomTree)};var app172,app173,app174;try{if($__R.mode){app172=$S.suspend()}else if(target===147)app172=$__R.stack[$__R.stack.length-1].f()}catch(exn143){if(exn143 instanceof $__T.Capture){exn143.stack.push({kind:"rest",f:restoreNextFrame,index:147,this:this});captureLocals(exn143.stack[exn143.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn143}try{if($__R.mode){app173=checkDomSexp.box(newDomTree,newDomTree)}else if(target===148)app173=$__R.stack[$__R.stack.length-1].f()}catch(exn144){if(exn144 instanceof $__T.Capture){exn144.stack.push({kind:"rest",f:restoreNextFrame,index:148,this:this});captureLocals(exn144.stack[exn144.stack.length-1])}else{$__R.pushTrace("Line 908: in (anonymous function)")}throw exn144}try{if($__R.mode){app174=k.box(newDomTree)}else if(target===149)app174=$__R.stack[$__R.stack.length-1].f()}catch(exn145){if(exn145 instanceof $__T.Capture){exn145.stack.push({kind:"rest",f:restoreNextFrame,index:149,this:this});captureLocals(exn145.stack[exn145.stack.length-1])}else{$__R.pushTrace("Line 909: in (anonymous function)")}throw exn145}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app171=redraw.box(w,fun43)}else if(target===150)app171=$__R.stack[$__R.stack.length-1].f()}catch(exn146){if(exn146 instanceof $__T.Capture){exn146.stack.push({kind:"rest",f:restoreNextFrame,index:150,this:this});captureLocals(exn146.stack[exn146.stack.length-1])}else{$__R.pushTrace("Line 907: in (anonymous function)")}throw exn146}$__R.remainingStack++;if(newTarget)return this};fun44=function funExpr68(thisWorldIndex){var drawer,fun45,fun46,fun47;thisWorldIndex={box:thisWorldIndex};drawer={box:undefined};fun45=function funExpr69(w,oldW,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app176,app175,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app176,app175,newTarget]}var restoreNextFrame=()=>{return funExpr69.call(this,w,oldW,k2)};var app175,app176;try{if($__R.mode){app175=$S.suspend()}else if(target===151)app175=$__R.stack[$__R.stack.length-1].f()}catch(exn147){if(exn147 instanceof $__T.Capture){exn147.stack.push({kind:"rest",f:restoreNextFrame,index:151,this:this});captureLocals(exn147.stack[exn147.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn147}if($__R.mode&&thisWorldIndex.box!=worldIndex.box){{let retval14;$__R.remainingStack++;return newTarget&&!(retval14 instanceof Object)?this:retval14}}try{if($__R.mode){app176=do_redraw.box(w,oldW,drawer.box._top,wrappedRedraw.box,redraw_css.box,k2)}else if(target===152)app176=$__R.stack[$__R.stack.length-1].f()}catch(exn148){if(exn148 instanceof $__T.Capture){exn148.stack.push({kind:"rest",f:restoreNextFrame,index:152,this:this});captureLocals(exn148.stack[exn148.stack.length-1])}else{$__R.pushTrace("Line 918: in (anonymous function)")}throw exn148}$__R.remainingStack++;if(newTarget)return this};fun46=function funExpr70(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app178,app177,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app178,app177,newTarget]}var restoreNextFrame=()=>{return funExpr70.call(this,top)};var app177,app178;try{if($__R.mode){app177=$S.suspend()}else if(target===153)app177=$__R.stack[$__R.stack.length-1].f()}catch(exn149){if(exn149 instanceof $__T.Capture){exn149.stack.push({kind:"rest",f:restoreNextFrame,index:153,this:this});captureLocals(exn149.stack[exn149.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn149}if($__R.mode)drawer.box._top=top;try{if($__R.mode){app178=add_world_listener.box(drawer.box._listener)}else if(target===154)app178=$__R.stack[$__R.stack.length-1].f()}catch(exn150){if(exn150 instanceof $__T.Capture){exn150.stack.push({kind:"rest",f:restoreNextFrame,index:154,this:this});captureLocals(exn150.stack[exn150.stack.length-1])}else{$__R.pushTrace("Line 922: in (anonymous function)")}throw exn150}$__R.remainingStack++;if(newTarget)return this};fun47=function funExpr71(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app180,app179,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app180,app179,newTarget]}var restoreNextFrame=()=>{return funExpr71.call(this,top)};var app179,app180;try{if($__R.mode){app179=$S.suspend()}else if(target===155)app179=$__R.stack[$__R.stack.length-1].f()}catch(exn151){if(exn151 instanceof $__T.Capture){exn151.stack.push({kind:"rest",f:restoreNextFrame,index:155,this:this});captureLocals(exn151.stack[exn151.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn151}try{if($__R.mode){app180=remove_world_listener.box(drawer.box._listener)}else if(target===156)app180=$__R.stack[$__R.stack.length-1].f()}catch(exn152){if(exn152 instanceof $__T.Capture){exn152.stack.push({kind:"rest",f:restoreNextFrame,index:156,this:this});captureLocals(exn152.stack[exn152.stack.length-1])}else{$__R.pushTrace("Line 926: in (anonymous function)")}throw exn152}$__R.remainingStack++;if(newTarget)return this};drawer.box={_top:null,_listener:fun45,onRegister:fun46,onUnregister:fun47};return drawer.box};return fun44};stop_when.box=function fun112(test,receiver){var fun49;receiver={box:receiver};test={box:test};fun49=function funExpr73(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app184,app181,fun50,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app184,app181,fun50,newTarget]}var restoreNextFrame=()=>{return funExpr73.call(this)};var app181,fun50,app184;try{if($__R.mode){app181=$S.suspend()}else if(target===157)app181=$__R.stack[$__R.stack.length-1].f()}catch(exn153){if(exn153 instanceof $__T.Capture){exn153.stack.push({kind:"rest",f:restoreNextFrame,index:157,this:this});captureLocals(exn153.stack[exn153.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn153}if($__R.mode&&receiver.box===$S.g.undefined){if($__R.mode){fun50=function funExpr74(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app183,app182,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app183,app182,newTarget]}var restoreNextFrame=()=>{return funExpr74.call(this,w,k)};var app182,app183;try{if($__R.mode){app182=$S.suspend()}else if(target===158)app182=$__R.stack[$__R.stack.length-1].f()}catch(exn154){if(exn154 instanceof $__T.Capture){exn154.stack.push({kind:"rest",f:restoreNextFrame,index:158,this:this});captureLocals(exn154.stack[exn154.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn154}try{if($__R.mode){app183=k(w)}else if(target===159)app183=$__R.stack[$__R.stack.length-1].f()}catch(exn155){if(exn155 instanceof $__T.Capture){exn155.stack.push({kind:"rest",f:restoreNextFrame,index:159,this:this});captureLocals(exn155.stack[exn155.stack.length-1])}else{$__R.pushTrace("Line 944: in (anonymous function)")}throw exn155}$__R.remainingStack++;if(newTarget)return this};receiver.box=fun50}}try{if($__R.mode){app184=new StopWhenHandler.box(test.box,receiver.box)}else if(target===160)app184=$__R.stack[$__R.stack.length-1].f()}catch(exn156){if(exn156 instanceof $__T.Capture){exn156.stack.push({kind:"rest",f:restoreNextFrame,index:160,this:this});captureLocals(exn156.stack[exn156.stack.length-1])}else{$__R.pushTrace("Line 946: in (anonymous function)")}throw exn156}{let retval15=app184;$__R.remainingStack++;return newTarget&&!(retval15 instanceof Object)?this:retval15}$__R.remainingStack++;if(newTarget)return this};return fun49};on_world_change.box=function fun113(f){var fun51;f={box:f};fun51=function funExpr75(thisWorldIndex){var listener,fun52,fun53;thisWorldIndex={box:thisWorldIndex};listener={box:undefined};listener.box=function funExpr76(world,oldW,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app186,app185,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app186,app185,newTarget]}var restoreNextFrame=()=>{return funExpr76.call(this,world,oldW,k)};var app185,app186;try{if($__R.mode){app185=$S.suspend()}else if(target===161)app185=$__R.stack[$__R.stack.length-1].f()}catch(exn157){if(exn157 instanceof $__T.Capture){exn157.stack.push({kind:"rest",f:restoreNextFrame,index:161,this:this});captureLocals(exn157.stack[exn157.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn157}if($__R.mode&&thisWorldIndex.box!=worldIndex.box){{let retval16;$__R.remainingStack++;return newTarget&&!(retval16 instanceof Object)?this:retval16}}try{if($__R.mode){app186=f.box(world,k)}else if(target===162)app186=$__R.stack[$__R.stack.length-1].f()}catch(exn158){if(exn158 instanceof $__T.Capture){exn158.stack.push({kind:"rest",f:restoreNextFrame,index:162,this:this});captureLocals(exn158.stack[exn158.stack.length-1])}else{$__R.pushTrace("Line 957: in (anonymous function)")}throw exn158}$__R.remainingStack++;if(newTarget)return this};fun52=function funExpr77(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app188,app187,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app188,app187,newTarget]}var restoreNextFrame=()=>{return funExpr77.call(this,top)};var app187,app188;try{if($__R.mode){app187=$S.suspend()}else if(target===163)app187=$__R.stack[$__R.stack.length-1].f()}catch(exn159){if(exn159 instanceof $__T.Capture){exn159.stack.push({kind:"rest",f:restoreNextFrame,index:163,this:this});captureLocals(exn159.stack[exn159.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn159}try{if($__R.mode){app188=add_world_listener.box(listener.box)}else if(target===164)app188=$__R.stack[$__R.stack.length-1].f()}catch(exn160){if(exn160 instanceof $__T.Capture){exn160.stack.push({kind:"rest",f:restoreNextFrame,index:164,this:this});captureLocals(exn160.stack[exn160.stack.length-1])}else{$__R.pushTrace("Line 961: in (anonymous function)")}throw exn160}$__R.remainingStack++;if(newTarget)return this};fun53=function funExpr78(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app190,app189,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app190,app189,newTarget]}var restoreNextFrame=()=>{return funExpr78.call(this,top)};var app189,app190;try{if($__R.mode){app189=$S.suspend()}else if(target===165)app189=$__R.stack[$__R.stack.length-1].f()}catch(exn161){if(exn161 instanceof $__T.Capture){exn161.stack.push({kind:"rest",f:restoreNextFrame,index:165,this:this});captureLocals(exn161.stack[exn161.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn161}try{if($__R.mode){app190=remove_world_listener.box(listener.box)}else if(target===166)app190=$__R.stack[$__R.stack.length-1].f()}catch(exn162){if(exn162 instanceof $__T.Capture){exn162.stack.push({kind:"rest",f:restoreNextFrame,index:166,this:this});captureLocals(exn162.stack[exn162.stack.length-1])}else{$__R.pushTrace("Line 963: in (anonymous function)")}throw exn162}$__R.remainingStack++;if(newTarget)return this};return{onRegister:fun52,onUnregister:fun53}};return fun51};add_ev.box=function fun114(node,event,f){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun57,app191,app196,app197,eventHandler,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun57,app191,app196,app197,eventHandler,newTarget]}var restoreNextFrame=()=>{return fun114.call(this,node,event,f)};var eventHandler,app191,app196,fun57,app197;if($__R.mode){f={box:f};event={box:event};node={box:node};eventHandler={box:undefined}}try{if($__R.mode){app191=$S.suspend()}else if(target===167)app191=$__R.stack[$__R.stack.length-1].f()}catch(exn163){if(exn163 instanceof $__T.Capture){exn163.stack.push({kind:"rest",f:restoreNextFrame,index:167,this:this});captureLocals(exn163.stack[exn163.stack.length-1])}else{$__R.pushTrace(": in add_ev")}throw exn163}if($__R.mode)eventHandler.box=function funExpr81(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app193,fun56,app192,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app193,fun56,app192,newTarget]}var restoreNextFrame=()=>{return funExpr81.call(this,e)};var app192,fun56,app193;if($__R.mode)e={box:e};try{if($__R.mode){app192=$S.suspend()}else if(target===168)app192=$__R.stack[$__R.stack.length-1].f()}catch(exn164){if(exn164 instanceof $__T.Capture){exn164.stack.push({kind:"rest",f:restoreNextFrame,index:168,this:this});captureLocals(exn164.stack[exn164.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn164}if($__R.mode)fun56=function funExpr82(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app195,app194,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app195,app194,newTarget]}var restoreNextFrame=()=>{return funExpr82.call(this,w,k)};var app194,app195;try{if($__R.mode){app194=$S.suspend()}else if(target===169)app194=$__R.stack[$__R.stack.length-1].f()}catch(exn165){if(exn165 instanceof $__T.Capture){exn165.stack.push({kind:"rest",f:restoreNextFrame,index:169,this:this});captureLocals(exn165.stack[exn165.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn165}try{if($__R.mode){app195=f.box(w,e.box,k)}else if(target===170)app195=$__R.stack[$__R.stack.length-1].f()}catch(exn166){if(exn166 instanceof $__T.Capture){exn166.stack.push({kind:"rest",f:restoreNextFrame,index:170,this:this});captureLocals(exn166.stack[exn166.stack.length-1])}else{$__R.pushTrace("Line 1001: in (anonymous function)")}throw exn166}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app193=change_world.box(fun56,doNothing.box)}else if(target===171)app193=$__R.stack[$__R.stack.length-1].f()}catch(exn167){if(exn167 instanceof $__T.Capture){exn167.stack.push({kind:"rest",f:restoreNextFrame,index:171,this:this});captureLocals(exn167.stack[exn167.stack.length-1])}else{$__R.pushTrace("Line 1001: in (anonymous function)")}throw exn167}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app196=attachEvent.box(node.box,event.box,eventHandler.box)}else if(target===172)app196=$__R.stack[$__R.stack.length-1].f()}catch(exn168){if(exn168 instanceof $__T.Capture){exn168.stack.push({kind:"rest",f:restoreNextFrame,index:172,this:this});captureLocals(exn168.stack[exn168.stack.length-1])}else{$__R.pushTrace("Line 1003: in add_ev")}throw exn168}if($__R.mode)fun57=function funExpr83(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app199,app198,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app199,app198,newTarget]}var restoreNextFrame=()=>{return funExpr83.call(this)};var app198,app199;try{if($__R.mode){app198=$S.suspend()}else if(target===173)app198=$__R.stack[$__R.stack.length-1].f()}catch(exn169){if(exn169 instanceof $__T.Capture){exn169.stack.push({kind:"rest",f:restoreNextFrame,index:173,this:this});captureLocals(exn169.stack[exn169.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn169}try{if($__R.mode){app199=detachEvent.box(node.box,event.box,eventHandler.box)}else if(target===174)app199=$__R.stack[$__R.stack.length-1].f()}catch(exn170){if(exn170 instanceof $__T.Capture){exn170.stack.push({kind:"rest",f:restoreNextFrame,index:174,this:this});captureLocals(exn170.stack[exn170.stack.length-1])}else{$__R.pushTrace("Line 1004: in (anonymous function)")}throw exn170}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app197=eventDetachers.box.push(fun57)}else if(target===175)app197=$__R.stack[$__R.stack.length-1].f()}catch(exn171){if(exn171 instanceof $__T.Capture){exn171.stack.push({kind:"rest",f:restoreNextFrame,index:175,this:this});captureLocals(exn171.stack[exn171.stack.length-1])}else{$__R.pushTrace("Line 1004: in add_ev")}throw exn171}$__R.remainingStack++;if(newTarget)return this};add_ev_after.box=function fun115(node,event,f){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[eventHandler,app200,app207,fun60,app208,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[eventHandler,app200,app207,fun60,app208,newTarget]}var restoreNextFrame=()=>{return fun115.call(this,node,event,f)};var eventHandler,app200,app207,fun60,app208;if($__R.mode){f={box:f};event={box:event};node={box:node};eventHandler={box:undefined}}try{if($__R.mode){app200=$S.suspend()}else if(target===176)app200=$__R.stack[$__R.stack.length-1].f()}catch(exn172){if(exn172 instanceof $__T.Capture){exn172.stack.push({kind:"rest",f:restoreNextFrame,index:176,this:this});captureLocals(exn172.stack[exn172.stack.length-1])}else{$__R.pushTrace(": in add_ev_after")}throw exn172}if($__R.mode)eventHandler.box=function funExpr84(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app202,fun58,app201,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app202,fun58,app201,newTarget]}var restoreNextFrame=()=>{return funExpr84.call(this,e)};var app201,fun58,app202;if($__R.mode)e={box:e};try{if($__R.mode){app201=$S.suspend()}else if(target===177)app201=$__R.stack[$__R.stack.length-1].f()}catch(exn173){if(exn173 instanceof $__T.Capture){exn173.stack.push({kind:"rest",f:restoreNextFrame,index:177,this:this});captureLocals(exn173.stack[exn173.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn173}if($__R.mode)fun58=function funExpr85(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app204,app203,fun59,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app204,app203,fun59,newTarget]}var restoreNextFrame=()=>{return funExpr85.call(this)};var app203,fun59,app204;try{if($__R.mode){app203=$S.suspend()}else if(target===178)app203=$__R.stack[$__R.stack.length-1].f()}catch(exn174){if(exn174 instanceof $__T.Capture){exn174.stack.push({kind:"rest",f:restoreNextFrame,index:178,this:this});captureLocals(exn174.stack[exn174.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn174}if($__R.mode)fun59=function funExpr86(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app206,app205,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app206,app205,newTarget]}var restoreNextFrame=()=>{return funExpr86.call(this,w,k)};var app205,app206;try{if($__R.mode){app205=$S.suspend()}else if(target===179)app205=$__R.stack[$__R.stack.length-1].f()}catch(exn175){if(exn175 instanceof $__T.Capture){exn175.stack.push({kind:"rest",f:restoreNextFrame,index:179,this:this});captureLocals(exn175.stack[exn175.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn175}try{if($__R.mode){app206=f.box(w,e.box,k)}else if(target===180)app206=$__R.stack[$__R.stack.length-1].f()}catch(exn176){if(exn176 instanceof $__T.Capture){exn176.stack.push({kind:"rest",f:restoreNextFrame,index:180,this:this});captureLocals(exn176.stack[exn176.stack.length-1])}else{$__R.pushTrace("Line 1012: in (anonymous function)")}throw exn176}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app204=change_world.box(fun59,doNothing.box)}else if(target===181)app204=$__R.stack[$__R.stack.length-1].f()}catch(exn177){if(exn177 instanceof $__T.Capture){exn177.stack.push({kind:"rest",f:restoreNextFrame,index:181,this:this});captureLocals(exn177.stack[exn177.stack.length-1])}else{$__R.pushTrace("Line 1012: in (anonymous function)")}throw exn177}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app202=$S.g.setTimeout.call(void 0,fun58,0)}else if(target===182)app202=$__R.stack[$__R.stack.length-1].f()}catch(exn178){if(exn178 instanceof $__T.Capture){exn178.stack.push({kind:"rest",f:restoreNextFrame,index:182,this:this});captureLocals(exn178.stack[exn178.stack.length-1])}else{$__R.pushTrace("Line 1012: in (anonymous function)")}throw exn178}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app207=attachEvent.box(node.box,event.box,eventHandler.box)}else if(target===183)app207=$__R.stack[$__R.stack.length-1].f()}catch(exn179){if(exn179 instanceof $__T.Capture){exn179.stack.push({kind:"rest",f:restoreNextFrame,index:183,this:this});captureLocals(exn179.stack[exn179.stack.length-1])}else{$__R.pushTrace("Line 1017: in add_ev_after")}throw exn179}if($__R.mode)fun60=function funExpr87(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app210,app209,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app210,app209,newTarget]}var restoreNextFrame=()=>{return funExpr87.call(this)};var app209,app210;try{if($__R.mode){app209=$S.suspend()}else if(target===184)app209=$__R.stack[$__R.stack.length-1].f()}catch(exn180){if(exn180 instanceof $__T.Capture){exn180.stack.push({kind:"rest",f:restoreNextFrame,index:184,this:this});captureLocals(exn180.stack[exn180.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn180}try{if($__R.mode){app210=detachEvent.box(node.box,event.box,eventHandler.box)}else if(target===185)app210=$__R.stack[$__R.stack.length-1].f()}catch(exn181){if(exn181 instanceof $__T.Capture){exn181.stack.push({kind:"rest",f:restoreNextFrame,index:185,this:this});captureLocals(exn181.stack[exn181.stack.length-1])}else{$__R.pushTrace("Line 1018: in (anonymous function)")}throw exn181}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app208=eventDetachers.box.push(fun60)}else if(target===186)app208=$__R.stack[$__R.stack.length-1].f()}catch(exn182){if(exn182 instanceof $__T.Capture){exn182.stack.push({kind:"rest",f:restoreNextFrame,index:186,this:this});captureLocals(exn182.stack[exn182.stack.length-1])}else{$__R.pushTrace("Line 1018: in add_ev_after")}throw exn182}$__R.remainingStack++;if(newTarget)return this};addFocusTracking.box=function fun116(node){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app213,fun62,app211,fun61,app212,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app213,fun62,app211,fun61,app212,newTarget]}var restoreNextFrame=()=>{return fun116.call(this,node)};var app211,fun61,app212,fun62,app213;if($__R.mode)node={box:node};try{if($__R.mode){app211=$S.suspend()}else if(target===187)app211=$__R.stack[$__R.stack.length-1].f()}catch(exn183){if(exn183 instanceof $__T.Capture){exn183.stack.push({kind:"rest",f:restoreNextFrame,index:187,this:this});captureLocals(exn183.stack[exn183.stack.length-1])}else{$__R.pushTrace(": in addFocusTracking")}throw exn183}if($__R.mode)fun61=function funExpr88(e){currentFocusedNode.box=node.box};try{if($__R.mode){app212=attachEvent.box(node.box,"focus",fun61)}else if(target===188)app212=$__R.stack[$__R.stack.length-1].f()}catch(exn184){if(exn184 instanceof $__T.Capture){exn184.stack.push({kind:"rest",f:restoreNextFrame,index:188,this:this});captureLocals(exn184.stack[exn184.stack.length-1])}else{$__R.pushTrace("Line 1023: in addFocusTracking")}throw exn184}if($__R.mode)fun62=function funExpr89(e){currentFocusedNode.box=$S.g.undefined};try{if($__R.mode){app213=attachEvent.box(node.box,"blur",fun62)}else if(target===189)app213=$__R.stack[$__R.stack.length-1].f()}catch(exn185){if(exn185 instanceof $__T.Capture){exn185.stack.push({kind:"rest",f:restoreNextFrame,index:189,this:this});captureLocals(exn185.stack[exn185.stack.length-1])}else{$__R.pushTrace("Line 1025: in addFocusTracking")}throw exn185}{let retval17=node.box;$__R.remainingStack++;return newTarget&&!(retval17 instanceof Object)?this:retval17}$__R.remainingStack++;if(newTarget)return this};sexp2attrib.box=function fun117(sexp){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[element1,element0,app214,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[element1,element0,app214,newTarget]}var restoreNextFrame=()=>{return fun117.call(this,sexp)};var app214,element0,element1;try{if($__R.mode){app214=$S.suspend()}else if(target===190)app214=$__R.stack[$__R.stack.length-1].f()}catch(exn186){if(exn186 instanceof $__T.Capture){exn186.stack.push({kind:"rest",f:restoreNextFrame,index:190,this:this});captureLocals(exn186.stack[exn186.stack.length-1])}else{$__R.pushTrace(": in sexp2attrib")}throw exn186}if($__R.mode)element0=sexp[0];try{if($__R.mode){element1=sexp.slice(1)}else if(target===191)element1=$__R.stack[$__R.stack.length-1].f()}catch(exn187){if(exn187 instanceof $__T.Capture){exn187.stack.push({kind:"rest",f:restoreNextFrame,index:191,this:this});captureLocals(exn187.stack[exn187.stack.length-1])}else{$__R.pushTrace("Line 1046: in sexp2attrib")}throw exn187}{let retval18={attrib:element0,values:element1};$__R.remainingStack++;return newTarget&&!(retval18 instanceof Object)?this:retval18}$__R.remainingStack++;if(newTarget)return this};sexp2css_node.box=function fun118(sexp){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun64,arg19,attribs,app215,arg18,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun64,arg19,attribs,app215,arg18,newTarget]}var restoreNextFrame=()=>{return fun118.call(this,sexp)};var attribs,app215,arg18,arg19,fun64;if($__R.mode)attribs={box:undefined};try{if($__R.mode){app215=$S.suspend()}else if(target===192)app215=$__R.stack[$__R.stack.length-1].f()}catch(exn188){if(exn188 instanceof $__T.Capture){exn188.stack.push({kind:"rest",f:restoreNextFrame,index:192,this:this});captureLocals(exn188.stack[exn188.stack.length-1])}else{$__R.pushTrace(": in sexp2css_node")}throw exn188}try{if($__R.mode){arg18=sexp.slice(1)}else if(target===193)arg18=$__R.stack[$__R.stack.length-1].f()}catch(exn189){if(exn189 instanceof $__T.Capture){exn189.stack.push({kind:"rest",f:restoreNextFrame,index:193,this:this});captureLocals(exn189.stack[exn189.stack.length-1])}else{$__R.pushTrace("Line 1050: in sexp2css_node")}throw exn189}if($__R.mode)arg19=sexp2attrib.box;try{if($__R.mode){attribs.box=map.box(arg18,arg19)}else if(target===194)attribs.box=$__R.stack[$__R.stack.length-1].f()}catch(exn190){if(exn190 instanceof $__T.Capture){exn190.stack.push({kind:"rest",f:restoreNextFrame,index:194,this:this});captureLocals(exn190.stack[exn190.stack.length-1])}else{$__R.pushTrace("Line 1050: in sexp2css_node")}throw exn190}if($__R.mode&&typeof sexp[0]==="string"){{let retval19=[{id:sexp[0],attribs:attribs.box}];$__R.remainingStack++;return newTarget&&!(retval19 instanceof Object)?this:retval19}}else if($__R.mode){if($__R.mode&&sexp[0].length!==$S.g.undefined){if($__R.mode){fun64=function funExpr91(id){return{id:id,attribs:attribs.box}};$__R.remainingStack++}if($__R.mode)return map.box(sexp[0],fun64);else;}else if($__R.mode){{let retval20=[{node:sexp[0],attribs:attribs.box}];$__R.remainingStack++;return newTarget&&!(retval20 instanceof Object)?this:retval20}}}$__R.remainingStack++;if(newTarget)return this};isTextNode.box=function fun119(n){return n.nodeType===3};isElementNode.box=function fun120(n){return n.nodeType===1};p.box=function fun121(attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg20,arg22,app218,arg21,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg20,arg22,app218,arg21,newTarget]}var restoreNextFrame=()=>{return fun121.call(this,attribs)};var app218,arg21,arg22,arg20;try{if($__R.mode){app218=$S.suspend()}else if(target===196)app218=$__R.stack[$__R.stack.length-1].f()}catch(exn191){if(exn191 instanceof $__T.Capture){exn191.stack.push({kind:"rest",f:restoreNextFrame,index:196,this:this});captureLocals(exn191.stack[exn191.stack.length-1])}else{$__R.pushTrace(": in p")}throw exn191}try{if($__R.mode){arg21=$S.g.document.createElement("p")}else if(target===197)arg21=$__R.stack[$__R.stack.length-1].f()}catch(exn192){if(exn192 instanceof $__T.Capture){exn192.stack.push({kind:"rest",f:restoreNextFrame,index:197,this:this});captureLocals(exn192.stack[exn192.stack.length-1])}else{$__R.pushTrace("Line 1154: in p")}throw exn192}if($__R.mode)arg22=attribs;try{if($__R.mode){arg20=copy_attribs.box(arg21,arg22)}else if(target===198)arg20=$__R.stack[$__R.stack.length-1].f()}catch(exn193){if(exn193 instanceof $__T.Capture){exn193.stack.push({kind:"rest",f:restoreNextFrame,index:198,this:this});captureLocals(exn193.stack[exn193.stack.length-1])}else{$__R.pushTrace("Line 1154: in p")}throw exn193}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg20);else;$__R.remainingStack++;if(newTarget)return this};div.box=function fun122(attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg23,arg25,app219,arg24,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg23,arg25,app219,arg24,newTarget]}var restoreNextFrame=()=>{return fun122.call(this,attribs)};var app219,arg24,arg25,arg23;try{if($__R.mode){app219=$S.suspend()}else if(target===200)app219=$__R.stack[$__R.stack.length-1].f()}catch(exn194){if(exn194 instanceof $__T.Capture){exn194.stack.push({kind:"rest",f:restoreNextFrame,index:200,this:this});captureLocals(exn194.stack[exn194.stack.length-1])}else{$__R.pushTrace(": in div")}throw exn194}try{if($__R.mode){arg24=$S.g.document.createElement("div")}else if(target===201)arg24=$__R.stack[$__R.stack.length-1].f()}catch(exn195){if(exn195 instanceof $__T.Capture){exn195.stack.push({kind:"rest",f:restoreNextFrame,index:201,this:this});captureLocals(exn195.stack[exn195.stack.length-1])}else{$__R.pushTrace("Line 1159: in div")}throw exn195}if($__R.mode)arg25=attribs;try{if($__R.mode){arg23=copy_attribs.box(arg24,arg25)}else if(target===202)arg23=$__R.stack[$__R.stack.length-1].f()}catch(exn196){if(exn196 instanceof $__T.Capture){exn196.stack.push({kind:"rest",f:restoreNextFrame,index:202,this:this});captureLocals(exn196.stack[exn196.stack.length-1])}else{$__R.pushTrace("Line 1159: in div")}throw exn196}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg23);else;$__R.remainingStack++;if(newTarget)return this};button.box=function fun123(f,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg26,app221,fun70,app220,n,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg26,app221,fun70,app220,n,newTarget]}var restoreNextFrame=()=>{return fun123.call(this,f,attribs)};var app220,n,fun70,app221,arg26;try{if($__R.mode){app220=$S.suspend()}else if(target===204)app220=$__R.stack[$__R.stack.length-1].f()}catch(exn197){if(exn197 instanceof $__T.Capture){exn197.stack.push({kind:"rest",f:restoreNextFrame,index:204,this:this});captureLocals(exn197.stack[exn197.stack.length-1])}else{$__R.pushTrace(": in button")}throw exn197}try{if($__R.mode){n=$S.g.document.createElement("button")}else if(target===205)n=$__R.stack[$__R.stack.length-1].f()}catch(exn198){if(exn198 instanceof $__T.Capture){exn198.stack.push({kind:"rest",f:restoreNextFrame,index:205,this:this});captureLocals(exn198.stack[exn198.stack.length-1])}else{$__R.pushTrace("Line 1166: in button")}throw exn198}if($__R.mode){fun70=function funExpr98(e){return false};n.onclick=fun70}try{if($__R.mode){app221=add_ev.box(n,"click",f)}else if(target===206)app221=$__R.stack[$__R.stack.length-1].f()}catch(exn199){if(exn199 instanceof $__T.Capture){exn199.stack.push({kind:"rest",f:restoreNextFrame,index:206,this:this});captureLocals(exn199.stack[exn199.stack.length-1])}else{$__R.pushTrace("Line 1168: in button")}throw exn199}try{if($__R.mode){arg26=copy_attribs.box(n,attribs)}else if(target===207)arg26=$__R.stack[$__R.stack.length-1].f()}catch(exn200){if(exn200 instanceof $__T.Capture){exn200.stack.push({kind:"rest",f:restoreNextFrame,index:207,this:this});captureLocals(exn200.stack[exn200.stack.length-1])}else{$__R.pushTrace("Line 1169: in button")}throw exn200}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg26);else;$__R.remainingStack++;if(newTarget)return this};input.box=function fun124(aType,updateF,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app228,dispatchTable,app227,app226,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app228,dispatchTable,app227,app226,newTarget]}var restoreNextFrame=()=>{return fun124.call(this,aType,updateF,attribs)};var app226,app227,dispatchTable,app228;try{if($__R.mode){app226=$S.suspend()}else if(target===209)app226=$__R.stack[$__R.stack.length-1].f()}catch(exn201){if(exn201 instanceof $__T.Capture){exn201.stack.push({kind:"rest",f:restoreNextFrame,index:209,this:this});captureLocals(exn201.stack[exn201.stack.length-1])}else{$__R.pushTrace(": in input")}throw exn201}try{if($__R.mode){app227=aType.toLowerCase()}else if(target===210)app227=$__R.stack[$__R.stack.length-1].f()}catch(exn202){if(exn202 instanceof $__T.Capture){exn202.stack.push({kind:"rest",f:restoreNextFrame,index:210,this:this});captureLocals(exn202.stack[exn202.stack.length-1])}else{$__R.pushTrace("Line 1206: in input")}throw exn202}if($__R.mode){aType=app227;dispatchTable={text:text_input.box,password:text_input.box,checkbox:checkbox_input.box}}if($__R.mode&&dispatchTable[aType]){if($__R.mode)$__R.remainingStack++;if($__R.mode)return dispatchTable[aType](aType,updateF,attribs);else;}else if($__R.mode||!$__R.mode&&target===212){try{if($__R.mode){app228=new $S.g.Error("js-input: does not currently support type "+aType)}else if(target===212)app228=$__R.stack[$__R.stack.length-1].f()}catch(exn203){if(exn203 instanceof $__T.Capture){exn203.stack.push({kind:"rest",f:restoreNextFrame,index:212,this:this});captureLocals(exn203.stack[exn203.stack.length-1])}else{$__R.pushTrace("Line 1218: in input")}throw exn203}if($__R.mode)$__R.pushTrace("Line 1218: in input");throw app228}$__R.remainingStack++;if(newTarget)return this};text.box=function fun125(s,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app230,arg27,arg28,app229,result,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app230,arg27,arg28,app229,result,newTarget]}var restoreNextFrame=()=>{return fun125.call(this,s,attribs)};var app229,result,arg28,arg27,app230;try{if($__R.mode){app229=$S.suspend()}else if(target===213)app229=$__R.stack[$__R.stack.length-1].f()}catch(exn204){if(exn204 instanceof $__T.Capture){exn204.stack.push({kind:"rest",f:restoreNextFrame,index:213,this:this});captureLocals(exn204.stack[exn204.stack.length-1])}else{$__R.pushTrace(": in text")}throw exn204}try{if($__R.mode){result=$S.g.document.createElement("div")}else if(target===214)result=$__R.stack[$__R.stack.length-1].f()}catch(exn205){if(exn205 instanceof $__T.Capture){exn205.stack.push({kind:"rest",f:restoreNextFrame,index:214,this:this});captureLocals(exn205.stack[exn205.stack.length-1])}else{$__R.pushTrace("Line 1285: in text")}throw exn205}try{if($__R.mode){arg28=$S.g.String.call(void 0,s)}else if(target===215)arg28=$__R.stack[$__R.stack.length-1].f()}catch(exn206){if(exn206 instanceof $__T.Capture){exn206.stack.push({kind:"rest",f:restoreNextFrame,index:215,this:this});captureLocals(exn206.stack[exn206.stack.length-1])}else{$__R.pushTrace("Line 1286: in text")}throw exn206}try{if($__R.mode){arg27=$S.g.document.createTextNode(arg28)}else if(target===216)arg27=$__R.stack[$__R.stack.length-1].f()}catch(exn207){if(exn207 instanceof $__T.Capture){exn207.stack.push({kind:"rest",f:restoreNextFrame,index:216,this:this});captureLocals(exn207.stack[exn207.stack.length-1])}else{$__R.pushTrace("Line 1286: in text")}throw exn207}try{if($__R.mode){app230=result.appendChild(arg27)}else if(target===217)app230=$__R.stack[$__R.stack.length-1].f()}catch(exn208){if(exn208 instanceof $__T.Capture){exn208.stack.push({kind:"rest",f:restoreNextFrame,index:217,this:this});captureLocals(exn208.stack[exn208.stack.length-1])}else{$__R.pushTrace("Line 1286: in text")}throw exn208}if($__R.mode)result.jsworldOpaque=true;{let retval21=result;$__R.remainingStack++;return newTarget&&!(retval21 instanceof Object)?this:retval21}$__R.remainingStack++;if(newTarget)return this};select.box=function fun126(attribs,opts,f){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[i,n,app231,app232,app233,app234,arg30,arg31,result,arg29,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[i,n,app231,app232,app233,app234,arg30,arg31,result,arg29,newTarget]}var restoreNextFrame=()=>{return fun126.call(this,attribs,opts,f)};var app231,n,i,app232,arg29,arg30,app233,app234,arg31,result;try{if($__R.mode){app231=$S.suspend()}else if(target===218)app231=$__R.stack[$__R.stack.length-1].f()}catch(exn209){if(exn209 instanceof $__T.Capture){exn209.stack.push({kind:"rest",f:restoreNextFrame,index:218,this:this});captureLocals(exn209.stack[exn209.stack.length-1])}else{$__R.pushTrace(": in select")}throw exn209}try{if($__R.mode){n=$S.g.document.createElement("select")}else if(target===219)n=$__R.stack[$__R.stack.length-1].f()}catch(exn210){if(exn210 instanceof $__T.Capture){exn210.stack.push({kind:"rest",f:restoreNextFrame,index:219,this:this});captureLocals(exn210.stack[exn210.stack.length-1])}else{$__R.pushTrace("Line 1295: in select")}throw exn210}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===222||target===221||target===220))loop_break27:while($__R.mode&&i<opts.length||!$__R.mode&&(target===222||target===221||target===220)){if($__R.mode||!$__R.mode&&(target===222||target===221||target===220))loop_continue27:{try{if($__R.mode){app232=$S.suspend()}else if(target===220)app232=$__R.stack[$__R.stack.length-1].f()}catch(exn211){if(exn211 instanceof $__T.Capture){exn211.stack.push({kind:"rest",f:restoreNextFrame,index:220,this:this});captureLocals(exn211.stack[exn211.stack.length-1])}else{$__R.pushTrace(": in select")}throw exn211}try{if($__R.mode){arg29=option.box({value:opts[i]})}else if(target===221)arg29=$__R.stack[$__R.stack.length-1].f()}catch(exn212){if(exn212 instanceof $__T.Capture){exn212.stack.push({kind:"rest",f:restoreNextFrame,index:221,this:this});captureLocals(exn212.stack[exn212.stack.length-1])}else{$__R.pushTrace("Line 1297: in select")}throw exn212}if($__R.mode)arg30=null;try{if($__R.mode){app233=n.add(arg29,arg30)}else if(target===222)app233=$__R.stack[$__R.stack.length-1].f()}catch(exn213){if(exn213 instanceof $__T.Capture){exn213.stack.push({kind:"rest",f:restoreNextFrame,index:222,this:this});captureLocals(exn213.stack[exn213.stack.length-1])}else{$__R.pushTrace("Line 1297: in select")}throw exn213}}if($__R.mode)i++}if($__R.mode)n.jsworldOpaque=true;try{if($__R.mode){app234=add_ev.box(n,"change",f)}else if(target===223)app234=$__R.stack[$__R.stack.length-1].f()}catch(exn214){if(exn214 instanceof $__T.Capture){exn214.stack.push({kind:"rest",f:restoreNextFrame,index:223,this:this});captureLocals(exn214.stack[exn214.stack.length-1])}else{$__R.pushTrace("Line 1300: in select")}throw exn214}try{if($__R.mode){arg31=copy_attribs.box(n,attribs)}else if(target===224)arg31=$__R.stack[$__R.stack.length-1].f()}catch(exn215){if(exn215 instanceof $__T.Capture){exn215.stack.push({kind:"rest",f:restoreNextFrame,index:224,this:this});captureLocals(exn215.stack[exn215.stack.length-1])}else{$__R.pushTrace("Line 1301: in select")}throw exn215}try{if($__R.mode){result=addFocusTracking.box(arg31)}else if(target===225)result=$__R.stack[$__R.stack.length-1].f()}catch(exn216){if(exn216 instanceof $__T.Capture){exn216.stack.push({kind:"rest",f:restoreNextFrame,index:225,this:this});captureLocals(exn216.stack[exn216.stack.length-1])}else{$__R.pushTrace("Line 1301: in select")}throw exn216}{let retval22=result;$__R.remainingStack++;return newTarget&&!(retval22 instanceof Object)?this:retval22}$__R.remainingStack++;if(newTarget)return this};textarea.box=function fun127(attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg32,arg34,app235,arg33,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg32,arg34,app235,arg33,newTarget]}var restoreNextFrame=()=>{return fun127.call(this,attribs)};var app235,arg33,arg34,arg32;try{if($__R.mode){app235=$S.suspend()}else if(target===226)app235=$__R.stack[$__R.stack.length-1].f()}catch(exn217){if(exn217 instanceof $__T.Capture){exn217.stack.push({kind:"rest",f:restoreNextFrame,index:226,this:this});captureLocals(exn217.stack[exn217.stack.length-1])}else{$__R.pushTrace(": in textarea")}throw exn217}try{if($__R.mode){arg33=$S.g.document.createElement("textarea")}else if(target===227)arg33=$__R.stack[$__R.stack.length-1].f()}catch(exn218){if(exn218 instanceof $__T.Capture){exn218.stack.push({kind:"rest",f:restoreNextFrame,index:227,this:this});captureLocals(exn218.stack[exn218.stack.length-1])}else{$__R.pushTrace("Line 1316: in textarea")}throw exn218}if($__R.mode)arg34=attribs;try{if($__R.mode){arg32=copy_attribs.box(arg33,arg34)}else if(target===228)arg32=$__R.stack[$__R.stack.length-1].f()}catch(exn219){if(exn219 instanceof $__T.Capture){exn219.stack.push({kind:"rest",f:restoreNextFrame,index:228,this:this});captureLocals(exn219.stack[exn219.stack.length-1])}else{$__R.pushTrace("Line 1316: in textarea")}throw exn219}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg32);else;$__R.remainingStack++;if(newTarget)return this};h1.box=function fun128(attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg35,arg37,app236,arg36,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg35,arg37,app236,arg36,newTarget]}var restoreNextFrame=()=>{return fun128.call(this,attribs)};var app236,arg36,arg37,arg35;try{if($__R.mode){app236=$S.suspend()}else if(target===230)app236=$__R.stack[$__R.stack.length-1].f()}catch(exn220){if(exn220 instanceof $__T.Capture){exn220.stack.push({kind:"rest",f:restoreNextFrame,index:230,this:this});captureLocals(exn220.stack[exn220.stack.length-1])}else{$__R.pushTrace(": in h1")}throw exn220}try{if($__R.mode){arg36=$S.g.document.createElement("h1")}else if(target===231)arg36=$__R.stack[$__R.stack.length-1].f()}catch(exn221){if(exn221 instanceof $__T.Capture){exn221.stack.push({kind:"rest",f:restoreNextFrame,index:231,this:this});captureLocals(exn221.stack[exn221.stack.length-1])}else{$__R.pushTrace("Line 1321: in h1")}throw exn221}if($__R.mode)arg37=attribs;try{if($__R.mode){arg35=copy_attribs.box(arg36,arg37)}else if(target===232)arg35=$__R.stack[$__R.stack.length-1].f()}catch(exn222){if(exn222 instanceof $__T.Capture){exn222.stack.push({kind:"rest",f:restoreNextFrame,index:232,this:this});captureLocals(exn222.stack[exn222.stack.length-1])}else{$__R.pushTrace("Line 1321: in h1")}throw exn222}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg35);else;$__R.remainingStack++;if(newTarget)return this};canvas.box=function fun129(attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg38,arg40,app237,arg39,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg38,arg40,app237,arg39,newTarget]}var restoreNextFrame=()=>{return fun129.call(this,attribs)};var app237,arg39,arg40,arg38;try{if($__R.mode){app237=$S.suspend()}else if(target===234)app237=$__R.stack[$__R.stack.length-1].f()}catch(exn223){if(exn223 instanceof $__T.Capture){exn223.stack.push({kind:"rest",f:restoreNextFrame,index:234,this:this});captureLocals(exn223.stack[exn223.stack.length-1])}else{$__R.pushTrace(": in canvas")}throw exn223}try{if($__R.mode){arg39=$S.g.document.createElement("canvas")}else if(target===235)arg39=$__R.stack[$__R.stack.length-1].f()}catch(exn224){if(exn224 instanceof $__T.Capture){exn224.stack.push({kind:"rest",f:restoreNextFrame,index:235,this:this});captureLocals(exn224.stack[exn224.stack.length-1])}else{$__R.pushTrace("Line 1326: in canvas")}throw exn224}if($__R.mode)arg40=attribs;try{if($__R.mode){arg38=copy_attribs.box(arg39,arg40)}else if(target===236)arg38=$__R.stack[$__R.stack.length-1].f()}catch(exn225){if(exn225 instanceof $__T.Capture){exn225.stack.push({kind:"rest",f:restoreNextFrame,index:236,this:this});captureLocals(exn225.stack[exn225.stack.length-1])}else{$__R.pushTrace("Line 1326: in canvas")}throw exn225}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg38);else;$__R.remainingStack++;if(newTarget)return this};img.box=function fun130(src,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg41,n,app238,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg41,n,app238,newTarget]}var restoreNextFrame=()=>{return fun130.call(this,src,attribs)};var app238,n,arg41;try{if($__R.mode){app238=$S.suspend()}else if(target===238)app238=$__R.stack[$__R.stack.length-1].f()}catch(exn226){if(exn226 instanceof $__T.Capture){exn226.stack.push({kind:"rest",f:restoreNextFrame,index:238,this:this});captureLocals(exn226.stack[exn226.stack.length-1])}else{$__R.pushTrace(": in img")}throw exn226}try{if($__R.mode){n=$S.g.document.createElement("img")}else if(target===239)n=$__R.stack[$__R.stack.length-1].f()}catch(exn227){if(exn227 instanceof $__T.Capture){exn227.stack.push({kind:"rest",f:restoreNextFrame,index:239,this:this});captureLocals(exn227.stack[exn227.stack.length-1])}else{$__R.pushTrace("Line 1332: in img")}throw exn227}if($__R.mode)n.src=src;try{if($__R.mode){arg41=copy_attribs.box(n,attribs)}else if(target===240)arg41=$__R.stack[$__R.stack.length-1].f()}catch(exn228){if(exn228 instanceof $__T.Capture){exn228.stack.push({kind:"rest",f:restoreNextFrame,index:240,this:this});captureLocals(exn228.stack[exn228.stack.length-1])}else{$__R.pushTrace("Line 1334: in img")}throw exn228}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg41);else;$__R.remainingStack++;if(newTarget)return this};raw_node.box=function fun131(node,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg42,app239,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg42,app239,newTarget]}var restoreNextFrame=()=>{return fun131.call(this,node,attribs)};var app239,arg42;try{if($__R.mode){app239=$S.suspend()}else if(target===242)app239=$__R.stack[$__R.stack.length-1].f()}catch(exn229){if(exn229 instanceof $__T.Capture){exn229.stack.push({kind:"rest",f:restoreNextFrame,index:242,this:this});captureLocals(exn229.stack[exn229.stack.length-1])}else{$__R.pushTrace(": in raw_node")}throw exn229}try{if($__R.mode){arg42=copy_attribs.box(node,attribs)}else if(target===243)arg42=$__R.stack[$__R.stack.length-1].f()}catch(exn230){if(exn230 instanceof $__T.Capture){exn230.stack.push({kind:"rest",f:restoreNextFrame,index:243,this:this});captureLocals(exn230.stack[exn230.stack.length-1])}else{$__R.pushTrace("Line 1341: in raw_node")}throw exn230}if($__R.mode)$__R.remainingStack++;if($__R.mode)return addFocusTracking.box(arg42);else;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app0=$S.suspend()}else if(target===245)app0=$__R.stack[$__R.stack.length-1].f()}catch(exn231){if(exn231 instanceof $__T.Capture){exn231.stack.push({kind:"rest",f:restoreNextFrame,index:245,this:this});captureLocals(exn231.stack[exn231.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn231}if($__R.mode){_worldIndex.box=0;getNewWorldIndex.box=function funExpr2(){_worldIndex.box++;return _worldIndex.box};rawJsworld={};"use strict";Jsworld.box=rawJsworld;currentFocusedNode.box=false;doNothing.box=function funExpr3(){};Jsworld.box.doNothing=doNothing.box;forEachK.box=function funExpr4(a,f,f_error,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app1,forEachHelp,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app1,forEachHelp,newTarget]}var restoreNextFrame=()=>{return funExpr4.call(this,a,f,f_error,k)};var forEachHelp,app1;if($__R.mode){k={box:k};f={box:f};a={box:a};forEachHelp={box:undefined}}try{if($__R.mode){app1=$S.suspend()}else if(target===246)app1=$__R.stack[$__R.stack.length-1].f()}catch(exn232){if(exn232 instanceof $__T.Capture){exn232.stack.push({kind:"rest",f:restoreNextFrame,index:246,this:this});captureLocals(exn232.stack[exn232.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn232}if($__R.mode){forEachHelp.box=function funExpr5(i){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app5,app3,app2,e00,fun2,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app5,app3,app2,e00,fun2,newTarget]}var restoreNextFrame=()=>{return funExpr5.call(this,i)};var app2,e00,fun2,app3,app5;if($__R.mode)i={box:i};try{if($__R.mode){app2=$S.suspend()}else if(target===247)app2=$__R.stack[$__R.stack.length-1].f()}catch(exn233){if(exn233 instanceof $__T.Capture){exn233.stack.push({kind:"rest",f:restoreNextFrame,index:247,this:this});captureLocals(exn233.stack[exn233.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn233}if($__R.mode&&i.box>=a.box.length){if($__R.mode&&k.box){if($__R.mode)$__R.remainingStack++;if($__R.mode)return k.box();else;}else if($__R.mode){{let retval23;$__R.remainingStack++;return newTarget&&!(retval23 instanceof Object)?this:retval23}}}try{if(!$__R.mode&&target===252)throw e00;if($__R.mode)fun2=function funExpr6(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app4,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app4,newTarget]}var restoreNextFrame=()=>{return funExpr6.call(this)};var app4;try{if($__R.mode){app4=$S.suspend()}else if(target===249)app4=$__R.stack[$__R.stack.length-1].f()}catch(exn234){if(exn234 instanceof $__T.Capture){exn234.stack.push({kind:"rest",f:restoreNextFrame,index:249,this:this});captureLocals(exn234.stack[exn234.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn234}if($__R.mode)$__R.remainingStack++;if($__R.mode)return forEachHelp.box(i.box+1);else;$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app3=f.box(a.box[i.box],fun2)}else if(target===251)app3=$__R.stack[$__R.stack.length-1].f()}catch(exn235){if(exn235 instanceof $__T.Capture){exn235.stack.push({kind:"rest",f:restoreNextFrame,index:251,this:this});captureLocals(exn235.stack[exn235.stack.length-1])}else{$__R.pushTrace("Line 44: in (anonymous function)")}throw exn235}{let retval24=app3;$__R.remainingStack++;return newTarget&&!(retval24 instanceof Object)?this:retval24}}catch(e){if(e instanceof $__T.Capture||e instanceof $__T.Restore||e instanceof $__T.EndTurn)throw e;$__R.clearTrace();if($__R.mode)e00=e;try{if($__R.mode){app5=Jsworld.box.shutdown({errorShutdown:e})}else if(target===252)app5=$__R.stack[$__R.stack.length-1].f()}catch(exn236){if(exn236 instanceof $__T.Capture){exn236.stack.push({kind:"rest",f:restoreNextFrame,index:252,this:this});captureLocals(exn236.stack[exn236.stack.length-1])}else{$__R.pushTrace("Line 46: in (anonymous function)")}throw exn236}{let retval25=app5;$__R.remainingStack++;return newTarget&&!(retval25 instanceof Object)?this:retval25}}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return forEachHelp.box(0);else;$__R.remainingStack++;if(newTarget)return this};world.box=new InitialWorld.box;worldListenersStack.box=[];eventDetachersStack.box=[];worldIndexStack.box=[];runningBigBangs.box=[];worldIndex.box=null;worldListeners.box=null;eventDetachers.box=null;changingWorld.box=[];fun5=function funExpr10(options){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[currentRecord,app240,app241,app242,app243,app244,app245,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[currentRecord,app240,app241,app242,app243,app244,app245,newTarget]}var restoreNextFrame=()=>{return funExpr10.call(this,options)};var app240,app241,currentRecord,app242,app243,app244,app245;try{if($__R.mode){app240=$S.suspend()}else if(target===255)app240=$__R.stack[$__R.stack.length-1].f()}catch(exn237){if(exn237 instanceof $__T.Capture){exn237.stack.push({kind:"rest",f:restoreNextFrame,index:255,this:this});captureLocals(exn237.stack[exn237.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn237}if($__R.mode||!$__R.mode&&(target===260||target===259||target===258||target===257||target===256))loop_break0:while($__R.mode&&runningBigBangs.box.length>0||!$__R.mode&&(target===260||target===259||target===258||target===257||target===256)){if($__R.mode||!$__R.mode&&(target===260||target===259||target===258||target===257||target===256))loop_continue0:{try{if($__R.mode){app241=$S.suspend()}else if(target===256)app241=$__R.stack[$__R.stack.length-1].f()}catch(exn238){if(exn238 instanceof $__T.Capture){exn238.stack.push({kind:"rest",f:restoreNextFrame,index:256,this:this});captureLocals(exn238.stack[exn238.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn238}try{if($__R.mode){currentRecord=runningBigBangs.box.pop()}else if(target===257)currentRecord=$__R.stack[$__R.stack.length-1].f()}catch(exn239){if(exn239 instanceof $__T.Capture){exn239.stack.push({kind:"rest",f:restoreNextFrame,index:257,this:this});captureLocals(exn239.stack[exn239.stack.length-1])}else{$__R.pushTrace("Line 133: in (anonymous function)")}throw exn239}try{if($__R.mode){app242=currentRecord.pause()}else if(target===258)app242=$__R.stack[$__R.stack.length-1].f()}catch(exn240){if(exn240 instanceof $__T.Capture){exn240.stack.push({kind:"rest",f:restoreNextFrame,index:258,this:this});captureLocals(exn240.stack[exn240.stack.length-1])}else{$__R.pushTrace("Line 134: in (anonymous function)")}throw exn240}if($__R.mode&&options.cleanShutdown||!$__R.mode&&target===259){try{if($__R.mode){app243=currentRecord.success(world.box)}else if(target===259)app243=$__R.stack[$__R.stack.length-1].f()}catch(exn241){if(exn241 instanceof $__T.Capture){exn241.stack.push({kind:"rest",f:restoreNextFrame,index:259,this:this});captureLocals(exn241.stack[exn241.stack.length-1])}else{$__R.pushTrace("Line 136: in (anonymous function)")}throw exn241}}if($__R.mode&&options.errorShutdown||!$__R.mode&&target===260){try{if($__R.mode){app244=currentRecord.fail(options.errorShutdown)}else if(target===260)app244=$__R.stack[$__R.stack.length-1].f()}catch(exn242){if(exn242 instanceof $__T.Capture){exn242.stack.push({kind:"rest",f:restoreNextFrame,index:260,this:this});captureLocals(exn242.stack[exn242.stack.length-1])}else{$__R.pushTrace("Line 139: in (anonymous function)")}throw exn242}}}}try{if($__R.mode){app245=clear_running_state.box()}else if(target===261)app245=$__R.stack[$__R.stack.length-1].f()}catch(exn243){if(exn243 instanceof $__T.Capture){exn243.stack.push({kind:"rest",f:restoreNextFrame,index:261,this:this});captureLocals(exn243.stack[exn243.stack.length-1])}else{$__R.pushTrace("Line 142: in (anonymous function)")}throw exn243}$__R.remainingStack++;if(newTarget)return this};Jsworld.box.shutdown=fun5;fun6=function funExpr11(options){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app250,app249,app246,currentRecord,app247,app248,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app250,app249,app246,currentRecord,app247,app248,newTarget]}var restoreNextFrame=()=>{return funExpr11.call(this,options)};var app246,currentRecord,app247,app248,app249,app250;try{if($__R.mode){app246=$S.suspend()}else if(target===262)app246=$__R.stack[$__R.stack.length-1].f()}catch(exn244){if(exn244 instanceof $__T.Capture){exn244.stack.push({kind:"rest",f:restoreNextFrame,index:262,this:this});captureLocals(exn244.stack[exn244.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn244}if($__R.mode&&runningBigBangs.box.length>0||!$__R.mode&&(target===266||target===265||target===264||target===263)){try{if($__R.mode){currentRecord=runningBigBangs.box.pop()}else if(target===263)currentRecord=$__R.stack[$__R.stack.length-1].f()}catch(exn245){if(exn245 instanceof $__T.Capture){exn245.stack.push({kind:"rest",f:restoreNextFrame,index:263,this:this});captureLocals(exn245.stack[exn245.stack.length-1])}else{$__R.pushTrace("Line 148: in (anonymous function)")}throw exn245}try{if($__R.mode){app247=currentRecord.pause()}else if(target===264)app247=$__R.stack[$__R.stack.length-1].f()}catch(exn246){if(exn246 instanceof $__T.Capture){exn246.stack.push({kind:"rest",f:restoreNextFrame,index:264,this:this});captureLocals(exn246.stack[exn246.stack.length-1])}else{$__R.pushTrace("Line 149: in (anonymous function)")}throw exn246}if($__R.mode&&options.cleanShutdown||!$__R.mode&&target===265){try{if($__R.mode){app248=currentRecord.success(world.box)}else if(target===265)app248=$__R.stack[$__R.stack.length-1].f()}catch(exn247){if(exn247 instanceof $__T.Capture){exn247.stack.push({kind:"rest",f:restoreNextFrame,index:265,this:this});captureLocals(exn247.stack[exn247.stack.length-1])}else{$__R.pushTrace("Line 151: in (anonymous function)")}throw exn247}}if($__R.mode&&options.errorShutdown||!$__R.mode&&target===266){try{if($__R.mode){app249=currentRecord.fail(options.errorShutdown)}else if(target===266)app249=$__R.stack[$__R.stack.length-1].f()}catch(exn248){if(exn248 instanceof $__T.Capture){exn248.stack.push({kind:"rest",f:restoreNextFrame,index:266,this:this});captureLocals(exn248.stack[exn248.stack.length-1])}else{$__R.pushTrace("Line 154: in (anonymous function)")}throw exn248}}}try{if($__R.mode){app250=resume_running_state.box()}else if(target===267)app250=$__R.stack[$__R.stack.length-1].f()}catch(exn249){if(exn249 instanceof $__T.Capture){exn249.stack.push({kind:"rest",f:restoreNextFrame,index:267,this:this});captureLocals(exn249.stack[exn249.stack.length-1])}else{$__R.pushTrace("Line 157: in (anonymous function)")}throw exn249}$__R.remainingStack++;if(newTarget)return this};Jsworld.box.shutdownSingle=fun6;DELAY_BEFORE_RETRY.box=10;change_world.box=function funExpr12(updater,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[originalWorld,app33,changeWorldHelp,app26,app27,e01,fun7,fun8,fun9,app30,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[originalWorld,app33,changeWorldHelp,app26,app27,e01,fun7,fun8,fun9,app30,newTarget]}var restoreNextFrame=()=>{return funExpr12.call(this,updater,k)};var originalWorld,changeWorldHelp,app26,fun7,app27,fun8,e01,fun9,app30,app33;if($__R.mode){k={box:k};updater={box:updater};originalWorld={box:undefined};changeWorldHelp={box:undefined}}try{if($__R.mode){app26=$S.suspend()}else if(target===268)app26=$__R.stack[$__R.stack.length-1].f()}catch(exn250){if(exn250 instanceof $__T.Capture){exn250.stack.push({kind:"rest",f:restoreNextFrame,index:268,this:this});captureLocals(exn250.stack[exn250.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn250}if($__R.mode&&changingWorld.box[changingWorld.box.length-1]||!$__R.mode&&target===271){if($__R.mode)fun7=function funExpr13(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app29,app28,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app29,app28,newTarget]}var restoreNextFrame=()=>{return funExpr13.call(this)};var app28,app29;try{if($__R.mode){app28=$S.suspend()}else if(target===269)app28=$__R.stack[$__R.stack.length-1].f()}catch(exn251){if(exn251 instanceof $__T.Capture){exn251.stack.push({kind:"rest",f:restoreNextFrame,index:269,this:this});captureLocals(exn251.stack[exn251.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn251}try{if($__R.mode){app29=change_world.box(updater.box,k.box)}else if(target===270)app29=$__R.stack[$__R.stack.length-1].f()}catch(exn252){if(exn252 instanceof $__T.Capture){exn252.stack.push({kind:"rest",f:restoreNextFrame,index:270,this:this});captureLocals(exn252.stack[exn252.stack.length-1])}else{$__R.pushTrace("Line 194: in (anonymous function)")}throw exn252}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app27=$S.g.setTimeout.call(void 0,fun7,DELAY_BEFORE_RETRY.box)}else if(target===271)app27=$__R.stack[$__R.stack.length-1].f()}catch(exn253){if(exn253 instanceof $__T.Capture){exn253.stack.push({kind:"rest",f:restoreNextFrame,index:271,this:this});captureLocals(exn253.stack[exn253.stack.length-1])}else{$__R.pushTrace("Line 192: in (anonymous function)")}throw exn253}{let retval26;$__R.remainingStack++;return newTarget&&!(retval26 instanceof Object)?this:retval26}}if($__R.mode){changingWorld.box[changingWorld.box.length-1]=true;originalWorld.box=world.box;fun8=function funExpr14(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app35,app34,fun10,fun11,fun12,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app35,app34,fun10,fun11,fun12,newTarget]}var restoreNextFrame=()=>{return funExpr14.call(this)};var app34,fun10,fun11,fun12,app35;try{if($__R.mode){app34=$S.suspend()}else if(target===272)app34=$__R.stack[$__R.stack.length-1].f()}catch(exn254){if(exn254 instanceof $__T.Capture){exn254.stack.push({kind:"rest",f:restoreNextFrame,index:272,this:this});captureLocals(exn254.stack[exn254.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn254}if($__R.mode){fun10=function funExpr15(listener,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app37,app36,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app37,app36,newTarget]}var restoreNextFrame=()=>{return funExpr15.call(this,listener,k2)};var app36,app37;try{if($__R.mode){app36=$S.suspend()}else if(target===273)app36=$__R.stack[$__R.stack.length-1].f()}catch(exn255){if(exn255 instanceof $__T.Capture){exn255.stack.push({kind:"rest",f:restoreNextFrame,index:273,this:this});captureLocals(exn255.stack[exn255.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn255}try{if($__R.mode){app37=listener(world.box,originalWorld.box,k2)}else if(target===274)app37=$__R.stack[$__R.stack.length-1].f()}catch(exn256){if(exn256 instanceof $__T.Capture){exn256.stack.push({kind:"rest",f:restoreNextFrame,index:274,this:this});captureLocals(exn256.stack[exn256.stack.length-1])}else{$__R.pushTrace("Line 208: in (anonymous function)")}throw exn256}$__R.remainingStack++;if(newTarget)return this};fun11=function funExpr16(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app38,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app38,newTarget]}var restoreNextFrame=()=>{return funExpr16.call(this,e)};var app38;try{if($__R.mode){app38=$S.suspend()}else if(target===275)app38=$__R.stack[$__R.stack.length-1].f()}catch(exn257){if(exn257 instanceof $__T.Capture){exn257.stack.push({kind:"rest",f:restoreNextFrame,index:275,this:this});captureLocals(exn257.stack[exn257.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn257}if($__R.mode){changingWorld.box[changingWorld.box.length-1]=false;world.box=originalWorld.box;$__R.pushTrace("Line 213: in (anonymous function)")}throw e;$__R.remainingStack++;if(newTarget)return this};fun12=function funExpr17(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app40,app39,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app40,app39,newTarget]}var restoreNextFrame=()=>{return funExpr17.call(this)};var app39,app40;try{if($__R.mode){app39=$S.suspend()}else if(target===276)app39=$__R.stack[$__R.stack.length-1].f()}catch(exn258){if(exn258 instanceof $__T.Capture){exn258.stack.push({kind:"rest",f:restoreNextFrame,index:276,this:this});captureLocals(exn258.stack[exn258.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn258}if($__R.mode)changingWorld.box[changingWorld.box.length-1]=false;try{if($__R.mode){app40=k.box()}else if(target===277)app40=$__R.stack[$__R.stack.length-1].f()}catch(exn259){if(exn259 instanceof $__T.Capture){exn259.stack.push({kind:"rest",f:restoreNextFrame,index:277,this:this});captureLocals(exn259.stack[exn259.stack.length-1])}else{$__R.pushTrace("Line 217: in (anonymous function)")}throw exn259}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app35=forEachK.box(worldListeners.box,fun10,fun11,fun12)}else if(target===278)app35=$__R.stack[$__R.stack.length-1].f()}catch(exn260){if(exn260 instanceof $__T.Capture){exn260.stack.push({kind:"rest",f:restoreNextFrame,index:278,this:this});captureLocals(exn260.stack[exn260.stack.length-1])}else{$__R.pushTrace("Line 206: in (anonymous function)")}throw exn260}$__R.remainingStack++;if(newTarget)return this};changeWorldHelp.box=fun8}try{if(!$__R.mode&&target===282)throw e01;if($__R.mode)fun9=function funExpr18(newWorld){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app32,app31,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app32,app31,newTarget]}var restoreNextFrame=()=>{return funExpr18.call(this,newWorld)};var app31,app32;try{if($__R.mode){app31=$S.suspend()}else if(target===279)app31=$__R.stack[$__R.stack.length-1].f()}catch(exn261){if(exn261 instanceof $__T.Capture){exn261.stack.push({kind:"rest",f:restoreNextFrame,index:279,this:this});captureLocals(exn261.stack[exn261.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn261}if($__R.mode)world.box=newWorld;try{if($__R.mode){app32=changeWorldHelp.box()}else if(target===280)app32=$__R.stack[$__R.stack.length-1].f()}catch(exn262){if(exn262 instanceof $__T.Capture){exn262.stack.push({kind:"rest",f:restoreNextFrame,index:280,this:this});captureLocals(exn262.stack[exn262.stack.length-1])}else{$__R.pushTrace("Line 224: in (anonymous function)")}throw exn262}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app30=updater.box(world.box,fun9)}else if(target===281)app30=$__R.stack[$__R.stack.length-1].f()}catch(exn263){if(exn263 instanceof $__T.Capture){exn263.stack.push({kind:"rest",f:restoreNextFrame,index:281,this:this});captureLocals(exn263.stack[exn263.stack.length-1])}else{$__R.pushTrace("Line 222: in (anonymous function)")}throw exn263}}catch(e){if(e instanceof $__T.Capture||e instanceof $__T.Restore||e instanceof $__T.EndTurn)throw e;$__R.clearTrace();if($__R.mode){e01=e;changingWorld.box[changingWorld.box.length-1]=false;world.box=originalWorld.box}try{if($__R.mode){app33=Jsworld.box.shutdown({errorShutdown:e})}else if(target===282)app33=$__R.stack[$__R.stack.length-1].f()}catch(exn264){if(exn264 instanceof $__T.Capture){exn264.stack.push({kind:"rest",f:restoreNextFrame,index:282,this:this});captureLocals(exn264.stack[exn264.stack.length-1])}else{$__R.pushTrace("Line 229: in (anonymous function)")}throw exn264}{let retval27=app33;$__R.remainingStack++;return newTarget&&!(retval27 instanceof Object)?this:retval27}}$__R.remainingStack++;if(newTarget)return this};Jsworld.box.change_world=change_world.box;map.box=function funExpr19(a1,f){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app43,app42,i,app41,b,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app43,app42,i,app41,b,newTarget]}var restoreNextFrame=()=>{return funExpr19.call(this,a1,f)};var app41,b,i,app42,app43;try{if($__R.mode){app41=$S.suspend()}else if(target===283)app41=$__R.stack[$__R.stack.length-1].f()}catch(exn265){if(exn265 instanceof $__T.Capture){exn265.stack.push({kind:"rest",f:restoreNextFrame,index:283,this:this});captureLocals(exn265.stack[exn265.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn265}try{if($__R.mode){b=new $S.g.Array(a1.length)}else if(target===284)b=$__R.stack[$__R.stack.length-1].f()}catch(exn266){if(exn266 instanceof $__T.Capture){exn266.stack.push({kind:"rest",f:restoreNextFrame,index:284,this:this});captureLocals(exn266.stack[exn266.stack.length-1])}else{$__R.pushTrace("Line 237: in (anonymous function)")}throw exn266}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===286||target===285))loop_break2:while($__R.mode&&i<a1.length||!$__R.mode&&(target===286||target===285)){if($__R.mode||!$__R.mode&&(target===286||target===285))loop_continue2:{try{if($__R.mode){app42=$S.suspend()}else if(target===285)app42=$__R.stack[$__R.stack.length-1].f()}catch(exn267){if(exn267 instanceof $__T.Capture){exn267.stack.push({kind:"rest",f:restoreNextFrame,index:285,this:this});captureLocals(exn267.stack[exn267.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn267}try{if($__R.mode){app43=f(a1[i])}else if(target===286)app43=$__R.stack[$__R.stack.length-1].f()}catch(exn268){if(exn268 instanceof $__T.Capture){exn268.stack.push({kind:"rest",f:restoreNextFrame,index:286,this:this});captureLocals(exn268.stack[exn268.stack.length-1])}else{$__R.pushTrace("Line 239: in (anonymous function)")}throw exn268}if($__R.mode)b[i]=app43}if($__R.mode)i++}{let retval28=b;$__R.remainingStack++;return newTarget&&!(retval28 instanceof Object)?this:retval28}$__R.remainingStack++;if(newTarget)return this};concat_map.box=function funExpr20(a,f){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app44,b,app45,app46,i,arg1,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app44,b,app45,app46,i,arg1,newTarget]}var restoreNextFrame=()=>{return funExpr20.call(this,a,f)};var app44,b,i,app45,arg1,app46;try{if($__R.mode){app44=$S.suspend()}else if(target===287)app44=$__R.stack[$__R.stack.length-1].f()}catch(exn269){if(exn269 instanceof $__T.Capture){exn269.stack.push({kind:"rest",f:restoreNextFrame,index:287,this:this});captureLocals(exn269.stack[exn269.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn269}if($__R.mode){b=[];i=0}if($__R.mode||!$__R.mode&&(target===290||target===289||target===288))loop_break3:while($__R.mode&&i<a.length||!$__R.mode&&(target===290||target===289||target===288)){if($__R.mode||!$__R.mode&&(target===290||target===289||target===288))loop_continue3:{try{if($__R.mode){app45=$S.suspend()}else if(target===288)app45=$__R.stack[$__R.stack.length-1].f()}catch(exn270){if(exn270 instanceof $__T.Capture){exn270.stack.push({kind:"rest",f:restoreNextFrame,index:288,this:this});captureLocals(exn270.stack[exn270.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn270}try{if($__R.mode){arg1=f(a[i])}else if(target===289)arg1=$__R.stack[$__R.stack.length-1].f()}catch(exn271){if(exn271 instanceof $__T.Capture){exn271.stack.push({kind:"rest",f:restoreNextFrame,index:289,this:this});captureLocals(exn271.stack[exn271.stack.length-1])}else{$__R.pushTrace("Line 247: in (anonymous function)")}throw exn271}try{if($__R.mode){app46=b.concat(arg1)}else if(target===290)app46=$__R.stack[$__R.stack.length-1].f()}catch(exn272){if(exn272 instanceof $__T.Capture){exn272.stack.push({kind:"rest",f:restoreNextFrame,index:290,this:this});captureLocals(exn272.stack[exn272.stack.length-1])}else{$__R.pushTrace("Line 247: in (anonymous function)")}throw exn272}if($__R.mode)b=app46}if($__R.mode)i++}{let retval29=b;$__R.remainingStack++;return newTarget&&!(retval29 instanceof Object)?this:retval29}$__R.remainingStack++;if(newTarget)return this};Jsworld.box.node_to_tree=node_to_tree.box;preorder.box=function funExpr21(node,f){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app63,fun13,app62,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app63,fun13,app62,newTarget]}var restoreNextFrame=()=>{return funExpr21.call(this,node,f)};var app62,fun13,app63;if($__R.mode){f={box:f};node={box:node}}try{if($__R.mode){app62=$S.suspend()}else if(target===291)app62=$__R.stack[$__R.stack.length-1].f()}catch(exn273){if(exn273 instanceof $__T.Capture){exn273.stack.push({kind:"rest",f:restoreNextFrame,index:291,this:this});captureLocals(exn273.stack[exn273.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn273}if($__R.mode)fun13=function funExpr22(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app66,app64,child,nextSibling,app65,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app66,app64,child,nextSibling,app65,newTarget]}var restoreNextFrame=()=>{return funExpr22.call(this)};var app64,child,nextSibling,app65,app66;try{if($__R.mode){app64=$S.suspend()}else if(target===292)app64=$__R.stack[$__R.stack.length-1].f()}catch(exn274){if(exn274 instanceof $__T.Capture){exn274.stack.push({kind:"rest",f:restoreNextFrame,index:292,this:this});captureLocals(exn274.stack[exn274.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn274}if($__R.mode)child=node.box.firstChild;if($__R.mode||!$__R.mode&&(target===294||target===293))loop_break10:while($__R.mode&&child||!$__R.mode&&(target===294||target===293)){if($__R.mode||!$__R.mode&&(target===294||target===293))loop_continue10:{try{if($__R.mode){app65=$S.suspend()}else if(target===293)app65=$__R.stack[$__R.stack.length-1].f()}catch(exn275){if(exn275 instanceof $__T.Capture){exn275.stack.push({kind:"rest",f:restoreNextFrame,index:293,this:this});captureLocals(exn275.stack[exn275.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn275}if($__R.mode)nextSibling=child.nextSibling;try{if($__R.mode){app66=preorder.box(child,f.box)}else if(target===294)app66=$__R.stack[$__R.stack.length-1].f()}catch(exn276){if(exn276 instanceof $__T.Capture){exn276.stack.push({kind:"rest",f:restoreNextFrame,index:294,this:this});captureLocals(exn276.stack[exn276.stack.length-1])}else{$__R.pushTrace("Line 390: in (anonymous function)")}throw exn276}if($__R.mode)child=nextSibling}}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app63=f.box(node.box,fun13)}else if(target===295)app63=$__R.stack[$__R.stack.length-1].f()}catch(exn277){if(exn277 instanceof $__T.Capture){exn277.stack.push({kind:"rest",f:restoreNextFrame,index:295,this:this});captureLocals(exn277.stack[exn277.stack.length-1])}else{$__R.pushTrace("Line 385: in (anonymous function)")}throw exn277}$__R.remainingStack++;if(newTarget)return this};nodeEq.box=function funExpr23(node1,node2){return node1&&node2&&node1===node2};isMemq.box=function funExpr24(x,L){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app69,app68,i,app67,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app69,app68,i,app67,newTarget]}var restoreNextFrame=()=>{return funExpr24.call(this,x,L)};var app67,i,app68,app69;try{if($__R.mode){app67=$S.suspend()}else if(target===296)app67=$__R.stack[$__R.stack.length-1].f()}catch(exn278){if(exn278 instanceof $__T.Capture){exn278.stack.push({kind:"rest",f:restoreNextFrame,index:296,this:this});captureLocals(exn278.stack[exn278.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn278}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===298||target===297))loop_break11:while($__R.mode&&i<L.length||!$__R.mode&&(target===298||target===297)){if($__R.mode||!$__R.mode&&(target===298||target===297))loop_continue11:{try{if($__R.mode){app68=$S.suspend()}else if(target===297)app68=$__R.stack[$__R.stack.length-1].f()}catch(exn279){if(exn279 instanceof $__T.Capture){exn279.stack.push({kind:"rest",f:restoreNextFrame,index:297,this:this});captureLocals(exn279.stack[exn279.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn279}try{if($__R.mode){app69=nodeEq.box(x,L[i])}else if(target===298)app69=$__R.stack[$__R.stack.length-1].f()}catch(exn280){if(exn280 instanceof $__T.Capture){exn280.stack.push({kind:"rest",f:restoreNextFrame,index:298,this:this});captureLocals(exn280.stack[exn280.stack.length-1])}else{$__R.pushTrace("Line 409: in (anonymous function)")}throw exn280}if($__R.mode&&app69){{let retval30=true;$__R.remainingStack++;return newTarget&&!(retval30 instanceof Object)?this:retval30}}}if($__R.mode)i++}{let retval31=false;$__R.remainingStack++;return newTarget&&!(retval31 instanceof Object)?this:retval31}$__R.remainingStack++;if(newTarget)return this};clearCss.box=function funExpr27(node){};fun21=function funExpr33(f,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun78,app251,app252,currentFocusedSelection,app253,app257,fun77,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun78,app251,app252,currentFocusedSelection,app253,app257,fun77,newTarget]}var restoreNextFrame=()=>{return funExpr33.call(this,f,k)};var currentFocusedSelection,app251,app252,fun77,app253,fun78,app257;if($__R.mode){k={box:k};currentFocusedSelection={box:undefined}}try{if($__R.mode){app251=$S.suspend()}else if(target===299)app251=$__R.stack[$__R.stack.length-1].f()}catch(exn281){if(exn281 instanceof $__T.Capture){exn281.stack.push({kind:"rest",f:restoreNextFrame,index:299,this:this});captureLocals(exn281.stack[exn281.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn281}if($__R.mode&&hasCurrentFocusedSelection.box()||!$__R.mode&&(target===305||target===301)){try{if($__R.mode){app252=getCurrentFocusedSelection.box()}else if(target===301)app252=$__R.stack[$__R.stack.length-1].f()}catch(exn282){if(exn282 instanceof $__T.Capture){exn282.stack.push({kind:"rest",f:restoreNextFrame,index:301,this:this});captureLocals(exn282.stack[exn282.stack.length-1])}else{$__R.pushTrace("Line 612: in (anonymous function)")}throw exn282}if($__R.mode){currentFocusedSelection.box=app252;fun77=function funExpr34(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app256,app254,app255,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app256,app254,app255,newTarget]}var restoreNextFrame=()=>{return funExpr34.call(this)};var app254,app255,app256;try{if($__R.mode){app254=$S.suspend()}else if(target===302)app254=$__R.stack[$__R.stack.length-1].f()}catch(exn283){if(exn283 instanceof $__T.Capture){exn283.stack.push({kind:"rest",f:restoreNextFrame,index:302,this:this});captureLocals(exn283.stack[exn283.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn283}try{if($__R.mode){app255=currentFocusedSelection.box.restore()}else if(target===303)app255=$__R.stack[$__R.stack.length-1].f()}catch(exn284){if(exn284 instanceof $__T.Capture){exn284.stack.push({kind:"rest",f:restoreNextFrame,index:303,this:this});captureLocals(exn284.stack[exn284.stack.length-1])}else{$__R.pushTrace("Line 614: in (anonymous function)")}throw exn284}try{if($__R.mode){app256=k.box()}else if(target===304)app256=$__R.stack[$__R.stack.length-1].f()}catch(exn285){if(exn285 instanceof $__T.Capture){exn285.stack.push({kind:"rest",f:restoreNextFrame,index:304,this:this});captureLocals(exn285.stack[exn285.stack.length-1])}else{$__R.pushTrace("Line 615: in (anonymous function)")}throw exn285}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app253=f(fun77)}else if(target===305)app253=$__R.stack[$__R.stack.length-1].f()}catch(exn286){if(exn286 instanceof $__T.Capture){exn286.stack.push({kind:"rest",f:restoreNextFrame,index:305,this:this});captureLocals(exn286.stack[exn286.stack.length-1])}else{$__R.pushTrace("Line 613: in (anonymous function)")}throw exn286}}else if($__R.mode||!$__R.mode&&target===308){if($__R.mode)fun78=function funExpr35(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app259,app258,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app259,app258,newTarget]}var restoreNextFrame=()=>{return funExpr35.call(this)};var app258,app259;try{if($__R.mode){app258=$S.suspend()}else if(target===306)app258=$__R.stack[$__R.stack.length-1].f()}catch(exn287){if(exn287 instanceof $__T.Capture){exn287.stack.push({kind:"rest",f:restoreNextFrame,index:306,this:this});captureLocals(exn287.stack[exn287.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn287}try{if($__R.mode){app259=k.box()}else if(target===307)app259=$__R.stack[$__R.stack.length-1].f()}catch(exn288){if(exn288 instanceof $__T.Capture){exn288.stack.push({kind:"rest",f:restoreNextFrame,index:307,this:this});captureLocals(exn288.stack[exn288.stack.length-1])}else{$__R.pushTrace("Line 618: in (anonymous function)")}throw exn288}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app257=f(fun78)}else if(target===308)app257=$__R.stack[$__R.stack.length-1].f()}catch(exn289){if(exn289 instanceof $__T.Capture){exn289.stack.push({kind:"rest",f:restoreNextFrame,index:308,this:this});captureLocals(exn289.stack[exn289.stack.length-1])}else{$__R.pushTrace("Line 618: in (anonymous function)")}throw exn289}}$__R.remainingStack++;if(newTarget)return this};maintainingSelection.box=fun21;fun22=function funExpr36(){this.focused=currentFocusedNode.box;this.selectionStart=currentFocusedNode.box.selectionStart;this.selectionEnd=currentFocusedNode.box.selectionEnd};FocusedSelection.box=fun22;fun23=function funExpr37(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app262,app260,app261,matching,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app262,app260,app261,matching,newTarget]}var restoreNextFrame=()=>{return funExpr37.call(this)};var app260,app261,matching,app262;try{if($__R.mode){app260=$S.suspend()}else if(target===309)app260=$__R.stack[$__R.stack.length-1].f()}catch(exn290){if(exn290 instanceof $__T.Capture){exn290.stack.push({kind:"rest",f:restoreNextFrame,index:309,this:this});captureLocals(exn290.stack[exn290.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn290}if($__R.mode&&this.focused.parentNode||!$__R.mode&&target===310){if($__R.mode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd}try{if($__R.mode){app261=this.focused.focus()}else if(target===310)app261=$__R.stack[$__R.stack.length-1].f()}catch(exn291){if(exn291 instanceof $__T.Capture){exn291.stack.push({kind:"rest",f:restoreNextFrame,index:310,this:this});captureLocals(exn291.stack[exn291.stack.length-1])}else{$__R.pushTrace("Line 637: in (anonymous function)")}throw exn291}}else if($__R.mode||!$__R.mode&&(target===312||target===311)){if($__R.mode&&this.focused.id||!$__R.mode&&(target===312||target===311)){try{if($__R.mode){matching=$S.g.document.getElementById(this.focused.id)}else if(target===311)matching=$__R.stack[$__R.stack.length-1].f()}catch(exn292){if(exn292 instanceof $__T.Capture){exn292.stack.push({kind:"rest",f:restoreNextFrame,index:311,this:this});captureLocals(exn292.stack[exn292.stack.length-1])}else{$__R.pushTrace("Line 639: in (anonymous function)")}throw exn292}if($__R.mode&&matching||!$__R.mode&&target===312){if($__R.mode){matching.selectionStart=this.selectionStart;matching.selectionEnd=this.selectionEnd}try{if($__R.mode){app262=matching.focus()}else if(target===312)app262=$__R.stack[$__R.stack.length-1].f()}catch(exn293){if(exn293 instanceof $__T.Capture){exn293.stack.push({kind:"rest",f:restoreNextFrame,index:312,this:this});captureLocals(exn293.stack[exn293.stack.length-1])}else{$__R.pushTrace("Line 643: in (anonymous function)")}throw exn293}}}}$__R.remainingStack++;if(newTarget)return this};FocusedSelection.box.prototype.restore=fun23;fun24=function funExpr38(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app265,app263,i,app264,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app265,app263,i,app264,newTarget]}var restoreNextFrame=()=>{return funExpr38.call(this)};var app263,i,app264,app265;try{if($__R.mode){app263=$S.suspend()}else if(target===313)app263=$__R.stack[$__R.stack.length-1].f()}catch(exn294){if(exn294 instanceof $__T.Capture){exn294.stack.push({kind:"rest",f:restoreNextFrame,index:313,this:this});captureLocals(exn294.stack[exn294.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn294}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===315||target===314))loop_break20:while($__R.mode&&i<this.handlers.length||!$__R.mode&&(target===315||target===314)){if($__R.mode||!$__R.mode&&(target===315||target===314))loop_continue20:{try{if($__R.mode){app264=$S.suspend()}else if(target===314)app264=$__R.stack[$__R.stack.length-1].f()}catch(exn295){if(exn295 instanceof $__T.Capture){exn295.stack.push({kind:"rest",f:restoreNextFrame,index:314,this:this});captureLocals(exn295.stack[exn295.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn295}if($__R.mode&&!(this.handlers[i]instanceof StopWhenHandler.box)||!$__R.mode&&target===315){try{if($__R.mode){app265=this.handlers[i].onRegister(this.top)}else if(target===315)app265=$__R.stack[$__R.stack.length-1].f()}catch(exn296){if(exn296 instanceof $__T.Capture){exn296.stack.push({kind:"rest",f:restoreNextFrame,index:315,this:this});captureLocals(exn296.stack[exn296.stack.length-1])}else{$__R.pushTrace("Line 671: in (anonymous function)")}throw exn296}}}if($__R.mode)i++}$__R.remainingStack++;if(newTarget)return this};BigBangRecord.box.prototype.restart=fun24;fun25=function funExpr39(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app268,app266,i,app267,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app268,app266,i,app267,newTarget]}var restoreNextFrame=()=>{return funExpr39.call(this)};var app266,i,app267,app268;try{if($__R.mode){app266=$S.suspend()}else if(target===316)app266=$__R.stack[$__R.stack.length-1].f()}catch(exn297){if(exn297 instanceof $__T.Capture){exn297.stack.push({kind:"rest",f:restoreNextFrame,index:316,this:this});captureLocals(exn297.stack[exn297.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn297}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&(target===318||target===317))loop_break21:while($__R.mode&&i<this.handlers.length||!$__R.mode&&(target===318||target===317)){if($__R.mode||!$__R.mode&&(target===318||target===317))loop_continue21:{try{if($__R.mode){app267=$S.suspend()}else if(target===317)app267=$__R.stack[$__R.stack.length-1].f()}catch(exn298){if(exn298 instanceof $__T.Capture){exn298.stack.push({kind:"rest",f:restoreNextFrame,index:317,this:this});captureLocals(exn298.stack[exn298.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn298}if($__R.mode&&!(this.handlers[i]instanceof StopWhenHandler.box)||!$__R.mode&&target===318){try{if($__R.mode){app268=this.handlers[i].onUnregister(this.top)}else if(target===318)app268=$__R.stack[$__R.stack.length-1].f()}catch(exn299){if(exn299 instanceof $__T.Capture){exn299.stack.push({kind:"rest",f:restoreNextFrame,index:318,this:this});captureLocals(exn299.stack[exn299.stack.length-1])}else{$__R.pushTrace("Line 680: in (anonymous function)")}throw exn299}}}if($__R.mode)i++}$__R.remainingStack++;if(newTarget)return this};BigBangRecord.box.prototype.pause=fun25;fun26=function funExpr40(top,init_world,handlerCreators,attribs,succ,fail,extras){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun79,activationRecord,app290,i,app280,app291,handlers,app270,app281,watchForTermination,app271,app272,app273,app274,app275,app278,app289,app279,app269,fun80,fun81,fun83,keepRecordUpToDate,stopWhen,thisWorldIndex,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun79,activationRecord,app290,i,app280,app291,handlers,app270,app281,watchForTermination,app271,app272,app273,app274,app275,app278,app289,app279,app269,fun80,fun81,fun83,keepRecordUpToDate,stopWhen,thisWorldIndex,newTarget]}var restoreNextFrame=()=>{return funExpr40.call(this,top,init_world,handlerCreators,attribs,succ,fail,extras)};var thisWorldIndex,activationRecord,keepRecordUpToDate,stopWhen,app269,app270,i,fun79,handlers,app271,app272,app273,app274,app275,app278,app279,fun80,fun81,app280,app281,watchForTermination,app289,app290,fun83,app291;if($__R.mode){extras={box:extras};init_world={box:init_world};thisWorldIndex={box:undefined};activationRecord={box:undefined};keepRecordUpToDate={box:undefined};stopWhen={box:undefined};keepRecordUpToDate.box=function fun108(w,oldW,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app277,app276,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app277,app276,newTarget]}var restoreNextFrame=()=>{return fun108.call(this,w,oldW,k2)};var app276,app277;try{if($__R.mode){app276=$S.suspend()}else if(target===319)app276=$__R.stack[$__R.stack.length-1].f()}catch(exn300){if(exn300 instanceof $__T.Capture){exn300.stack.push({kind:"rest",f:restoreNextFrame,index:319,this:this});captureLocals(exn300.stack[exn300.stack.length-1])}else{$__R.pushTrace(": in keepRecordUpToDate")}throw exn300}if($__R.mode)activationRecord.box.world=w;try{if($__R.mode){app277=k2()}else if(target===320)app277=$__R.stack[$__R.stack.length-1].f()}catch(exn301){if(exn301 instanceof $__T.Capture){exn301.stack.push({kind:"rest",f:restoreNextFrame,index:320,this:this});captureLocals(exn301.stack[exn301.stack.length-1])}else{$__R.pushTrace("Line 721: in keepRecordUpToDate")}throw exn301}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app269=$S.suspend()}else if(target===321)app269=$__R.stack[$__R.stack.length-1].f()}catch(exn302){if(exn302 instanceof $__T.Capture){exn302.stack.push({kind:"rest",f:restoreNextFrame,index:321,this:this});captureLocals(exn302.stack[exn302.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn302}try{if($__R.mode){thisWorldIndex.box=getNewWorldIndex.box()}else if(target===322)thisWorldIndex.box=$__R.stack[$__R.stack.length-1].f()}catch(exn303){if(exn303 instanceof $__T.Capture){exn303.stack.push({kind:"rest",f:restoreNextFrame,index:322,this:this});captureLocals(exn303.stack[exn303.stack.length-1])}else{$__R.pushTrace("Line 697: in (anonymous function)")}throw exn303}try{if($__R.mode){app270=worldIndexStack.box.push(thisWorldIndex.box)}else if(target===323)app270=$__R.stack[$__R.stack.length-1].f()}catch(exn304){if(exn304 instanceof $__T.Capture){exn304.stack.push({kind:"rest",f:restoreNextFrame,index:323,this:this});captureLocals(exn304.stack[exn304.stack.length-1])}else{$__R.pushTrace("Line 698: in (anonymous function)")}throw exn304}if($__R.mode){worldIndex.box=thisWorldIndex.box;fun79=function funExpr41(x){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app292,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app292,newTarget]}var restoreNextFrame=()=>{return funExpr41.call(this,x)};var app292;try{if($__R.mode){app292=$S.suspend()}else if(target===324)app292=$__R.stack[$__R.stack.length-1].f()}catch(exn305){if(exn305 instanceof $__T.Capture){exn305.stack.push({kind:"rest",f:restoreNextFrame,index:324,this:this});captureLocals(exn305.stack[exn305.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn305}if($__R.mode)$__R.remainingStack++;if($__R.mode)return x(thisWorldIndex.box);else;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){handlers=map.box(handlerCreators,fun79)}else if(target===326)handlers=$__R.stack[$__R.stack.length-1].f()}catch(exn306){if(exn306 instanceof $__T.Capture){exn306.stack.push({kind:"rest",f:restoreNextFrame,index:326,this:this});captureLocals(exn306.stack[exn306.stack.length-1])}else{$__R.pushTrace("Line 704: in (anonymous function)")}throw exn306}if($__R.mode&&runningBigBangs.box.length>0||!$__R.mode&&target===327){try{if($__R.mode){app271=runningBigBangs.box[runningBigBangs.box.length-1].pause()}else if(target===327)app271=$__R.stack[$__R.stack.length-1].f()}catch(exn307){if(exn307 instanceof $__T.Capture){exn307.stack.push({kind:"rest",f:restoreNextFrame,index:327,this:this});captureLocals(exn307.stack[exn307.stack.length-1])}else{$__R.pushTrace("Line 706: in (anonymous function)")}throw exn307}}try{if($__R.mode){app272=changingWorld.box.push(false)}else if(target===328)app272=$__R.stack[$__R.stack.length-1].f()}catch(exn308){if(exn308 instanceof $__T.Capture){exn308.stack.push({kind:"rest",f:restoreNextFrame,index:328,this:this});captureLocals(exn308.stack[exn308.stack.length-1])}else{$__R.pushTrace("Line 708: in (anonymous function)")}throw exn308}if($__R.mode)worldListeners.box=[];try{if($__R.mode){app273=worldListenersStack.box.push(worldListeners.box)}else if(target===329)app273=$__R.stack[$__R.stack.length-1].f()}catch(exn309){if(exn309 instanceof $__T.Capture){exn309.stack.push({kind:"rest",f:restoreNextFrame,index:329,this:this});captureLocals(exn309.stack[exn309.stack.length-1])}else{$__R.pushTrace("Line 710: in (anonymous function)")}throw exn309}if($__R.mode)eventDetachers.box=[];try{if($__R.mode){app274=eventDetachersStack.box.push(eventDetachers.box)}else if(target===330)app274=$__R.stack[$__R.stack.length-1].f()}catch(exn310){if(exn310 instanceof $__T.Capture){exn310.stack.push({kind:"rest",f:restoreNextFrame,index:330,this:this});captureLocals(exn310.stack[exn310.stack.length-1])}else{$__R.pushTrace("Line 712: in (anonymous function)")}throw exn310}if($__R.mode)activationRecord.box=new BigBangRecord.box(top,init_world.box,handlerCreators,handlers,attribs,succ,fail);try{if($__R.mode){app275=runningBigBangs.box.push(activationRecord.box)}else if(target===332)app275=$__R.stack[$__R.stack.length-1].f()}catch(exn311){if(exn311 instanceof $__T.Capture){exn311.stack.push({kind:"rest",f:restoreNextFrame,index:332,this:this});captureLocals(exn311.stack[exn311.stack.length-1])}else{$__R.pushTrace("Line 718: in (anonymous function)")}throw exn311}try{if($__R.mode){app278=add_world_listener.box(keepRecordUpToDate.box)}else if(target===333)app278=$__R.stack[$__R.stack.length-1].f()}catch(exn312){if(exn312 instanceof $__T.Capture){exn312.stack.push({kind:"rest",f:restoreNextFrame,index:333,this:this});captureLocals(exn312.stack[exn312.stack.length-1])}else{$__R.pushTrace("Line 723: in (anonymous function)")}throw exn312}if($__R.mode&&typeof extras.box.tracer==="function"||!$__R.mode&&target===334){try{if($__R.mode){app279=add_world_listener.box(extras.box.tracer)}else if(target===334)app279=$__R.stack[$__R.stack.length-1].f()}catch(exn313){if(exn313 instanceof $__T.Capture){exn313.stack.push({kind:"rest",f:restoreNextFrame,index:334,this:this});captureLocals(exn313.stack[exn313.stack.length-1])}else{$__R.pushTrace("Line 726: in (anonymous function)")}throw exn313}}if($__R.mode){fun80=function funExpr42(w,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app294,app293,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app294,app293,newTarget]}var restoreNextFrame=()=>{return funExpr42.call(this,w,k2)};var app293,app294;try{if($__R.mode){app293=$S.suspend()}else if(target===335)app293=$__R.stack[$__R.stack.length-1].f()}catch(exn314){if(exn314 instanceof $__T.Capture){exn314.stack.push({kind:"rest",f:restoreNextFrame,index:335,this:this});captureLocals(exn314.stack[exn314.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn314}try{if($__R.mode){app294=k2(false)}else if(target===336)app294=$__R.stack[$__R.stack.length-1].f()}catch(exn315){if(exn315 instanceof $__T.Capture){exn315.stack.push({kind:"rest",f:restoreNextFrame,index:336,this:this});captureLocals(exn315.stack[exn315.stack.length-1])}else{$__R.pushTrace("Line 732: in (anonymous function)")}throw exn315}$__R.remainingStack++;if(newTarget)return this};fun81=function funExpr43(w,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app296,app295,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app296,app295,newTarget]}var restoreNextFrame=()=>{return funExpr43.call(this,w,k2)};var app295,app296;try{if($__R.mode){app295=$S.suspend()}else if(target===337)app295=$__R.stack[$__R.stack.length-1].f()}catch(exn316){if(exn316 instanceof $__T.Capture){exn316.stack.push({kind:"rest",f:restoreNextFrame,index:337,this:this});captureLocals(exn316.stack[exn316.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn316}try{if($__R.mode){app296=k2(w)}else if(target===338)app296=$__R.stack[$__R.stack.length-1].f()}catch(exn317){if(exn317 instanceof $__T.Capture){exn317.stack.push({kind:"rest",f:restoreNextFrame,index:338,this:this});captureLocals(exn317.stack[exn317.stack.length-1])}else{$__R.pushTrace("Line 733: in (anonymous function)")}throw exn317}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){stopWhen.box=new StopWhenHandler.box(fun80,fun81)}else if(target===339)stopWhen.box=$__R.stack[$__R.stack.length-1].f()}catch(exn318){if(exn318 instanceof $__T.Capture){exn318.stack.push({kind:"rest",f:restoreNextFrame,index:339,this:this});captureLocals(exn318.stack[exn318.stack.length-1])}else{$__R.pushTrace("Line 732: in (anonymous function)")}throw exn318}if($__R.mode)i=0;if($__R.mode||!$__R.mode&&target===340)loop_break22:while($__R.mode&&i<handlers.length||!$__R.mode&&target===340){if($__R.mode||!$__R.mode&&target===340)loop_continue22:{try{if($__R.mode){app280=$S.suspend()}else if(target===340)app280=$__R.stack[$__R.stack.length-1].f()}catch(exn319){if(exn319 instanceof $__T.Capture){exn319.stack.push({kind:"rest",f:restoreNextFrame,index:340,this:this});captureLocals(exn319.stack[exn319.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn319}if($__R.mode&&handlers[i]instanceof StopWhenHandler.box){if($__R.mode)stopWhen.box=handlers[i]}}if($__R.mode)i++}try{if($__R.mode){app281=activationRecord.box.restart()}else if(target===341)app281=$__R.stack[$__R.stack.length-1].f()}catch(exn320){if(exn320 instanceof $__T.Capture){exn320.stack.push({kind:"rest",f:restoreNextFrame,index:341,this:this});captureLocals(exn320.stack[exn320.stack.length-1])}else{$__R.pushTrace("Line 739: in (anonymous function)")}throw exn320}if($__R.mode)watchForTermination=function funExpr44(w,oldW,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app283,fun82,app282,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app283,fun82,app282,newTarget]}var restoreNextFrame=()=>{return funExpr44.call(this,w,oldW,k2)};var app282,fun82,app283;if($__R.mode)k2={box:k2};try{if($__R.mode){app282=$S.suspend()}else if(target===342)app282=$__R.stack[$__R.stack.length-1].f()}catch(exn321){if(exn321 instanceof $__T.Capture){exn321.stack.push({kind:"rest",f:restoreNextFrame,index:342,this:this});captureLocals(exn321.stack[exn321.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn321}if($__R.mode&&thisWorldIndex.box!=worldIndex.box){{let retval32;$__R.remainingStack++;return newTarget&&!(retval32 instanceof Object)?this:retval32}}if($__R.mode)fun82=function funExpr45(stop){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app288,app287,app284,app285,app286,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app288,app287,app284,app285,app286,newTarget]}var restoreNextFrame=()=>{return funExpr45.call(this,stop)};var app284,app285,app286,app287,app288;try{if($__R.mode){app284=$S.suspend()}else if(target===343)app284=$__R.stack[$__R.stack.length-1].f()}catch(exn322){if(exn322 instanceof $__T.Capture){exn322.stack.push({kind:"rest",f:restoreNextFrame,index:343,this:this});captureLocals(exn322.stack[exn322.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn322}if($__R.mode&&!stop||!$__R.mode&&target===344){try{if($__R.mode){app285=k2.box()}else if(target===344)app285=$__R.stack[$__R.stack.length-1].f()}catch(exn323){if(exn323 instanceof $__T.Capture){exn323.stack.push({kind:"rest",f:restoreNextFrame,index:344,this:this});captureLocals(exn323.stack[exn323.stack.length-1])}else{$__R.pushTrace("Line 745: in (anonymous function)")}throw exn323}}else if($__R.mode||!$__R.mode&&(target===347||target===346||target===345)){if($__R.mode&&extras.box.closeWhenStop||!$__R.mode&&(target===346||target===345)){if($__R.mode&&extras.box.closeBigBangWindow||!$__R.mode&&target===345){try{if($__R.mode){app286=extras.box.closeBigBangWindow()}else if(target===345)app286=$__R.stack[$__R.stack.length-1].f()}catch(exn324){if(exn324 instanceof $__T.Capture){exn324.stack.push({kind:"rest",f:restoreNextFrame,index:345,this:this});captureLocals(exn324.stack[exn324.stack.length-1])}else{$__R.pushTrace("Line 749: in (anonymous function)")}throw exn324}}try{if($__R.mode){app287=Jsworld.box.shutdownSingle({cleanShutdown:true})}else if(target===346)app287=$__R.stack[$__R.stack.length-1].f()}catch(exn325){if(exn325 instanceof $__T.Capture){exn325.stack.push({kind:"rest",f:restoreNextFrame,index:346,this:this});captureLocals(exn325.stack[exn325.stack.length-1])}else{$__R.pushTrace("Line 751: in (anonymous function)")}throw exn325}}else if($__R.mode||!$__R.mode&&target===347){try{if($__R.mode){app288=activationRecord.box.pause()}else if(target===347)app288=$__R.stack[$__R.stack.length-1].f()}catch(exn326){if(exn326 instanceof $__T.Capture){exn326.stack.push({kind:"rest",f:restoreNextFrame,index:347,this:this});captureLocals(exn326.stack[exn326.stack.length-1])}else{$__R.pushTrace("Line 753: in (anonymous function)")}throw exn326}}}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app283=stopWhen.box.test(w,fun82)}else if(target===348)app283=$__R.stack[$__R.stack.length-1].f()}catch(exn327){if(exn327 instanceof $__T.Capture){exn327.stack.push({kind:"rest",f:restoreNextFrame,index:348,this:this});captureLocals(exn327.stack[exn327.stack.length-1])}else{$__R.pushTrace("Line 742: in (anonymous function)")}throw exn327}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app289=add_world_listener.box(watchForTermination)}else if(target===349)app289=$__R.stack[$__R.stack.length-1].f()}catch(exn328){if(exn328 instanceof $__T.Capture){exn328.stack.push({kind:"rest",f:restoreNextFrame,index:349,this:this});captureLocals(exn328.stack[exn328.stack.length-1])}else{$__R.pushTrace("Line 758: in (anonymous function)")}throw exn328}try{if($__R.mode){app290=copy_attribs.box(top,attribs)}else if(target===350)app290=$__R.stack[$__R.stack.length-1].f()}catch(exn329){if(exn329 instanceof $__T.Capture){exn329.stack.push({kind:"rest",f:restoreNextFrame,index:350,this:this});captureLocals(exn329.stack[exn329.stack.length-1])}else{$__R.pushTrace("Line 762: in (anonymous function)")}throw exn329}if($__R.mode)fun83=function funExpr46(w,k2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app298,app297,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app298,app297,newTarget]}var restoreNextFrame=()=>{return funExpr46.call(this,w,k2)};var app297,app298;try{if($__R.mode){app297=$S.suspend()}else if(target===351)app297=$__R.stack[$__R.stack.length-1].f()}catch(exn330){if(exn330 instanceof $__T.Capture){exn330.stack.push({kind:"rest",f:restoreNextFrame,index:351,this:this});captureLocals(exn330.stack[exn330.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn330}try{if($__R.mode){app298=k2(init_world.box)}else if(target===352)app298=$__R.stack[$__R.stack.length-1].f()}catch(exn331){if(exn331 instanceof $__T.Capture){exn331.stack.push({kind:"rest",f:restoreNextFrame,index:352,this:this});captureLocals(exn331.stack[exn331.stack.length-1])}else{$__R.pushTrace("Line 763: in (anonymous function)")}throw exn331}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app291=change_world.box(fun83,doNothing.box)}else if(target===353)app291=$__R.stack[$__R.stack.length-1].f()}catch(exn332){if(exn332 instanceof $__T.Capture){exn332.stack.push({kind:"rest",f:restoreNextFrame,index:353,this:this});captureLocals(exn332.stack[exn332.stack.length-1])}else{$__R.pushTrace("Line 763: in (anonymous function)")}throw exn332}$__R.remainingStack++;if(newTarget)return this};bigBang=fun26;Jsworld.box.bigBang=bigBang;on_tick=function funExpr47(delay,tick){var fun27;tick={box:tick};delay={box:delay};fun27=function funExpr48(thisWorldIndex){var scheduleTick,ticker,fun28,fun29,fun30;thisWorldIndex={box:thisWorldIndex};scheduleTick={box:undefined};ticker={box:undefined};fun28=function funExpr49(t){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app125,fun31,app124,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app125,fun31,app124,newTarget]}var restoreNextFrame=()=>{return funExpr49.call(this,t)};var app124,fun31,app125;try{if($__R.mode){app124=$S.suspend()}else if(target===354)app124=$__R.stack[$__R.stack.length-1].f()}catch(exn333){if(exn333 instanceof $__T.Capture){exn333.stack.push({kind:"rest",f:restoreNextFrame,index:354,this:this});captureLocals(exn333.stack[exn333.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn333}if($__R.mode)fun31=function funExpr50(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app128,startTime,app126,app127,fun32,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app128,startTime,app126,app127,fun32,newTarget]}var restoreNextFrame=()=>{return funExpr50.call(this)};var startTime,app126,app127,fun32,app128;if($__R.mode)startTime={box:undefined};try{if($__R.mode){app126=$S.suspend()}else if(target===355)app126=$__R.stack[$__R.stack.length-1].f()}catch(exn334){if(exn334 instanceof $__T.Capture){exn334.stack.push({kind:"rest",f:restoreNextFrame,index:355,this:this});captureLocals(exn334.stack[exn334.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn334}if($__R.mode&&thisWorldIndex.box!=worldIndex.box){{let retval33;$__R.remainingStack++;return newTarget&&!(retval33 instanceof Object)?this:retval33}}if($__R.mode)ticker.box.watchId=$S.g.undefined;try{if($__R.mode){app127=new $S.g.Date}else if(target===356)app127=$__R.stack[$__R.stack.length-1].f()}catch(exn335){if(exn335 instanceof $__T.Capture){exn335.stack.push({kind:"rest",f:restoreNextFrame,index:356,this:this});captureLocals(exn335.stack[exn335.stack.length-1])}else{$__R.pushTrace("Line 779: in (anonymous function)")}throw exn335}try{if($__R.mode){startTime.box=app127.valueOf()}else if(target===357)startTime.box=$__R.stack[$__R.stack.length-1].f()}catch(exn336){if(exn336 instanceof $__T.Capture){exn336.stack.push({kind:"rest",f:restoreNextFrame,index:357,this:this});captureLocals(exn336.stack[exn336.stack.length-1])}else{$__R.pushTrace("Line 779: in (anonymous function)")}throw exn336}if($__R.mode)fun32=function funExpr51(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app131,app129,app130,endTime,arg17,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app131,app129,app130,endTime,arg17,newTarget]}var restoreNextFrame=()=>{return funExpr51.call(this)};var app129,app130,endTime,arg17,app131;try{if($__R.mode){app129=$S.suspend()}else if(target===358)app129=$__R.stack[$__R.stack.length-1].f()}catch(exn337){if(exn337 instanceof $__T.Capture){exn337.stack.push({kind:"rest",f:restoreNextFrame,index:358,this:this});captureLocals(exn337.stack[exn337.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn337}try{if($__R.mode){app130=new $S.g.Date}else if(target===359)app130=$__R.stack[$__R.stack.length-1].f()}catch(exn338){if(exn338 instanceof $__T.Capture){exn338.stack.push({kind:"rest",f:restoreNextFrame,index:359,this:this});captureLocals(exn338.stack[exn338.stack.length-1])}else{$__R.pushTrace("Line 782: in (anonymous function)")}throw exn338}try{if($__R.mode){endTime=app130.valueOf()}else if(target===360)endTime=$__R.stack[$__R.stack.length-1].f()}catch(exn339){if(exn339 instanceof $__T.Capture){exn339.stack.push({kind:"rest",f:restoreNextFrame,index:360,this:this});captureLocals(exn339.stack[exn339.stack.length-1])}else{$__R.pushTrace("Line 782: in (anonymous function)")}throw exn339}try{if($__R.mode){arg17=$S.g.Math.max(delay.box-(endTime-startTime.box),0)}else if(target===361)arg17=$__R.stack[$__R.stack.length-1].f()}catch(exn340){if(exn340 instanceof $__T.Capture){exn340.stack.push({kind:"rest",f:restoreNextFrame,index:361,this:this});captureLocals(exn340.stack[exn340.stack.length-1])}else{$__R.pushTrace("Line 783: in (anonymous function)")}throw exn340}try{if($__R.mode){app131=scheduleTick.box(arg17)}else if(target===362)app131=$__R.stack[$__R.stack.length-1].f()}catch(exn341){if(exn341 instanceof $__T.Capture){exn341.stack.push({kind:"rest",f:restoreNextFrame,index:362,this:this});captureLocals(exn341.stack[exn341.stack.length-1])}else{$__R.pushTrace("Line 783: in (anonymous function)")}throw exn341}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app128=change_world.box(tick.box,fun32)}else if(target===363)app128=$__R.stack[$__R.stack.length-1].f()}catch(exn342){if(exn342 instanceof $__T.Capture){exn342.stack.push({kind:"rest",f:restoreNextFrame,index:363,this:this});captureLocals(exn342.stack[exn342.stack.length-1])}else{$__R.pushTrace("Line 780: in (anonymous function)")}throw exn342}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app125=$S.g.setTimeout.call(void 0,fun31,t)}else if(target===364)app125=$__R.stack[$__R.stack.length-1].f()}catch(exn343){if(exn343 instanceof $__T.Capture){exn343.stack.push({kind:"rest",f:restoreNextFrame,index:364,this:this});captureLocals(exn343.stack[exn343.stack.length-1])}else{$__R.pushTrace("Line 775: in (anonymous function)")}throw exn343}if($__R.mode)ticker.box.watchId=app125;$__R.remainingStack++;if(newTarget)return this};scheduleTick.box=fun28;fun29=function funExpr52(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app133,app132,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app133,app132,newTarget]}var restoreNextFrame=()=>{return funExpr52.call(this,top)};var app132,app133;try{if($__R.mode){app132=$S.suspend()}else if(target===365)app132=$__R.stack[$__R.stack.length-1].f()}catch(exn344){if(exn344 instanceof $__T.Capture){exn344.stack.push({kind:"rest",f:restoreNextFrame,index:365,this:this});captureLocals(exn344.stack[exn344.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn344}try{if($__R.mode){app133=scheduleTick.box(delay.box)}else if(target===366)app133=$__R.stack[$__R.stack.length-1].f()}catch(exn345){if(exn345 instanceof $__T.Capture){exn345.stack.push({kind:"rest",f:restoreNextFrame,index:366,this:this});captureLocals(exn345.stack[exn345.stack.length-1])}else{$__R.pushTrace("Line 793: in (anonymous function)")}throw exn345}$__R.remainingStack++;if(newTarget)return this};fun30=function funExpr53(top){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app135,app134,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app135,app134,newTarget]}var restoreNextFrame=()=>{return funExpr53.call(this,top)};var app134,app135;try{if($__R.mode){app134=$S.suspend()}else if(target===367)app134=$__R.stack[$__R.stack.length-1].f()}catch(exn346){if(exn346 instanceof $__T.Capture){exn346.stack.push({kind:"rest",f:restoreNextFrame,index:367,this:this});captureLocals(exn346.stack[exn346.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn346}if($__R.mode&&ticker.box.watchId||!$__R.mode&&target===368){try{if($__R.mode){app135=$S.g.clearTimeout.call(void 0,ticker.box.watchId)}else if(target===368)app135=$__R.stack[$__R.stack.length-1].f()}catch(exn347){if(exn347 instanceof $__T.Capture){exn347.stack.push({kind:"rest",f:restoreNextFrame,index:368,this:this});captureLocals(exn347.stack[exn347.stack.length-1])}else{$__R.pushTrace("Line 798: in (anonymous function)")}throw exn347}}$__R.remainingStack++;if(newTarget)return this};ticker.box={watchId:-1,onRegister:fun29,onUnregister:fun30};return ticker.box};return fun27};Jsworld.box.on_tick=on_tick;Jsworld.box.on_key=on_key.box;Jsworld.box.on_mouse=on_mouse.box;Jsworld.box.on_draw=on_draw.box;fun48=function funExpr72(test,receiver){this.test=test;this.receiver=receiver};StopWhenHandler.box=fun48;Jsworld.box.stop_when=stop_when.box;Jsworld.box.on_world_change=on_world_change.box;fun54=function funExpr79(node,eventName,fn){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app301,app300,app299,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app301,app300,app299,newTarget]}var restoreNextFrame=()=>{return funExpr79.call(this,node,eventName,fn)};var app299,app300,app301;try{if($__R.mode){app299=$S.suspend()}else if(target===369)app299=$__R.stack[$__R.stack.length-1].f()}catch(exn348){if(exn348 instanceof $__T.Capture){exn348.stack.push({kind:"rest",f:restoreNextFrame,index:369,this:this});captureLocals(exn348.stack[exn348.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn348}if($__R.mode&&node.addEventListener||!$__R.mode&&target===370){try{if($__R.mode){app300=node.addEventListener(eventName,fn,false)}else if(target===370)app300=$__R.stack[$__R.stack.length-1].f()}catch(exn349){if(exn349 instanceof $__T.Capture){exn349.stack.push({kind:"rest",f:restoreNextFrame,index:370,this:this});captureLocals(exn349.stack[exn349.stack.length-1])}else{$__R.pushTrace("Line 977: in (anonymous function)")}throw exn349}}else if($__R.mode||!$__R.mode&&target===371){try{if($__R.mode){app301=node.attachEvent("on"+eventName,fn,false)}else if(target===371)app301=$__R.stack[$__R.stack.length-1].f()}catch(exn350){if(exn350 instanceof $__T.Capture){exn350.stack.push({kind:"rest",f:restoreNextFrame,index:371,this:this});captureLocals(exn350.stack[exn350.stack.length-1])}else{$__R.pushTrace("Line 980: in (anonymous function)")}throw exn350}}$__R.remainingStack++;if(newTarget)return this};attachEvent.box=fun54;fun55=function funExpr80(node,eventName,fn){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app304,app303,app302,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app304,app303,app302,newTarget]}var restoreNextFrame=()=>{return funExpr80.call(this,node,eventName,fn)};var app302,app303,app304;try{if($__R.mode){app302=$S.suspend()}else if(target===372)app302=$__R.stack[$__R.stack.length-1].f()}catch(exn351){if(exn351 instanceof $__T.Capture){exn351.stack.push({kind:"rest",f:restoreNextFrame,index:372,this:this});captureLocals(exn351.stack[exn351.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn351}if($__R.mode&&node.addEventListener||!$__R.mode&&target===373){try{if($__R.mode){app303=node.removeEventListener(eventName,fn,false)}else if(target===373)app303=$__R.stack[$__R.stack.length-1].f()}catch(exn352){if(exn352 instanceof $__T.Capture){exn352.stack.push({kind:"rest",f:restoreNextFrame,index:373,this:this});captureLocals(exn352.stack[exn352.stack.length-1])}else{$__R.pushTrace("Line 987: in (anonymous function)")}throw exn352}}else if($__R.mode||!$__R.mode&&target===374){try{if($__R.mode){app304=node.detachEvent("on"+eventName,fn,false)}else if(target===374)app304=$__R.stack[$__R.stack.length-1].f()}catch(exn353){if(exn353 instanceof $__T.Capture){exn353.stack.push({kind:"rest",f:restoreNextFrame,index:374,this:this});captureLocals(exn353.stack[exn353.stack.length-1])}else{$__R.pushTrace("Line 990: in (anonymous function)")}throw exn353}}$__R.remainingStack++;if(newTarget)return this};detachEvent.box=fun55;fun63=function funExpr90(sexp){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[element3,arg44,app305,element2,arg43,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[element3,arg44,app305,element2,arg43,newTarget]}var restoreNextFrame=()=>{return funExpr90.call(this,sexp)};var app305,element2,arg43,arg44,element3;try{if($__R.mode){app305=$S.suspend()}else if(target===375)app305=$__R.stack[$__R.stack.length-1].f()}catch(exn354){if(exn354 instanceof $__T.Capture){exn354.stack.push({kind:"rest",f:restoreNextFrame,index:375,this:this});captureLocals(exn354.stack[exn354.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn354}if($__R.mode&&sexp.length===$S.g.undefined){{let retval34={node:sexp,children:[]};$__R.remainingStack++;return newTarget&&!(retval34 instanceof Object)?this:retval34}}else if($__R.mode||!$__R.mode&&(target===377||target===376)){if($__R.mode)element2=sexp[0];try{if($__R.mode){arg43=sexp.slice(1)}else if(target===376)arg43=$__R.stack[$__R.stack.length-1].f()}catch(exn355){if(exn355 instanceof $__T.Capture){exn355.stack.push({kind:"rest",f:restoreNextFrame,index:376,this:this});captureLocals(exn355.stack[exn355.stack.length-1])}else{$__R.pushTrace("Line 1042: in (anonymous function)")}throw exn355}if($__R.mode)arg44=sexp2tree.box;try{if($__R.mode){element3=map.box(arg43,arg44)}else if(target===377)element3=$__R.stack[$__R.stack.length-1].f()}catch(exn356){if(exn356 instanceof $__T.Capture){exn356.stack.push({kind:"rest",f:restoreNextFrame,index:377,this:this});captureLocals(exn356.stack[exn356.stack.length-1])}else{$__R.pushTrace("Line 1042: in (anonymous function)")}throw exn356}{let retval35={node:element2,children:element3};$__R.remainingStack++;return newTarget&&!(retval35 instanceof Object)?this:retval35}}$__R.remainingStack++;if(newTarget)return this};sexp2tree.box=fun63;fun65=function funExpr92(sexp){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app306,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app306,newTarget]}var restoreNextFrame=()=>{return funExpr92.call(this,sexp)};var app306;try{if($__R.mode){app306=$S.suspend()}else if(target===378)app306=$__R.stack[$__R.stack.length-1].f()}catch(exn357){if(exn357 instanceof $__T.Capture){exn357.stack.push({kind:"rest",f:restoreNextFrame,index:378,this:this});captureLocals(exn357.stack[exn357.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn357}if($__R.mode)$__R.remainingStack++;if($__R.mode)return concat_map.box(sexp,sexp2css_node.box);else;$__R.remainingStack++;if(newTarget)return this};sexp2css.box=fun65;throwDomError.box=function funExpr93(thing,topThing){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app217,app216,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app217,app216,newTarget]}var restoreNextFrame=()=>{return funExpr93.call(this,thing,topThing)};var app216,app217;try{if($__R.mode){app216=$S.suspend()}else if(target===380)app216=$__R.stack[$__R.stack.length-1].f()}catch(exn358){if(exn358 instanceof $__T.Capture){exn358.stack.push({kind:"rest",f:restoreNextFrame,index:380,this:this});captureLocals(exn358.stack[exn358.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn358}try{if($__R.mode){app217=new JsworldDomError.box("Expected a non-empty array, received "+thing+" within "+topThing,thing)}else if(target===381)app217=$__R.stack[$__R.stack.length-1].f()}catch(exn359){if(exn359 instanceof $__T.Capture){exn359.stack.push({kind:"rest",f:restoreNextFrame,index:381,this:this});captureLocals(exn359.stack[exn359.stack.length-1])}else{$__R.pushTrace("Line 1078: in (anonymous function)")}throw exn359}if($__R.mode)$__R.pushTrace("Line 1078: in (anonymous function)");throw app217;$__R.remainingStack++;if(newTarget)return this};fun66=function funExpr94(thing,topThing){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[i,app310,app311,app312,app313,app314,app307,app308,app309,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[i,app310,app311,app312,app313,app314,app307,app308,app309,newTarget]}var restoreNextFrame=()=>{return funExpr94.call(this,thing,topThing)};var app307,i,app308,app309,app310,app311,app312,app313,app314;try{if($__R.mode){app307=$S.suspend()}else if(target===382)app307=$__R.stack[$__R.stack.length-1].f()}catch(exn360){if(exn360 instanceof $__T.Capture){exn360.stack.push({kind:"rest",f:restoreNextFrame,index:382,this:this});captureLocals(exn360.stack[exn360.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn360}if($__R.mode&&!thing instanceof $S.g.Array||!$__R.mode&&target===383){try{if($__R.mode){app308=throwDomError.box(thing,topThing)}else if(target===383)app308=$__R.stack[$__R.stack.length-1].f()}catch(exn361){if(exn361 instanceof $__T.Capture){exn361.stack.push({kind:"rest",f:restoreNextFrame,index:383,this:this});captureLocals(exn361.stack[exn361.stack.length-1])}else{$__R.pushTrace("Line 1089: in (anonymous function)")}throw exn361}}if($__R.mode&&thing.length===0||!$__R.mode&&target===384){try{if($__R.mode){app309=throwDomError.box(thing,topThing)}else if(target===384)app309=$__R.stack[$__R.stack.length-1].f()}catch(exn362){if(exn362 instanceof $__T.Capture){exn362.stack.push({kind:"rest",f:restoreNextFrame,index:384,this:this});captureLocals(exn362.stack[exn362.stack.length-1])}else{$__R.pushTrace("Line 1092: in (anonymous function)")}throw exn362}}if($__R.mode&&isTextNode.box(thing[0])||!$__R.mode&&target===386){if($__R.mode&&thing.length>1||!$__R.mode&&target===386){try{if($__R.mode){app310=new JsworldDomError.box("Text node "+thing+" can not have children",thing)}else if(target===386)app310=$__R.stack[$__R.stack.length-1].f()}catch(exn363){if(exn363 instanceof $__T.Capture){exn363.stack.push({kind:"rest",f:restoreNextFrame,index:386,this:this});captureLocals(exn363.stack[exn363.stack.length-1])}else{$__R.pushTrace("Line 1099: in (anonymous function)")}throw exn363}if($__R.mode)$__R.pushTrace("Line 1099: in (anonymous function)");throw app310}}else if($__R.mode||!$__R.mode&&(target===391||target===390||target===389||target===388)){if($__R.mode&&isElementNode.box(thing[0])||!$__R.mode&&(target===389||target===388)){if($__R.mode)i=1;if($__R.mode||!$__R.mode&&(target===389||target===388))loop_break24:while($__R.mode&&i<thing.length||!$__R.mode&&(target===389||target===388)){if($__R.mode||!$__R.mode&&(target===389||target===388))loop_continue24:{try{if($__R.mode){app311=$S.suspend()}else if(target===388)app311=$__R.stack[$__R.stack.length-1].f()}catch(exn364){if(exn364 instanceof $__T.Capture){exn364.stack.push({kind:"rest",f:restoreNextFrame,index:388,this:this});captureLocals(exn364.stack[exn364.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn364}try{if($__R.mode){app312=checkDomSexp.box(thing[i],thing)}else if(target===389)app312=$__R.stack[$__R.stack.length-1].f()}catch(exn365){if(exn365 instanceof $__T.Capture){exn365.stack.push({kind:"rest",f:restoreNextFrame,index:389,this:this});captureLocals(exn365.stack[exn365.stack.length-1])}else{$__R.pushTrace("Line 1104: in (anonymous function)")}throw exn365}}if($__R.mode)i++}}else if($__R.mode||!$__R.mode&&(target===391||target===390)){if($__R.mode&&$S.g.window.console&&$S.g.window.console.log||!$__R.mode&&target===390){try{if($__R.mode){app313=$S.g.window.console.log(thing[0])}else if(target===390)app313=$__R.stack[$__R.stack.length-1].f()}catch(exn366){if(exn366 instanceof $__T.Capture){exn366.stack.push({kind:"rest",f:restoreNextFrame,index:390,this:this});captureLocals(exn366.stack[exn366.stack.length-1])}else{$__R.pushTrace("Line 1107: in (anonymous function)")}throw exn366}}try{if($__R.mode){app314=new JsworldDomError.box("expected a Text or an Element, received "+thing+" within "+topThing,thing[0])}else if(target===391)app314=$__R.stack[$__R.stack.length-1].f()}catch(exn367){if(exn367 instanceof $__T.Capture){exn367.stack.push({kind:"rest",f:restoreNextFrame,index:391,this:this});captureLocals(exn367.stack[exn367.stack.length-1])}else{$__R.pushTrace("Line 1109: in (anonymous function)")}throw exn367}if($__R.mode)$__R.pushTrace("Line 1109: in (anonymous function)");throw app314}}$__R.remainingStack++;if(newTarget)return this};checkDomSexp.box=fun66;fun67=function funExpr95(msg,elt){this.msg=msg;this.elt=elt};JsworldDomError.box=fun67;fun68=function funExpr96(){return"JsworldDomError: "+this.msg};JsworldDomError.box.prototype.toString=fun68;fun69=function funExpr97(node,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[a,it_obj0,idx0,app315,app316,app317,app318,app319,keys0,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[a,it_obj0,idx0,app315,app316,app317,app318,app319,keys0,newTarget]}var restoreNextFrame=()=>{return funExpr97.call(this,node,attribs)};var app315,a,it_obj0,keys0,idx0,app316,app317,app318,app319;try{if($__R.mode){app315=$S.suspend()}else if(target===392)app315=$__R.stack[$__R.stack.length-1].f()}catch(exn368){if(exn368 instanceof $__T.Capture){exn368.stack.push({kind:"rest",f:restoreNextFrame,index:392,this:this});captureLocals(exn368.stack[exn368.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn368}if($__R.mode&&attribs||!$__R.mode&&(target===397||target===396||target===395||target===394||target===393)){if($__R.mode)it_obj0=attribs;if($__R.mode||!$__R.mode&&(target===397||target===396||target===395||target===394||target===393))loop_break25:while($__R.mode&&it_obj0!==null||!$__R.mode&&(target===397||target===396||target===395||target===394||target===393)){if($__R.mode||!$__R.mode&&(target===397||target===396||target===395||target===394||target===393))loop_continue25:{try{if($__R.mode){keys0=Object.keys(it_obj0)}else if(target===393)keys0=$__R.stack[$__R.stack.length-1].f()}catch(exn369){if(exn369 instanceof $__T.Capture){exn369.stack.push({kind:"rest",f:restoreNextFrame,index:393,this:this});captureLocals(exn369.stack[exn369.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn369}if($__R.mode)idx0=0;if($__R.mode||!$__R.mode&&(target===396||target===395||target===394))loop_break26:while($__R.mode&&idx0<keys0.length||!$__R.mode&&(target===396||target===395||target===394)){if($__R.mode||!$__R.mode&&(target===396||target===395||target===394))loop_continue26:{if($__R.mode)a=keys0[idx0];try{if($__R.mode){app316=$S.suspend()}else if(target===394)app316=$__R.stack[$__R.stack.length-1].f()}catch(exn370){if(exn370 instanceof $__T.Capture){exn370.stack.push({kind:"rest",f:restoreNextFrame,index:394,this:this});captureLocals(exn370.stack[exn370.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn370}try{if($__R.mode){app317=$S.g.hasOwnProperty.call(attribs,a)}else if(target===395)app317=$__R.stack[$__R.stack.length-1].f()}catch(exn371){if(exn371 instanceof $__T.Capture){exn371.stack.push({kind:"rest",f:restoreNextFrame,index:395,this:this});captureLocals(exn371.stack[exn371.stack.length-1])}else{$__R.pushTrace("Line 1136: in (anonymous function)")}throw exn371}if($__R.mode&&app317||!$__R.mode&&target===396){if($__R.mode&&typeof attribs[a]==="function"||!$__R.mode&&target===396){try{if($__R.mode){app318=add_ev.box(node,a,attribs[a])}else if(target===396)app318=$__R.stack[$__R.stack.length-1].f()}catch(exn372){if(exn372 instanceof $__T.Capture){exn372.stack.push({kind:"rest",f:restoreNextFrame,index:396,this:this});captureLocals(exn372.stack[exn372.stack.length-1])}else{$__R.pushTrace("Line 1138: in (anonymous function)")}throw exn372}}else if($__R.mode){if($__R.mode)node[a]=attribs[a]}}}if($__R.mode)idx0++}try{if($__R.mode){app319=Object.getPrototypeOf(it_obj0)}else if(target===397)app319=$__R.stack[$__R.stack.length-1].f()}catch(exn373){if(exn373 instanceof $__T.Capture){exn373.stack.push({kind:"rest",f:restoreNextFrame,index:397,this:this});captureLocals(exn373.stack[exn373.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn373}if($__R.mode)it_obj0=app319}}}{let retval36=node;$__R.remainingStack++;return newTarget&&!(retval36 instanceof Object)?this:retval36}$__R.remainingStack++;if(newTarget)return this};copy_attribs.box=fun69;Jsworld.box.p=p.box;Jsworld.box.div=div.box;Jsworld.box.button=button.box;fun71=function funExpr99(event){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app321,app320,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app321,app320,newTarget]}var restoreNextFrame=()=>{return funExpr99.call(this,event)};var app320,app321;try{if($__R.mode){app320=$S.suspend()}else if(target===398)app320=$__R.stack[$__R.stack.length-1].f()}catch(exn374){if(exn374 instanceof $__T.Capture){exn374.stack.push({kind:"rest",f:restoreNextFrame,index:398,this:this});captureLocals(exn374.stack[exn374.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn374}if($__R.mode&&event.preventDefault||!$__R.mode&&target===399){try{if($__R.mode){app321=event.preventDefault()}else if(target===399)app321=$__R.stack[$__R.stack.length-1].f()}catch(exn375){if(exn375 instanceof $__T.Capture){exn375.stack.push({kind:"rest",f:restoreNextFrame,index:399,this:this});captureLocals(exn375.stack[exn375.stack.length-1])}else{$__R.pushTrace("Line 1178: in (anonymous function)")}throw exn375}}else if($__R.mode){if($__R.mode)event.returnValue=false}$__R.remainingStack++;if(newTarget)return this};preventDefault.box=fun71;fun72=function funExpr100(event){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app323,app322,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app323,app322,newTarget]}var restoreNextFrame=()=>{return funExpr100.call(this,event)};var app322,app323;try{if($__R.mode){app322=$S.suspend()}else if(target===400)app322=$__R.stack[$__R.stack.length-1].f()}catch(exn376){if(exn376 instanceof $__T.Capture){exn376.stack.push({kind:"rest",f:restoreNextFrame,index:400,this:this});captureLocals(exn376.stack[exn376.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn376}if($__R.mode&&event.stopPropagation||!$__R.mode&&target===401){try{if($__R.mode){app323=event.stopPropagation()}else if(target===401)app323=$__R.stack[$__R.stack.length-1].f()}catch(exn377){if(exn377 instanceof $__T.Capture){exn377.stack.push({kind:"rest",f:restoreNextFrame,index:401,this:this});captureLocals(exn377.stack[exn377.stack.length-1])}else{$__R.pushTrace("Line 1186: in (anonymous function)")}throw exn377}}else if($__R.mode){if($__R.mode)event.cancelBubble=true}$__R.remainingStack++;if(newTarget)return this};stopPropagation.box=fun72;stopClickPropagation.box=function funExpr101(node){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app223,fun73,app222,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app223,fun73,app222,newTarget]}var restoreNextFrame=()=>{return funExpr101.call(this,node)};var app222,fun73,app223;try{if($__R.mode){app222=$S.suspend()}else if(target===402)app222=$__R.stack[$__R.stack.length-1].f()}catch(exn378){if(exn378 instanceof $__T.Capture){exn378.stack.push({kind:"rest",f:restoreNextFrame,index:402,this:this});captureLocals(exn378.stack[exn378.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn378}if($__R.mode)fun73=function funExpr102(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app225,app224,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app225,app224,newTarget]}var restoreNextFrame=()=>{return funExpr102.call(this,e)};var app224,app225;try{if($__R.mode){app224=$S.suspend()}else if(target===403)app224=$__R.stack[$__R.stack.length-1].f()}catch(exn379){if(exn379 instanceof $__T.Capture){exn379.stack.push({kind:"rest",f:restoreNextFrame,index:403,this:this});captureLocals(exn379.stack[exn379.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn379}try{if($__R.mode){app225=stopPropagation.box(e)}else if(target===404)app225=$__R.stack[$__R.stack.length-1].f()}catch(exn380){if(exn380 instanceof $__T.Capture){exn380.stack.push({kind:"rest",f:restoreNextFrame,index:404,this:this});captureLocals(exn380.stack[exn380.stack.length-1])}else{$__R.pushTrace("Line 1196: in (anonymous function)")}throw exn380}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app223=attachEvent.box(node,"click",fun73)}else if(target===405)app223=$__R.stack[$__R.stack.length-1].f()}catch(exn381){if(exn381 instanceof $__T.Capture){exn381.stack.push({kind:"rest",f:restoreNextFrame,index:405,this:this});captureLocals(exn381.stack[exn381.stack.length-1])}else{$__R.pushTrace("Line 1194: in (anonymous function)")}throw exn381}{let retval37=node;$__R.remainingStack++;return newTarget&&!(retval37 instanceof Object)?this:retval37}$__R.remainingStack++;if(newTarget)return this};Jsworld.box.input=input.box;fun74=function funExpr103(type,updateF,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[lastVal,n,app331,app332,app333,app334,app324,arg45,arg46,onEvent,fun86,fun87,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[lastVal,n,app331,app332,app333,app334,app324,arg45,arg46,onEvent,fun86,fun87,newTarget]}var restoreNextFrame=()=>{return funExpr103.call(this,type,updateF,attribs)};var n,lastVal,onEvent,app324,app331,fun86,app332,app333,fun87,app334,arg46,arg45;if($__R.mode){updateF={box:updateF};n={box:undefined};lastVal={box:undefined};onEvent={box:undefined}}try{if($__R.mode){app324=$S.suspend()}else if(target===406)app324=$__R.stack[$__R.stack.length-1].f()}catch(exn382){if(exn382 instanceof $__T.Capture){exn382.stack.push({kind:"rest",f:restoreNextFrame,index:406,this:this});captureLocals(exn382.stack[exn382.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn382}try{if($__R.mode){n.box=$S.g.document.createElement("input")}else if(target===407)n.box=$__R.stack[$__R.stack.length-1].f()}catch(exn383){if(exn383 instanceof $__T.Capture){exn383.stack.push({kind:"rest",f:restoreNextFrame,index:407,this:this});captureLocals(exn383.stack[exn383.stack.length-1])}else{$__R.pushTrace("Line 1227: in (anonymous function)")}throw exn383}if($__R.mode){n.box.type=type;lastVal.box=n.box.value;onEvent.box=function funExpr104(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app326,app325,fun84,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app326,app325,fun84,newTarget]}var restoreNextFrame=()=>{return funExpr104.call(this)};var app325,fun84,app326;try{if($__R.mode){app325=$S.suspend()}else if(target===408)app325=$__R.stack[$__R.stack.length-1].f()}catch(exn384){if(exn384 instanceof $__T.Capture){exn384.stack.push({kind:"rest",f:restoreNextFrame,index:408,this:this});captureLocals(exn384.stack[exn384.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn384}if($__R.mode&&!n.box.parentNode){{let retval38;$__R.remainingStack++;return newTarget&&!(retval38 instanceof Object)?this:retval38}}if($__R.mode)fun84=function funExpr105(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app328,app327,fun85,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app328,app327,fun85,newTarget]}var restoreNextFrame=()=>{return funExpr105.call(this)};var app327,fun85,app328;try{if($__R.mode){app327=$S.suspend()}else if(target===409)app327=$__R.stack[$__R.stack.length-1].f()}catch(exn385){if(exn385 instanceof $__T.Capture){exn385.stack.push({kind:"rest",f:restoreNextFrame,index:409,this:this});captureLocals(exn385.stack[exn385.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn385}if($__R.mode&&lastVal.box!==n.box.value||!$__R.mode&&target===412){if($__R.mode){lastVal.box=n.box.value;fun85=function funExpr106(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app330,app329,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app330,app329,newTarget]}var restoreNextFrame=()=>{return funExpr106.call(this,w,k)};var app329,app330;try{if($__R.mode){app329=$S.suspend()}else if(target===410)app329=$__R.stack[$__R.stack.length-1].f()}catch(exn386){if(exn386 instanceof $__T.Capture){exn386.stack.push({kind:"rest",f:restoreNextFrame,index:410,this:this});captureLocals(exn386.stack[exn386.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn386}try{if($__R.mode){app330=updateF.box(w,n.box.value,k)}else if(target===411)app330=$__R.stack[$__R.stack.length-1].f()}catch(exn387){if(exn387 instanceof $__T.Capture){exn387.stack.push({kind:"rest",f:restoreNextFrame,index:411,this:this});captureLocals(exn387.stack[exn387.stack.length-1])}else{$__R.pushTrace("Line 1238: in (anonymous function)")}throw exn387}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app328=change_world.box(fun85,doNothing.box)}else if(target===412)app328=$__R.stack[$__R.stack.length-1].f()}catch(exn388){if(exn388 instanceof $__T.Capture){exn388.stack.push({kind:"rest",f:restoreNextFrame,index:412,this:this});captureLocals(exn388.stack[exn388.stack.length-1])}else{$__R.pushTrace("Line 1237: in (anonymous function)")}throw exn388}}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app326=$S.g.setTimeout.call(void 0,fun84,0)}else if(target===413)app326=$__R.stack[$__R.stack.length-1].f()}catch(exn389){if(exn389 instanceof $__T.Capture){exn389.stack.push({kind:"rest",f:restoreNextFrame,index:413,this:this});captureLocals(exn389.stack[exn389.stack.length-1])}else{$__R.pushTrace("Line 1233: in (anonymous function)")}throw exn389}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app331=attachEvent.box(n.box,"keydown",onEvent.box)}else if(target===414)app331=$__R.stack[$__R.stack.length-1].f()}catch(exn390){if(exn390 instanceof $__T.Capture){exn390.stack.push({kind:"rest",f:restoreNextFrame,index:414,this:this});captureLocals(exn390.stack[exn390.stack.length-1])}else{$__R.pushTrace("Line 1245: in (anonymous function)")}throw exn390}if($__R.mode)fun86=function funExpr107(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app336,app335,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app336,app335,newTarget]}var restoreNextFrame=()=>{return funExpr107.call(this)};var app335,app336;try{if($__R.mode){app335=$S.suspend()}else if(target===415)app335=$__R.stack[$__R.stack.length-1].f()}catch(exn391){if(exn391 instanceof $__T.Capture){exn391.stack.push({kind:"rest",f:restoreNextFrame,index:415,this:this});captureLocals(exn391.stack[exn391.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn391}try{if($__R.mode){app336=detachEvent.box(n.box,"keydown",onEvent.box)}else if(target===416)app336=$__R.stack[$__R.stack.length-1].f()}catch(exn392){if(exn392 instanceof $__T.Capture){exn392.stack.push({kind:"rest",f:restoreNextFrame,index:416,this:this});captureLocals(exn392.stack[exn392.stack.length-1])}else{$__R.pushTrace("Line 1247: in (anonymous function)")}throw exn392}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app332=eventDetachers.box.push(fun86)}else if(target===417)app332=$__R.stack[$__R.stack.length-1].f()}catch(exn393){if(exn393 instanceof $__T.Capture){exn393.stack.push({kind:"rest",f:restoreNextFrame,index:417,this:this});captureLocals(exn393.stack[exn393.stack.length-1])}else{$__R.pushTrace("Line 1246: in (anonymous function)")}throw exn393}try{if($__R.mode){app333=attachEvent.box(n.box,"change",onEvent.box)}else if(target===418)app333=$__R.stack[$__R.stack.length-1].f()}catch(exn394){if(exn394 instanceof $__T.Capture){exn394.stack.push({kind:"rest",f:restoreNextFrame,index:418,this:this});captureLocals(exn394.stack[exn394.stack.length-1])}else{$__R.pushTrace("Line 1249: in (anonymous function)")}throw exn394}if($__R.mode)fun87=function funExpr108(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app338,app337,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app338,app337,newTarget]}var restoreNextFrame=()=>{return funExpr108.call(this)};var app337,app338;try{if($__R.mode){app337=$S.suspend()}else if(target===419)app337=$__R.stack[$__R.stack.length-1].f()}catch(exn395){if(exn395 instanceof $__T.Capture){exn395.stack.push({kind:"rest",f:restoreNextFrame,index:419,this:this});captureLocals(exn395.stack[exn395.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn395}try{if($__R.mode){app338=detachEvent.box(n.box,"change",onEvent.box)}else if(target===420)app338=$__R.stack[$__R.stack.length-1].f()}catch(exn396){if(exn396 instanceof $__T.Capture){exn396.stack.push({kind:"rest",f:restoreNextFrame,index:420,this:this});captureLocals(exn396.stack[exn396.stack.length-1])}else{$__R.pushTrace("Line 1251: in (anonymous function)")}throw exn396}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app334=eventDetachers.box.push(fun87)}else if(target===421)app334=$__R.stack[$__R.stack.length-1].f()}catch(exn397){if(exn397 instanceof $__T.Capture){exn397.stack.push({kind:"rest",f:restoreNextFrame,index:421,this:this});captureLocals(exn397.stack[exn397.stack.length-1])}else{$__R.pushTrace("Line 1250: in (anonymous function)")}throw exn397}try{if($__R.mode){arg46=copy_attribs.box(n.box,attribs)}else if(target===422)arg46=$__R.stack[$__R.stack.length-1].f()}catch(exn398){if(exn398 instanceof $__T.Capture){exn398.stack.push({kind:"rest",f:restoreNextFrame,index:422,this:this});captureLocals(exn398.stack[exn398.stack.length-1])}else{$__R.pushTrace("Line 1254: in (anonymous function)")}throw exn398}try{if($__R.mode){arg45=addFocusTracking.box(arg46)}else if(target===423)arg45=$__R.stack[$__R.stack.length-1].f()}catch(exn399){if(exn399 instanceof $__T.Capture){exn399.stack.push({kind:"rest",f:restoreNextFrame,index:423,this:this});captureLocals(exn399.stack[exn399.stack.length-1])}else{$__R.pushTrace("Line 1254: in (anonymous function)")}throw exn399}if($__R.mode)$__R.remainingStack++;if($__R.mode)return stopClickPropagation.box(arg45);else;$__R.remainingStack++;if(newTarget)return this};text_input.box=fun74;fun75=function funExpr109(type,updateF,attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[onCheck,n,app342,app343,app339,fun88,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[onCheck,n,app342,app343,app339,fun88,newTarget]}var restoreNextFrame=()=>{return funExpr109.call(this,type,updateF,attribs)};var n,app339,onCheck,app342,fun88,app343;if($__R.mode){updateF={box:updateF};n={box:undefined}}try{if($__R.mode){app339=$S.suspend()}else if(target===425)app339=$__R.stack[$__R.stack.length-1].f()}catch(exn400){if(exn400 instanceof $__T.Capture){exn400.stack.push({kind:"rest",f:restoreNextFrame,index:425,this:this});captureLocals(exn400.stack[exn400.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn400}try{if($__R.mode){n.box=$S.g.document.createElement("input")}else if(target===426)n.box=$__R.stack[$__R.stack.length-1].f()}catch(exn401){if(exn401 instanceof $__T.Capture){exn401.stack.push({kind:"rest",f:restoreNextFrame,index:426,this:this});captureLocals(exn401.stack[exn401.stack.length-1])}else{$__R.pushTrace("Line 1259: in (anonymous function)")}throw exn401}if($__R.mode){n.box.type=type;onCheck=function funExpr110(w,e,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app341,app340,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app341,app340,newTarget]}var restoreNextFrame=()=>{return funExpr110.call(this,w,e,k)};var app340,app341;try{if($__R.mode){app340=$S.suspend()}else if(target===427)app340=$__R.stack[$__R.stack.length-1].f()}catch(exn402){if(exn402 instanceof $__T.Capture){exn402.stack.push({kind:"rest",f:restoreNextFrame,index:427,this:this});captureLocals(exn402.stack[exn402.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn402}try{if($__R.mode){app341=updateF.box(w,n.box.checked,k)}else if(target===428)app341=$__R.stack[$__R.stack.length-1].f()}catch(exn403){if(exn403 instanceof $__T.Capture){exn403.stack.push({kind:"rest",f:restoreNextFrame,index:428,this:this});captureLocals(exn403.stack[exn403.stack.length-1])}else{$__R.pushTrace("Line 1262: in (anonymous function)")}throw exn403}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app342=add_ev_after.box(n.box,"change",onCheck)}else if(target===429)app342=$__R.stack[$__R.stack.length-1].f()}catch(exn404){if(exn404 instanceof $__T.Capture){exn404.stack.push({kind:"rest",f:restoreNextFrame,index:429,this:this});captureLocals(exn404.stack[exn404.stack.length-1])}else{$__R.pushTrace("Line 1265: in (anonymous function)")}throw exn404}if($__R.mode)fun88=function funExpr111(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app345,app344,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app345,app344,newTarget]}var restoreNextFrame=()=>{return funExpr111.call(this,e)};var app344,app345;try{if($__R.mode){app344=$S.suspend()}else if(target===430)app344=$__R.stack[$__R.stack.length-1].f()}catch(exn405){if(exn405 instanceof $__T.Capture){exn405.stack.push({kind:"rest",f:restoreNextFrame,index:430,this:this});captureLocals(exn405.stack[exn405.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn405}try{if($__R.mode){app345=stopPropagation.box(e)}else if(target===431)app345=$__R.stack[$__R.stack.length-1].f()}catch(exn406){if(exn406 instanceof $__T.Capture){exn406.stack.push({kind:"rest",f:restoreNextFrame,index:431,this:this});captureLocals(exn406.stack[exn406.stack.length-1])}else{$__R.pushTrace("Line 1268: in (anonymous function)")}throw exn406}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app343=attachEvent.box(n.box,"click",fun88)}else if(target===432)app343=$__R.stack[$__R.stack.length-1].f()}catch(exn407){if(exn407 instanceof $__T.Capture){exn407.stack.push({kind:"rest",f:restoreNextFrame,index:432,this:this});captureLocals(exn407.stack[exn407.stack.length-1])}else{$__R.pushTrace("Line 1267: in (anonymous function)")}throw exn407}if($__R.mode)$__R.remainingStack++;if($__R.mode)return copy_attribs.box(n.box,attribs);else;$__R.remainingStack++;if(newTarget)return this};checkbox_input.box=fun75;Jsworld.box.text=text.box;Jsworld.box.select=select.box;fun76=function funExpr112(attribs){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[node,app346,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[node,app346,newTarget]}var restoreNextFrame=()=>{return funExpr112.call(this,attribs)};var app346,node;try{if($__R.mode){app346=$S.suspend()}else if(target===434)app346=$__R.stack[$__R.stack.length-1].f()}catch(exn408){if(exn408 instanceof $__T.Capture){exn408.stack.push({kind:"rest",f:restoreNextFrame,index:434,this:this});captureLocals(exn408.stack[exn408.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn408}try{if($__R.mode){node=$S.g.document.createElement("option")}else if(target===435)node=$__R.stack[$__R.stack.length-1].f()}catch(exn409){if(exn409 instanceof $__T.Capture){exn409.stack.push({kind:"rest",f:restoreNextFrame,index:435,this:this});captureLocals(exn409.stack[exn409.stack.length-1])}else{$__R.pushTrace("Line 1307: in (anonymous function)")}throw exn409}if($__R.mode){node.text=attribs.value;node.value=attribs.value}{let retval39=node;$__R.remainingStack++;return newTarget&&!(retval39 instanceof Object)?this:retval39}$__R.remainingStack++;if(newTarget)return this};option.box=fun76;Jsworld.box.textarea=textarea.box;Jsworld.box.h1=h1.box;Jsworld.box.canvas=canvas.box;Jsworld.box.img=img.box;Jsworld.box.raw_node=raw_node.box;$S.g.module.exports={jsworld:Jsworld.box}}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return fun1();else;$__R.remainingStack++;if(newTarget)return this};if($__R.mode)fun0;